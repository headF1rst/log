<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="apple-touch-icon" sizes="180x180" href="https://i.imgur.com/2nHGFTv.png"/><link rel="icon" type="image/png" sizes="32x32" href="https://i.imgur.com/2nHGFTv.png"/><link rel="icon" type="image/png" sizes="16x16" href="https://i.imgur.com/2nHGFTv.png"/><link rel="manifest" href="/log/site.webmanifest"/><link rel="mask-icon" href="/log/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#da532c"/><meta name="theme-color" content="#ffffff"/><title>Gson ë¼ì´ë¸ŒëŸ¬ë¦¬ InaccessibleObjectException</title><meta name="title" content="Gson ë¼ì´ë¸ŒëŸ¬ë¦¬ InaccessibleObjectException"/><meta name="description" content="gson"/><meta name="keywords" content="gson, java"/><meta name="robots" content="index, follow"/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="language" content="Korean"/><meta name="author" content="Sanha Ko"/><meta property="og:title" content="Gson ë¼ì´ë¸ŒëŸ¬ë¦¬ InaccessibleObjectException"/><meta property="og:url" content="https://headf1rst.github.io/log/ko/post30"/><meta property="og:type" content="blog"/><meta property="og:image" content="https://media.techmaster.vn/api/static/bq0a8rs51co78aldi4p0/lsRpW5hr"/><meta property="og:description" content="gson"/><link rel="alternate" hrefLang="ko" href="https://headf1rst.github.io/log/ko/post30"/><link rel="alternate" hrefLang="x-default" href="https://headf1rst.github.io/log/ko/post30"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"TechArticle","headline":"Gson ë¼ì´ë¸ŒëŸ¬ë¦¬ InaccessibleObjectException","datePublished":"2024-07-02 10:00","dateModified":"2024-07-02 10:00","author":{"@type":"Person","name":"Sanha Ko","url":"https://github.com/headF1rst"},"description":"gson","image":"https://media.techmaster.vn/api/static/bq0a8rs51co78aldi4p0/lsRpW5hr","url":"https://headf1rst.github.io/log/ko/post30","keywords":"gson, Java","inLanguage":"ko-KR","about":[{"@type":"Thing","name":"gson"},{"@type":"Thing","name":"Java"}],"programmingLanguage":"Java, Kotlin, JavaScript, TypeScript","publisher":{"@type":"Organization","name":"ì‚°í•˜ê°œë°œì‹¤ë¡","logo":{"@type":"ImageObject","url":"https://i.imgur.com/JtjOEf3.png"}},"mainEntityOfPage":{"@type":"WebPage","@id":"https://headf1rst.github.io/log/ko/post30"}}</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://headf1rst.github.io/log/ko"},{"@type":"ListItem","position":2,"name":"Gson ë¼ì´ë¸ŒëŸ¬ë¦¬ InaccessibleObjectException","item":"https://headf1rst.github.io/log/ko/post30"}]}</script><meta name="next-head-count" content="26"/><link rel="preload" href="/log/_next/static/css/12f1bbdb773e9471.css" as="style"/><link rel="stylesheet" href="/log/_next/static/css/12f1bbdb773e9471.css" data-n-g=""/><link rel="preload" href="/log/_next/static/css/38994dd0aed51f22.css" as="style"/><link rel="stylesheet" href="/log/_next/static/css/38994dd0aed51f22.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/log/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/log/_next/static/chunks/webpack-82b4c2acf5604dc5.js" defer=""></script><script src="/log/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/log/_next/static/chunks/main-6e6d6dc6617c8481.js" defer=""></script><script src="/log/_next/static/chunks/pages/_app-3cbbaf6a90de61d5.js" defer=""></script><script src="/log/_next/static/chunks/9f96d65d-fb5fd9e6ccafc67e.js" defer=""></script><script src="/log/_next/static/chunks/259-59cbd4b09a9629be.js" defer=""></script><script src="/log/_next/static/chunks/819-49378f41c4211145.js" defer=""></script><script src="/log/_next/static/chunks/pages/%5Blang%5D/%5Bid%5D-c173481abf3f6953.js" defer=""></script><script src="/log/_next/static/zBWA72nlR7lg00Dg_D38I/_buildManifest.js" defer=""></script><script src="/log/_next/static/zBWA72nlR7lg00Dg_D38I/_ssgManifest.js" defer=""></script></head><body><div id="__next"><nav class="flex bg-white sticky top-0 left-0 z-50 justify-between items-center border-b-2 border-gray-100 py-3 md:justify-start md:space-x-10 px-10 sm:px-5 dark:bg-[#0d1117] dark:text-[#c9d1d9] dark:border-gray-600"><div class="flex justify-start"><a href="/log/ko/"><div class="flex items-center gap-2 cursor-pointer"><h1 class="text-lg ">JustAnotherBlog</h1></div></a></div><div class="flex justify-between gap-10 sm:hidden items-center"><a href="/log/ko/"><button class="font-light hover:text-indigo-300 text-base">Home</button></a><a href="/log/ko/?section=tech"><button class="font-light hover:text-indigo-300 text-base">Tech</button></a><a href="/log/ko/?section=domain"><button class="font-light hover:text-indigo-300 text-base">Domain</button></a><a href="https://plain-composer-c65.notion.site/29c7640fdf054059b6ea28ed61189bfb" target="_blank" rel="noreferrer" class="hover:text-indigo-300 text-base font-light flex gap-1">About<span class="flex justify-center" style="align-items:center"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z"></path><path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"></path></svg></span></a><div class="relative"><button class="flex items-center gap-1 hover:text-indigo-300 text-base font-light">ğŸ‡°ğŸ‡·<!-- --> <!-- -->í•œêµ­ì–´</button></div></div><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="lg:hidden" height="25" width="25" xmlns="http://www.w3.org/2000/svg"><path d="M32 96v64h448V96H32zm0 128v64h448v-64H32zm0 128v64h448v-64H32z"></path></svg></nav><main class="dark:bg-[#0d1117] h-screen pb-10"><div class="flex flex-col w-3/5 sm:w-5/6 m-auto pt-20 pb-20 gap-10 dark:bg-[#0d1117] dark:text-[#c9d1d9]"><ul id="scroll-spy" class="sm:hidden p-10 fixed top-50 right-0 h-full w-1/5 text-gray-500 dark:text-[#c9d1d9]"></ul><div class="text-5xl font-bold">Gson ë¼ì´ë¸ŒëŸ¬ë¦¬ InaccessibleObjectException</div><div class="flex flex-col gap-2"><div class="text-base text-gray-600 dark:text-gray-300">2024-07-02 10:00</div><div class="flex flex-wrap gap-2 dark:text-black sm:m-0"><span class="p-1 pl-3 pr-3 rounded-md bg-indigo-100 hover:bg-indigo-200 cursor-pointer transition ease-in-out duration-200 text-sm">gson</span><span class="p-1 pl-3 pr-3 rounded-md bg-indigo-100 hover:bg-indigo-200 cursor-pointer transition ease-in-out duration-200 text-sm">Java</span></div></div><div class="flex items-center gap-2"><span class="text-sm text-gray-400">ğŸ‡ºğŸ‡¸ ì˜ì–´ë¡œ ì½ê¸°</span></div><div class="markdown-body" style="font-size:17px"><p>Spring Boot 2.5.x ë²„ì „ì—ì„œ 3.2.x ë²„ì „ìœ¼ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ í•˜ëŠ” ê³¼ì •ì—ì„œ InaccessibleObjectExceptionì´ ë°œìƒí•˜ì˜€ë‹¤. Gson ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ìª½ì—ì„œ ë°œìƒí•œ ë¬¸ì œì˜€ëŠ”ë°, ì´ì— ëŒ€í•œ íŠ¸ëŸ¬ë¸” ìŠˆíŒ… ê³¼ì •ì„ ì •ë¦¬í•´ ë³´ê³ ì í•œë‹¤.</p>
<h2>Gson ë¼ì´ë¸ŒëŸ¬ë¦¬ ë€?</h2>
<p>êµ¬ê¸€ì´ ë§Œë“  ìë°” ê¸°ë°˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, ìë°” ê°ì²´ë¥¼ JSONìœ¼ë¡œ ì§ë ¬í™”(Serialization)í•˜ê±°ë‚˜ JSONì„ ìë°” ê°ì²´ë¡œ ì—­ì§ë ¬í™”(Deserialization)í•˜ëŠ” ì‘ì—…ì„ ì‰½ê²Œ í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤.</p>
<h3>ì§ë ¬í™” ê³¼ì • ë‚´ë¶€ ë™ì‘</h3>
<p><code node="[object Object]">Gson.toJson(Object)</code> ë©”ì„œë“œëŠ” ê°ì²´ë¥¼ ì „ë‹¬ë°›ì•„, ì¸ìë¡œ ì „ë‹¬ëœ ê°ì²´ë¥¼ Jsonìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ë°˜í™˜í•œë‹¤.</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;color:#383a42;background:#fafafa"><code class="language-java" style="white-space:pre"><span>Gson gson = </span><span style="color:#a626a4">new</span><span> Gson();
</span>String json = gson.toJson(myObject);</code></div></pre>
<p><code node="[object Object]">toJson(Object src)</code> ë©”ì„œë“œëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ê°ì²´ì˜ íƒ€ì…ì„ ì¶”ë¡ í•œ í›„ <code node="[object Object]">toJson(Object src, Type typeOfSrc, Appendable writer)</code> ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤.</p>
<p>í˜¸ì¶œëœ <code node="[object Object]">toJson</code> ë©”ì„œë“œëŠ” ì£¼ì–´ì§„ ê°ì²´ íƒ€ì…ì— ë§ëŠ” <code node="[object Object]">TypeAdapter</code>ë¥¼ ì°¾ê³ , ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°ì²´ë¥¼ JSONìœ¼ë¡œ ë³€í™˜í•œë‹¤. ì´ë•Œ ê°ì²´ íƒ€ì…ì— ë§ëŠ” TypeAdapterë¥¼ ì°¾ê¸° ìœ„í•´ <code node="[object Object]">getAdapter(TypeToken)</code> ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤.</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;color:#383a42;background:#fafafa"><code class="language-java" style="white-space:pre"><span class="hljs-function" style="color:#a626a4">public</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a626a4">void</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#4078f2">toJson</span><span class="hljs-function hljs-params">(Object src, Type typeOfSrc, JsonWriter writer)</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a626a4">throws</span><span class="hljs-function"> JsonIOException </span><span>{  
</span>    TypeAdapter&lt;Object&gt; adapter = (TypeAdapter&lt;Object&gt;) getAdapter(TypeToken.get(typeOfSrc));
<span>    </span><span style="color:#a0a1a7;font-style:italic">// ...</span><span>
</span>}</code></div></pre>
<p><code node="[object Object]">getAdapter(TypeToken)</code> ë©”ì„œë“œëŠ” ì£¼ì–´ì§„ íƒ€ì…ì— ëŒ€í•œ <code node="[object Object]">TypeAdapter</code>ë¥¼ ë¨¼ì € ìºì‹œì—ì„œ ì°¾ê³ , ì—†ìœ¼ë©´ <code node="[object Object]">TypeAdapterFactory</code> ë¦¬ìŠ¤íŠ¸ë¥¼ ìˆœíšŒí•˜ë©´ì„œ ê° íŒ©í† ë¦¬ì— ëŒ€í•´ <code node="[object Object]">create</code> ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ì£¼ì–´ì§„ íƒ€ì…ì— ëŒ€í•œ <code node="[object Object]">TypeAdapter</code>ë¥¼ ìƒì„±í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;color:#383a42;background:#fafafa"><code class="language-java" style="white-space:pre"><span style="color:#a626a4">public</span><span> &lt;T&gt; </span><span class="hljs-function">TypeAdapter&lt;T&gt; </span><span class="hljs-function" style="color:#4078f2">getAdapter</span><span class="hljs-function hljs-params">(TypeToken&lt;T&gt; type)</span><span class="hljs-function"> </span><span>{  
</span>  TypeAdapter&lt;?&gt; cached = typeTokenCache.get(type);  
<span>  </span><span style="color:#a626a4">if</span><span> (cached != </span><span style="color:#a626a4">null</span><span>) {  
</span>    TypeAdapter&lt;T&gt; adapter = (TypeAdapter&lt;T&gt;) cached;  
<span>    </span><span style="color:#a626a4">return</span><span> adapter;  
</span>  }  
<!-- -->
<span>  </span><span style="color:#a0a1a7;font-style:italic">// ...</span><span>
</span>  
<span>  TypeAdapter&lt;T&gt; candidate = </span><span style="color:#a626a4">null</span><span>;  
</span><span>  </span><span style="color:#a626a4">try</span><span> {  
</span><span>    FutureTypeAdapter&lt;T&gt; call = </span><span style="color:#a626a4">new</span><span> FutureTypeAdapter&lt;&gt;();  
</span>    threadCalls.put(type, call);  
<!-- -->  
<span>    </span><span style="color:#a626a4">for</span><span> (TypeAdapterFactory factory : factories) {  
</span><span>      candidate = factory.create(</span><span style="color:#a626a4">this</span><span>, type);  
</span><span>      </span><span style="color:#a626a4">if</span><span> (candidate != </span><span style="color:#a626a4">null</span><span>) {  
</span>        call.setDelegate(candidate);  
<span>        </span><span style="color:#a0a1a7;font-style:italic">// Replace future adapter with actual adapter  </span><span>
</span>        threadCalls.put(type, candidate);  
<span>        </span><span style="color:#a626a4">break</span><span>;  
</span>      }  
<!-- -->    }  
<!-- -->  } 
<span>  </span><span style="color:#a0a1a7;font-style:italic">// ...</span><span>
</span><span>  </span><span style="color:#a626a4">return</span><span> candidate;  
</span>}</code></div></pre>
<p>TypeAdapterFactory ë¦¬ìŠ¤íŠ¸ë¥¼ ìˆœíšŒí•˜ë©´ì„œ, ë¨¼ì € ì‚¬ìš©ì ì •ì˜ ë˜ëŠ” íŠ¹ìˆ˜í•œ TypeAdapterFactoryë¥¼ í™•ì¸í•˜ê³ , ì ì ˆí•œ TypeAdapterë¥¼ ì°¾ì§€ ëª»í•˜ë©´ <strong>ReflectiveTypeAdapterFactory</strong>ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°ì²´ì˜ í•„ë“œì— ì ‘ê·¼í•˜ê³  JSONìœ¼ë¡œ ì§ë ¬í™” í•œë‹¤.</p>
<h2>ë¬¸ì œ ì›ì¸</h2>
<blockquote>
<p>Unable to make field private final java.time.LocalDate java.time.LocalDateTime.date accessible: module java.base does not &quot;opens java.time&quot; to unnamed module.</p>
</blockquote>
<p>ë¡œê·¸ì¸ ì‹œì— <code node="[object Object]">ValidToken</code> ê°ì²´ë¥¼ ì§ë ¬í™”í•˜ì—¬ Redisì— ì €ì¥í•˜ëŠ” ê³¼ì •ì—ì„œ Gson ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ”ë°, ìœ„ì™€ ê°™ì€ ì˜ˆì™¸ê°€ ë°œìƒí–ˆë‹¤.</p>
<p>Spring Boot 3.2.xë¡œ ë²„ì „ì—…í•˜ë©´ì„œ Java ë²„ì „ ë˜í•œ 11ì—ì„œ 17ë¡œ ì—…ê·¸ë ˆì´ë“œ í•˜ì˜€ë‹¤.
Java 17 ì´ìƒ ë¶€í„°ëŠ” ëª¨ë“ˆí™”ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë¦¬í”Œë ‰ì…˜ì„ í†µí•´ ë‹¤ë¥¸ ëª¨ë“ˆì˜ private í•„ë“œì— ì ‘ê·¼í•˜ëŠ” ê²ƒì´ ì œí•œë˜ë„ë¡ ë³€ê²½ ë˜ì—ˆê¸° ë•Œë¬¸ì—, Gson ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ TypeAdapterFactory ë¦¬ìŠ¤íŠ¸ë¥¼ ìˆœíšŒí•˜ëŠ” ê³¼ì •ì—ì„œ ë¬¸ì œê°€ ë°œìƒí•˜ëŠ”ê²ƒ ì´ì—ˆë‹¤.</p>
<p>Gsonì€ ë¨¼ì € ì‚¬ìš©ì ì •ì˜ ë˜ëŠ” íŠ¹ìˆ˜í•œ <code node="[object Object]">TypeAdapterFactory</code>ë¥¼ í™•ì¸í•˜ê³ , ì ì ˆí•œ <code node="[object Object]">TypeAdapter</code>ë¥¼ ì°¾ì§€ ëª»í•˜ë©´ <code node="[object Object]">ReflectiveTypeAdapterFactory</code>ë¥¼ ì‚¬ìš©í•˜ê²Œ ëœë‹¤.</p>
<p><code node="[object Object]">ReflectiveTypeAdapterFactory</code>ëŠ” ê°ì²´ì˜ í•„ë“œë¥¼ íƒìƒ‰í•˜ê³ , <code node="[object Object]">field.setAccessible(true)</code>ë¥¼ í˜¸ì¶œí•˜ì—¬ private í•„ë“œë¥¼ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •í•œë‹¤. í•˜ì§€ë§Œ Java 17 ì´ìƒì˜ ëª¨ë“ˆ ì‹œìŠ¤í…œì—ì„œëŠ” ëª¨ë“ˆí™”ëœ
ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì´ëŸ¬í•œ í˜¸ì¶œì´ ê¸°ë³¸ì ìœ¼ë¡œ ì œí•œë˜ê¸° ë•Œë¬¸ì— <code node="[object Object]">ReflectiveTypeAdapterFactory</code>ê°€ private í•„ë“œì— ì ‘ê·¼í•  ìˆ˜ ì—†ê²Œ ë˜ì–´, ê²°ê³¼ì ìœ¼ë¡œ ì§ë ¬í™” ë° ì—­ì§ë ¬í™” ê³¼ì •ì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.</p>
<h2>í•´ê²°ë°©ë²•</h2>
<p>private í•„ë“œë¥¼ ê°€ì§„ í´ë˜ìŠ¤ íƒ€ì…ì— ëŒ€í•œ ì§ë ¬í™” ë° ì—­ì§ë ¬í™” ë¡œì§ì´ êµ¬í˜„ëœ ì»¤ìŠ¤í…€ TypeAdapterë¥¼ êµ¬í˜„í•œë©´ Gsonì´ TypeAdapterFactory ë¦¬ìŠ¤íŠ¸ë¥¼ ìˆœíšŒí•  ë•Œ, ì •ì˜í•œ ì»¤ìŠ¤í…€ TypeAdapterê°€ ReflectiveTypeAdapterFactory ë³´ë‹¤ ìš°ì„ ìˆœìœ„ë¥¼ ê°–ê¸° ë•Œë¬¸ì— ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;color:#383a42;background:#fafafa"><code class="language-java" style="white-space:pre"><span style="color:#a626a4">public</span><span> </span><span class="hljs-class" style="color:#a626a4">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#4078f2">LocalDateTimeAdapter</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#a626a4">extends</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#4078f2">TypeAdapter</span><span class="hljs-class">&lt;</span><span class="hljs-class" style="color:#4078f2">LocalDateTime</span><span class="hljs-class">&gt; </span><span>{
</span>
<span>    </span><span style="color:#a626a4">private</span><span> </span><span style="color:#a626a4">static</span><span> </span><span style="color:#a626a4">final</span><span> DateTimeFormatter formatter = DateTimeFormatter.ISO_LOCAL_DATE_TIME;
</span>
<span>    </span><span style="color:#4078f2">@Override</span><span>
</span><span>    </span><span class="hljs-function" style="color:#a626a4">public</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a626a4">void</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#4078f2">write</span><span class="hljs-function hljs-params">(JsonWriter jsonWriter, LocalDateTime localDateTime)</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a626a4">throws</span><span class="hljs-function"> IOException </span><span>{
</span>        jsonWriter.value(localDateTime.format(formatter));
<!-- -->    }
<!-- -->
<span>    </span><span style="color:#4078f2">@Override</span><span>
</span><span>    </span><span class="hljs-function" style="color:#a626a4">public</span><span class="hljs-function"> LocalDateTime </span><span class="hljs-function" style="color:#4078f2">read</span><span class="hljs-function hljs-params">(JsonReader jsonReader)</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a626a4">throws</span><span class="hljs-function"> IOException </span><span>{
</span><span>        </span><span style="color:#a626a4">return</span><span> LocalDateTime.parse(jsonReader.nextString(), formatter);
</span>    }
<!-- -->}</code></div></pre>
<h2>ì°¸ê³  ìë£Œ</h2>
<ul>
<li><a href="https://github.com/google/gson/issues/1979">Error reflection JDK 17 and gson</a></li>
<li><a href="https://github.com/google/gson/blob/main/Troubleshooting.md#reflection-inaccessible">Gson ê³µì‹ íŠ¸ëŸ¬ë¸” ìŠˆíŒ… ê°€ì´ë“œ ë¬¸ì„œ</a></li>
</ul></div><section></section></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"post30","lang":"ko","title":"Gson ë¼ì´ë¸ŒëŸ¬ë¦¬ InaccessibleObjectException","thumbnail":"https://media.techmaster.vn/api/static/bq0a8rs51co78aldi4p0/lsRpW5hr","section":"tech","tags":"gson, Java","date":"2024-07-02 10:00","searchKeywords":"gson, java","description":"gson","preview":"\nSpring Boot 2.5.x ë²„ì „ì—ì„œ 3.2.x ë²„ì „ìœ¼ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ í•˜ëŠ” ê³¼ì •ì—ì„œ InaccessibleObjectExceptionì´ ë°œìƒí•˜ì˜€ë‹¤. Gson ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ìª½ì—ì„œ ë°œìƒí•œ ë¬¸ì œì˜€ëŠ”ë°, ì´ì— ëŒ€í•œ íŠ¸ëŸ¬ë¸” ìŠˆíŒ… ê³¼ì •ì„ ì •ë¦¬í•´ ë³´"},"detail":"\nSpring Boot 2.5.x ë²„ì „ì—ì„œ 3.2.x ë²„ì „ìœ¼ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ í•˜ëŠ” ê³¼ì •ì—ì„œ InaccessibleObjectExceptionì´ ë°œìƒí•˜ì˜€ë‹¤. Gson ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ìª½ì—ì„œ ë°œìƒí•œ ë¬¸ì œì˜€ëŠ”ë°, ì´ì— ëŒ€í•œ íŠ¸ëŸ¬ë¸” ìŠˆíŒ… ê³¼ì •ì„ ì •ë¦¬í•´ ë³´ê³ ì í•œë‹¤.\n\n## Gson ë¼ì´ë¸ŒëŸ¬ë¦¬ ë€?\n\nêµ¬ê¸€ì´ ë§Œë“  ìë°” ê¸°ë°˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, ìë°” ê°ì²´ë¥¼ JSONìœ¼ë¡œ ì§ë ¬í™”(Serialization)í•˜ê±°ë‚˜ JSONì„ ìë°” ê°ì²´ë¡œ ì—­ì§ë ¬í™”(Deserialization)í•˜ëŠ” ì‘ì—…ì„ ì‰½ê²Œ í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤.\n\n### ì§ë ¬í™” ê³¼ì • ë‚´ë¶€ ë™ì‘\n\n`Gson.toJson(Object)` ë©”ì„œë“œëŠ” ê°ì²´ë¥¼ ì „ë‹¬ë°›ì•„, ì¸ìë¡œ ì „ë‹¬ëœ ê°ì²´ë¥¼ Jsonìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ë°˜í™˜í•œë‹¤.\n\n```java\nGson gson = new Gson();\nString json = gson.toJson(myObject);\n```\n\n`toJson(Object src)` ë©”ì„œë“œëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ê°ì²´ì˜ íƒ€ì…ì„ ì¶”ë¡ í•œ í›„ `toJson(Object src, Type typeOfSrc, Appendable writer)` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤.\n\ní˜¸ì¶œëœ `toJson` ë©”ì„œë“œëŠ” ì£¼ì–´ì§„ ê°ì²´ íƒ€ì…ì— ë§ëŠ” `TypeAdapter`ë¥¼ ì°¾ê³ , ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°ì²´ë¥¼ JSONìœ¼ë¡œ ë³€í™˜í•œë‹¤. ì´ë•Œ ê°ì²´ íƒ€ì…ì— ë§ëŠ” TypeAdapterë¥¼ ì°¾ê¸° ìœ„í•´ `getAdapter(TypeToken)` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤.\n\n```java\npublic void toJson(Object src, Type typeOfSrc, JsonWriter writer) throws JsonIOException {  \n    TypeAdapter\u003cObject\u003e adapter = (TypeAdapter\u003cObject\u003e) getAdapter(TypeToken.get(typeOfSrc));\n    // ...\n}\n```\n\n`getAdapter(TypeToken)` ë©”ì„œë“œëŠ” ì£¼ì–´ì§„ íƒ€ì…ì— ëŒ€í•œ `TypeAdapter`ë¥¼ ë¨¼ì € ìºì‹œì—ì„œ ì°¾ê³ , ì—†ìœ¼ë©´ `TypeAdapterFactory` ë¦¬ìŠ¤íŠ¸ë¥¼ ìˆœíšŒí•˜ë©´ì„œ ê° íŒ©í† ë¦¬ì— ëŒ€í•´ `create` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ì£¼ì–´ì§„ íƒ€ì…ì— ëŒ€í•œ `TypeAdapter`ë¥¼ ìƒì„±í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.\n\n```java\npublic \u003cT\u003e TypeAdapter\u003cT\u003e getAdapter(TypeToken\u003cT\u003e type) {  \n  TypeAdapter\u003c?\u003e cached = typeTokenCache.get(type);  \n  if (cached != null) {  \n    TypeAdapter\u003cT\u003e adapter = (TypeAdapter\u003cT\u003e) cached;  \n    return adapter;  \n  }  \n\n  // ...\n  \n  TypeAdapter\u003cT\u003e candidate = null;  \n  try {  \n    FutureTypeAdapter\u003cT\u003e call = new FutureTypeAdapter\u003c\u003e();  \n    threadCalls.put(type, call);  \n  \n    for (TypeAdapterFactory factory : factories) {  \n      candidate = factory.create(this, type);  \n      if (candidate != null) {  \n        call.setDelegate(candidate);  \n        // Replace future adapter with actual adapter  \n        threadCalls.put(type, candidate);  \n        break;  \n      }  \n    }  \n  } \n  // ...\n  return candidate;  \n}\n```\n\nTypeAdapterFactory ë¦¬ìŠ¤íŠ¸ë¥¼ ìˆœíšŒí•˜ë©´ì„œ, ë¨¼ì € ì‚¬ìš©ì ì •ì˜ ë˜ëŠ” íŠ¹ìˆ˜í•œ TypeAdapterFactoryë¥¼ í™•ì¸í•˜ê³ , ì ì ˆí•œ TypeAdapterë¥¼ ì°¾ì§€ ëª»í•˜ë©´ **ReflectiveTypeAdapterFactory**ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°ì²´ì˜ í•„ë“œì— ì ‘ê·¼í•˜ê³  JSONìœ¼ë¡œ ì§ë ¬í™” í•œë‹¤.\n\n## ë¬¸ì œ ì›ì¸\n\n\u003e Unable to make field private final java.time.LocalDate java.time.LocalDateTime.date accessible: module java.base does not \"opens java.time\" to unnamed module.\n\në¡œê·¸ì¸ ì‹œì— `ValidToken` ê°ì²´ë¥¼ ì§ë ¬í™”í•˜ì—¬ Redisì— ì €ì¥í•˜ëŠ” ê³¼ì •ì—ì„œ Gson ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ”ë°, ìœ„ì™€ ê°™ì€ ì˜ˆì™¸ê°€ ë°œìƒí–ˆë‹¤.\n\nSpring Boot 3.2.xë¡œ ë²„ì „ì—…í•˜ë©´ì„œ Java ë²„ì „ ë˜í•œ 11ì—ì„œ 17ë¡œ ì—…ê·¸ë ˆì´ë“œ í•˜ì˜€ë‹¤.\nJava 17 ì´ìƒ ë¶€í„°ëŠ” ëª¨ë“ˆí™”ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë¦¬í”Œë ‰ì…˜ì„ í†µí•´ ë‹¤ë¥¸ ëª¨ë“ˆì˜ private í•„ë“œì— ì ‘ê·¼í•˜ëŠ” ê²ƒì´ ì œí•œë˜ë„ë¡ ë³€ê²½ ë˜ì—ˆê¸° ë•Œë¬¸ì—, Gson ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ TypeAdapterFactory ë¦¬ìŠ¤íŠ¸ë¥¼ ìˆœíšŒí•˜ëŠ” ê³¼ì •ì—ì„œ ë¬¸ì œê°€ ë°œìƒí•˜ëŠ”ê²ƒ ì´ì—ˆë‹¤.\n\nGsonì€ ë¨¼ì € ì‚¬ìš©ì ì •ì˜ ë˜ëŠ” íŠ¹ìˆ˜í•œ `TypeAdapterFactory`ë¥¼ í™•ì¸í•˜ê³ , ì ì ˆí•œ `TypeAdapter`ë¥¼ ì°¾ì§€ ëª»í•˜ë©´ `ReflectiveTypeAdapterFactory`ë¥¼ ì‚¬ìš©í•˜ê²Œ ëœë‹¤.\n\n`ReflectiveTypeAdapterFactory`ëŠ” ê°ì²´ì˜ í•„ë“œë¥¼ íƒìƒ‰í•˜ê³ , `field.setAccessible(true)`ë¥¼ í˜¸ì¶œí•˜ì—¬ private í•„ë“œë¥¼ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •í•œë‹¤. í•˜ì§€ë§Œ Java 17 ì´ìƒì˜ ëª¨ë“ˆ ì‹œìŠ¤í…œì—ì„œëŠ” ëª¨ë“ˆí™”ëœ \nì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì´ëŸ¬í•œ í˜¸ì¶œì´ ê¸°ë³¸ì ìœ¼ë¡œ ì œí•œë˜ê¸° ë•Œë¬¸ì— `ReflectiveTypeAdapterFactory`ê°€ private í•„ë“œì— ì ‘ê·¼í•  ìˆ˜ ì—†ê²Œ ë˜ì–´, ê²°ê³¼ì ìœ¼ë¡œ ì§ë ¬í™” ë° ì—­ì§ë ¬í™” ê³¼ì •ì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.\n\n## í•´ê²°ë°©ë²•\n\nprivate í•„ë“œë¥¼ ê°€ì§„ í´ë˜ìŠ¤ íƒ€ì…ì— ëŒ€í•œ ì§ë ¬í™” ë° ì—­ì§ë ¬í™” ë¡œì§ì´ êµ¬í˜„ëœ ì»¤ìŠ¤í…€ TypeAdapterë¥¼ êµ¬í˜„í•œë©´ Gsonì´ TypeAdapterFactory ë¦¬ìŠ¤íŠ¸ë¥¼ ìˆœíšŒí•  ë•Œ, ì •ì˜í•œ ì»¤ìŠ¤í…€ TypeAdapterê°€ ReflectiveTypeAdapterFactory ë³´ë‹¤ ìš°ì„ ìˆœìœ„ë¥¼ ê°–ê¸° ë•Œë¬¸ì— ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.\n\n```java\npublic class LocalDateTimeAdapter extends TypeAdapter\u003cLocalDateTime\u003e {\n\n    private static final DateTimeFormatter formatter = DateTimeFormatter.ISO_LOCAL_DATE_TIME;\n\n    @Override\n    public void write(JsonWriter jsonWriter, LocalDateTime localDateTime) throws IOException {\n        jsonWriter.value(localDateTime.format(formatter));\n    }\n\n    @Override\n    public LocalDateTime read(JsonReader jsonReader) throws IOException {\n        return LocalDateTime.parse(jsonReader.nextString(), formatter);\n    }\n}\n```\n\n## ì°¸ê³  ìë£Œ\n- [Error reflection JDK 17 and gson](https://github.com/google/gson/issues/1979)\n- [Gson ê³µì‹ íŠ¸ëŸ¬ë¸” ìŠˆíŒ… ê°€ì´ë“œ ë¬¸ì„œ](https://github.com/google/gson/blob/main/Troubleshooting.md#reflection-inaccessible)\n","lang":"ko","allPostsInOtherLang":[{"id":"post9","lang":"en","title":"Solving the Billion-Dollar Mistake: Modern Java Null Safety with JSpecify and NullAway","date":"2025-09-24","section":"tech","tags":"Null Safety","thumbnail":"https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Ftotx4mdagz9nsegld5mr.png","description":"Learn how to eliminate NullPointerExceptions using JSpecify annotations and NullAway static analysis in modern Java applications","searchKeywords":"JSpecify, NullAway, Java null safety, NullPointerException prevention, static analysis","translationSlug":"post10","preview":"\nWhether you're a developer just starting with Java or a senior engineer with two decades of experience, the most frequently encountered err"},{"id":"post8","lang":"en","title":"PostgreSQL MVCC Internals: From xmin/xmax to Isolation Levels","date":"2025-07-06","section":"tech","tags":"PostgreSQL","thumbnail":"https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F7rk467sodudw3ww7iisi.png","description":"Deep dive into PostgreSQL's MVCC implementation, understanding xmin/xmax and how different isolation levels work internally","searchKeywords":"PostgreSQL, MVCC, xmin, xmax, transaction, isolation level, concurrency control","preview":"\nWhen multiple users access a database concurrently, how can we guarantee Isolation, one of the core `ACID` properties? While we could apply"},{"id":"post7","lang":"en","title":"Prompt Engineering Tips from Anthropic Engineers","date":"2025-06-24","section":"tech","tags":"Prompt Engineering, AI, Anthropic, LLM","thumbnail":"https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fdzzrfth8zqdnrhbj9538.png","description":"Valuable prompt engineering tips and insights from Anthropic engineers","searchKeywords":"prompt engineering, AI tips, Anthropic, LLM best practices","translationSlug":"post22","preview":"\nHere are a few impressive points from [youtube (AI prompt engineering: A deep dive)](https://www.youtube.com/watch?v=T9aRN5JkmL8\u0026t=2463s) w"},{"id":"post6","lang":"en","title":"From Theory to Practice: A JMH Showdown Between Sequential and Parallel Streams","date":"2025-06-15","section":"tech","tags":"Java, JMH","thumbnail":"https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F7ytq239pcfe279t9avzg.png","description":"Practical performance comparison between sequential and parallel streams using JMH benchmarking","searchKeywords":"JMH benchmark, Java performance, sequential vs parallel, stream optimization","preview":"\nIn our [previous post](https://dev.to/headf1rst/discover-how-forkjoinpool-powers-javas-high-performance-parallel-processing-3pn7), we delve"},{"id":"post5","lang":"en","title":"Discover how ForkJoinPool powers Java's high-performance parallel processing","date":"2025-06-03","section":"tech","tags":"ForkJoinPool","thumbnail":"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qgawc6pj2vbyzuem20wn.png","description":"Understanding ForkJoinPool and how it powers Java's parallel stream processing","searchKeywords":"ForkJoinPool, Java parallel processing, work-stealing, parallelStream","preview":"\nRecently, I optimized our transport operation plan Excel upload feature, boosting performance for logistics system administrators. This too"},{"id":"post4","lang":"en","title":"Why @Transactional Sometimes Fails: A Deep Dive into Spring AOP Proxies","section":"tech","date":"2025-06-01","tags":"AOP, Transactional","thumbnail":"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/a1wxef2amdixh3lr4any.png","description":"Understanding Spring AOP proxies and why @Transactional sometimes fails with internal method calls","searchKeywords":"Spring AOP, @Transactional, proxy pattern, self-invocation","preview":"\n## How @Transactional Works\n\n### Transaction Management via AOP and the Proxy Pattern\n\nAOP (Aspect-Oriented Programming) is a programming p"},{"id":"post3","lang":"en","title":"Java ClassLoaders: How the JVM Dynamically Loads \u0026 Executes Your Code","section":"tech","date":"2025-05-27","tags":"Java","thumbnail":"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/iu4pe4d29jz23wt26kwz.png","description":"Deep dive into Java ClassLoaders and JVM's dynamic class loading mechanisms","searchKeywords":"Java ClassLoader, JVM, dynamic loading, class loading process","preview":"\nJava's \"Write Once, Run Anywhere\" principle is foundational to its sustained popularity. This portability is powered by the Java Virtual Ma"},{"id":"post2","lang":"en","title":"Understanding and Resolving the N+1 Query Problem in JPA","section":"tech","date":"2025-05-05","tags":"JPA, Hibernate, N+1 Problem","thumbnail":"https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fsrf6chohgt3athvqj7u1.png","description":"Learn what causes the N+1 query problem in JPA, how to identify it, and practical solutions using fetch joins, EntityGraph, and QueryDSL","searchKeywords":"JPA, N+1, Hibernate, performance, optimization, fetch join, EntityGraph, QueryDSL","preview":"\nThe **N+1 query problem** arises when one initial query (1) is followed by N additional queriesâ€”one for each result row from the first quer"},{"id":"post1","lang":"en","title":"Kafka Producer Stability Check: Ensuring Message Safety in Apache Kafka","section":"tech","date":"2025-05-04","tags":"Kafka, Producer, Reliability, Apache Kafka","thumbnail":"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ojt2w7s7rr9kws35r2yg.png","description":"Learn how to build fault-tolerant Kafka producers that survive rolling patches and broker failures","searchKeywords":"Kafka, producer, reliability, message safety, rolling patch, broker failure","preview":"\nDuring a recent incident, our team observed message loss from a Kafka producer during an Amazon MSK rolling patch. What began as a routine "}]},"__N_SSG":true},"page":"/[lang]/[id]","query":{"lang":"ko","id":"post30"},"buildId":"zBWA72nlR7lg00Dg_D38I","assetPrefix":"/log","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>