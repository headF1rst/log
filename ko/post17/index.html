<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="apple-touch-icon" sizes="180x180" href="https://i.imgur.com/DP8b7FU.png"/><link rel="icon" type="image/png" sizes="32x32" href="https://i.imgur.com/DP8b7FU.png"/><link rel="icon" type="image/png" sizes="16x16" href="https://i.imgur.com/DP8b7FU.png"/><link rel="manifest" href="/log/site.webmanifest"/><link rel="mask-icon" href="/log/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#da532c"/><meta name="theme-color" content="#ffffff"/><title>GitHub Actionsë¥¼ í†µí•´ CI/CD êµ¬ì¶•í•˜ê¸° (feat. Docker, Jib)</title><meta name="title" content="GitHub Actionsë¥¼ í†µí•´ CI/CD êµ¬ì¶•í•˜ê¸° (feat. Docker, Jib)"/><meta name="description" content=""/><meta name="keywords" content=""/><meta name="robots" content="index, follow"/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="language" content="Korean"/><meta name="author" content="Sanha Ko"/><meta property="og:title" content="GitHub Actionsë¥¼ í†µí•´ CI/CD êµ¬ì¶•í•˜ê¸° (feat. Docker, Jib)"/><meta property="og:url" content="https://headf1rst.github.io/log/ko/post17"/><meta property="og:type" content="blog"/><meta property="og:image" content="https://miro.medium.com/max/1400/1*DmFbJvnRIiQIyi5xBuIXlQ.png"/><meta property="og:description"/><link rel="alternate" hrefLang="ko" href="https://headf1rst.github.io/log/ko/post17"/><link rel="alternate" hrefLang="x-default" href="https://headf1rst.github.io/log/ko/post17"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"TechArticle","headline":"GitHub Actionsë¥¼ í†µí•´ CI/CD êµ¬ì¶•í•˜ê¸° (feat. Docker, Jib)","datePublished":"2022-12-06 10:00","dateModified":"2022-12-06 10:00","author":{"@type":"Person","name":"Sanha Ko","url":"https://github.com/headF1rst"},"description":"","image":"https://miro.medium.com/max/1400/1*DmFbJvnRIiQIyi5xBuIXlQ.png","url":"https://headf1rst.github.io/log/ko/post17","keywords":"tech, í”„ë¡œì íŠ¸, CI/CD, Docker","inLanguage":"ko-KR","about":[{"@type":"Thing","name":"tech"},{"@type":"Thing","name":"í”„ë¡œì íŠ¸"},{"@type":"Thing","name":"CI/CD"},{"@type":"Thing","name":"Docker"}],"programmingLanguage":"Java, Kotlin, JavaScript, TypeScript","publisher":{"@type":"Organization","name":"JustAnotherBlog","logo":{"@type":"ImageObject","url":"https://i.imgur.com/JtjOEf3.png"}},"mainEntityOfPage":{"@type":"WebPage","@id":"https://headf1rst.github.io/log/ko/post17"}}</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://headf1rst.github.io/log/ko"},{"@type":"ListItem","position":2,"name":"GitHub Actionsë¥¼ í†µí•´ CI/CD êµ¬ì¶•í•˜ê¸° (feat. Docker, Jib)","item":"https://headf1rst.github.io/log/ko/post17"}]}</script><meta name="next-head-count" content="26"/><link rel="preload" href="/log/_next/static/css/34440283646fd35f.css" as="style"/><link rel="stylesheet" href="/log/_next/static/css/34440283646fd35f.css" data-n-g=""/><link rel="preload" href="/log/_next/static/css/38994dd0aed51f22.css" as="style"/><link rel="stylesheet" href="/log/_next/static/css/38994dd0aed51f22.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/log/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/log/_next/static/chunks/webpack-82b4c2acf5604dc5.js" defer=""></script><script src="/log/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/log/_next/static/chunks/main-6e6d6dc6617c8481.js" defer=""></script><script src="/log/_next/static/chunks/pages/_app-d82207f592413e1f.js" defer=""></script><script src="/log/_next/static/chunks/9f96d65d-fb5fd9e6ccafc67e.js" defer=""></script><script src="/log/_next/static/chunks/259-59cbd4b09a9629be.js" defer=""></script><script src="/log/_next/static/chunks/819-49378f41c4211145.js" defer=""></script><script src="/log/_next/static/chunks/pages/%5Blang%5D/%5Bid%5D-13e01826c893cc7d.js" defer=""></script><script src="/log/_next/static/GPgoZ2Q8StcGcqyhcZOyg/_buildManifest.js" defer=""></script><script src="/log/_next/static/GPgoZ2Q8StcGcqyhcZOyg/_ssgManifest.js" defer=""></script></head><body><div id="__next"><nav class="flex bg-white sticky top-0 left-0 z-50 justify-between items-center border-b-2 border-gray-100 py-3 md:justify-start md:space-x-10 px-10 sm:px-5 dark:bg-[#0d1117] dark:text-[#c9d1d9] dark:border-gray-600"><div class="flex justify-start"><a href="/log/ko/"><div class="flex items-center gap-2 cursor-pointer"><h1 class="text-lg ">JustAnotherBlog</h1></div></a></div><div class="flex justify-between gap-10 sm:hidden items-center"><a href="/log/ko/"><button class="font-light hover:text-indigo-300 text-base">Home</button></a><a href="/log/ko/?section=tech"><button class="font-light hover:text-indigo-300 text-base">Tech</button></a><a href="/log/ko/?section=domain"><button class="font-light hover:text-indigo-300 text-base">Domain</button></a><a href="https://www.linkedin.com/in/san0498/" target="_blank" rel="noreferrer" class="hover:text-indigo-300 text-base font-light flex gap-1">About<span class="flex justify-center" style="align-items:center"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z"></path><path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"></path></svg></span></a><div class="relative"><button class="flex items-center gap-1 hover:text-indigo-300 text-base font-light">ğŸ‡°ğŸ‡·<!-- --> <!-- -->í•œêµ­ì–´</button></div></div><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="lg:hidden" height="25" width="25" xmlns="http://www.w3.org/2000/svg"><path d="M32 96v64h448V96H32zm0 128v64h448v-64H32zm0 128v64h448v-64H32z"></path></svg></nav><main class="dark:bg-[#0d1117] h-screen pb-10"><div class="flex flex-col w-3/5 sm:w-5/6 m-auto pt-20 pb-20 gap-10 dark:bg-[#0d1117] dark:text-[#c9d1d9]"><ul id="scroll-spy" class="sm:hidden p-10 fixed top-50 right-0 h-full w-1/5 text-gray-500 dark:text-[#c9d1d9]"></ul><div class="text-5xl font-bold">GitHub Actionsë¥¼ í†µí•´ CI/CD êµ¬ì¶•í•˜ê¸° (feat. Docker, Jib)</div><div class="flex flex-col gap-2"><div class="text-base text-gray-600 dark:text-gray-300">2022-12-06 10:00</div><div class="flex flex-wrap gap-2 dark:text-black sm:m-0"><span class="p-1 pl-3 pr-3 rounded-md bg-indigo-100 hover:bg-indigo-200 cursor-pointer transition ease-in-out duration-200 text-sm">tech</span><span class="p-1 pl-3 pr-3 rounded-md bg-indigo-100 hover:bg-indigo-200 cursor-pointer transition ease-in-out duration-200 text-sm">í”„ë¡œì íŠ¸</span><span class="p-1 pl-3 pr-3 rounded-md bg-indigo-100 hover:bg-indigo-200 cursor-pointer transition ease-in-out duration-200 text-sm">CI/CD</span><span class="p-1 pl-3 pr-3 rounded-md bg-indigo-100 hover:bg-indigo-200 cursor-pointer transition ease-in-out duration-200 text-sm">Docker</span></div></div><div class="flex items-center gap-2"><span class="text-sm text-gray-400">ğŸ‡ºğŸ‡¸ ì˜ì–´ë¡œ ì½ê¸°</span></div><div class="markdown-body" style="font-size:17px"><p>ì €í¬ <code node="[object Object]">Text Me</code> ì„œë¹„ìŠ¤ì˜ ë² íƒ€ ë²„ì „ì´ ë°°í¬ë˜ê³  ë‚œ ë’¤ì—, ì‚¬ìš©ìë“¤ë¡œ ë¶€í„° ìˆ˜ë§ì€ í”¼ë“œë°±ì„ ë°›ì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
ì‚¬ìš©ì í”¼ë“œë°±ì„ ë¹ ë¥´ê²Œ ë°˜ì˜í•˜ë‹¤ ë³´ë‹ˆ í”„ë¡œì íŠ¸ì˜ ë¹Œë“œ ë° ë°°í¬ ì£¼ê¸°ê°€ ì§§ì•„ì¡Œê³  ì´ëŸ¬í•œ ê³¼ì •ì´ ì„œì„œíˆ ë²ˆê±°ë¡­ê²Œ ëŠê»´ì§€ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤.</p>
<p>ì‚¬ìš©ìì˜ í”¼ë“œë°±ì„ ë¹ ë¥´ê²Œ ë°˜ì˜í•˜ê¸° ìœ„í•´ì„œëŠ” í•˜ë£¨ì— ë§ê²ŒëŠ” 20ë²ˆì˜ ë°°í¬ê°€ ì´ë£¨ì–´ì ¸ì•¼í–ˆê¸° ë•Œë¬¸ì— í”„ë¡œì íŠ¸ì˜ ë¹Œë“œ ë° ë°°í¬ê³¼ì •ì„ ìë™í™” í•˜ê¸°ë¡œ í•˜ì˜€ìŠµë‹ˆë‹¤.
(í•˜ë£¨ì— 1,000ë²ˆ ì´ìƒì˜ í¬ê³  ì‘ì€ ë°°í¬ê°€ ì´ë¤„ì§€ëŠ” í…Œí¬ ê¸°ì—…ì— ë¹„í•˜ë©´ ê·€ì—¬ìš´ ìˆ˜ì¤€ì´ì§€ë§Œ ë§ì´ì£ â€¦ )</p>
<p>ì´ë²ˆ ê¸€ì—ì„œëŠ” ì €í¬ê°€ CI/CD ë„êµ¬ ì¤‘ GitHub Actionsë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ì™€ ë™ì‘ì›ë¦¬ì— ëŒ€í•´ì„œ ê³µìœ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<h2>1. GitHub Actionsì˜ ì¥ì </h2>
<p>GitHub Actoinsë¥¼ CI ì†”ë£¨ì…˜ìœ¼ë¡œ ì±„íƒí•˜ê²Œ ëœ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<ul>
<li>
<p>GitHubì™€ í†µì¼ëœ í™˜ê²½ì—ì„œ CI ìˆ˜í–‰ì´ ê°€ëŠ¥í•˜ë‹¤.</p>
</li>
<li>
<p>ì¤‘ì•™ì—ì„œ ê´€ë¦¬í•˜ëŠ” <code node="[object Object]">GitHub Actions Runner</code> ì— ì§€ì†ì ìœ¼ë¡œ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…í•˜ì—¬ ì›í™œí•œ CI í™˜ê²½ êµ¬ì„±ì´ ê°€ëŠ¥í•˜ë‹¤.</p>
</li>
<li>
<p>í”„ë¡œì íŠ¸ë§ˆë‹¤ ê°œë³„ Runnerë¥¼ í†µí•œ ë¹Œë“œ í…ŒìŠ¤íŠ¸ê°€ ê°€ëŠ¥í•˜ë‹¤.</p>
</li>
<li>
<p>ì¹œìˆ™í•œ ë¬¸ë²•ì˜ YAML íŒŒì¼ë¡œ íŒŒì´í”„ë¼ì¸ êµ¬ì„±ì´ ê°„ë‹¨í•˜ë‹¤.</p>
</li>
<li>
<p>GitHub Actions Runnerë€?</p>
<ul>
<li>GitHub Actionsë¥¼ ê¸°ë™í•˜ëŠ” Runner</li>
<li>GitHubëŠ” í¼ë¸”ë¦­ ìª½ì˜ GitHub Actions Runnerë¥¼ í´ë¼ìš°ë“œì—ì„œ ì œê³µí•´ ì£¼ê³  ìˆë‹¤.<!-- -->
<ul>
<li>ë•ë¶„ì— ì§ì ‘ í”„ë¡œë¹„ì €ë‹í•  í•„ìš” ì—†ì´ Runnerë¥¼ ë°”ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2>2. Github Actionì˜ êµ¬ì„± ìš”ì†Œ</h2>
<ul>
<li>workflow<!-- -->
<ul>
<li>í•œê°œ ì´ìƒì˜ <code node="[object Object]">job</code> ì„ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ìë™í™”ëœ ì‘ì—…</li>
<li><code node="[object Object]">YAML</code> íŒŒì¼ë¡œ ì‘ì„±ëœë‹¤.</li>
<li><code node="[object Object]">event</code> ì— ì˜í•´ì„œ ì‹¤í–‰ëœë‹¤.</li>
</ul>
</li>
<li>event<!-- -->
<ul>
<li><code node="[object Object]">workflow</code> ë¥¼ ì‹¤í–‰ì‹œí‚¤ëŠ” íŠ¹ì • í™œë™</li>
<li>ê¹ƒí—ˆë¸Œì—ì„œ ë°œìƒí•˜ëŠ” ëŒ€ë¶€ë¶„ì˜ ì‘ì—…ì„ eventë¡œ ì •ì˜ ê°€ëŠ¥.<!-- -->
<ul>
<li>ex) <code node="[object Object]">push event</code> , <code node="[object Object]">pull request event</code> , <code node="[object Object]">issue event</code></li>
</ul>
</li>
</ul>
</li>
<li>jobs<!-- -->
<ul>
<li>í•œê°€ì§€ <code node="[object Object]">runner</code> ì•ˆì—ì„œ ì‹¤í–‰ë˜ëŠ” ì—¬ëŸ¬ <code node="[object Object]">step</code> ë“¤ì˜ ëª¨ìŒ</li>
<li>ê° <code node="[object Object]">step</code> ë“¤ì€ ì¼ì¢…ì˜ <code node="[object Object]">shell script</code> ì²˜ëŸ¼ ì‹¤í–‰ëœë‹¤.</li>
<li>stepë“¤ì€ ìˆœì„œì— ë”°ë¼ ì‹¤í–‰ë˜ë©° stepë¼ë¦¬ ë°ì´í„° ê³µìœ ê°€ ê°€ëŠ¥í•˜ë‹¤</li>
<li>jobì€ ë‹¤ë¥¸ jobì— ì˜ì¡´ê´€ê³„ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìœ¼ë©° <code node="[object Object]">ë³‘ë ¬ ì‹¤í–‰</code> ì´ ê°€ëŠ¥í•˜ë‹¤.</li>
</ul>
</li>
<li>actions<!-- -->
<ul>
<li>ë°˜ë³µ ì‘ì—…ì„ ì •ì˜í•œ ì»¤ìŠ¤í…€ ì–´í”Œë¦¬ì¼€ì´ì…˜</li>
<li>workflow íŒŒì¼ì—ì„œ ìì£¼ ë°˜ë³µë˜ëŠ” ì½”ë“œë¥¼ ë¯¸ë¦¬ ì •ì˜í•  ìˆ˜ ìˆë‹¤.<!-- -->
<ul>
<li>ì½”ë“œ ì–‘ì„ ì¤„ì´ëŠ” ì´ì </li>
</ul>
</li>
<li>ê¹ƒí—ˆë¸Œ ë§ˆì¼“í”Œë ˆì´ìŠ¤ë¥¼ í†µí•´ ë‹¤ë¥¸ ì‚¬ëŒì´ ë§Œë“  action ì‚¬ìš© ê°€ëŠ¥</li>
</ul>
</li>
</ul>
<p>ë” ìì„¸í•œ GitHub Actions workflow syntaxëŠ” <a href="https://jinmay.github.io/2020/05/13/git/github-action-syntax/">í•´ë‹¹ í¬ìŠ¤íŠ¸</a>ë¥¼ ì°¸ê³ í•˜ë©´ ë„ì›€ì´ ë˜ì‹¤ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>
<p><img src="https://i.imgur.com/9tu0sgH.png" alt="Post image" node="[object Object]" style="max-height:450px;max-width:90%"/></p>
<h2>3. Github Actionìœ¼ë¡œ CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•í•˜ê¸°</h2>
<p>ë‹¤ìŒê³¼ ê°™ì€ ìˆœì„œë¡œ íŒŒì´í”„ë¼ì¸ì´ êµ¬ë™ë˜ë„ë¡ workflowë¥¼ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<ol>
<li>Github Actionì´ íŠ¸ë¦¬ê±°ë˜ë©´ jibë¡œ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•œë‹¤.</li>
<li>ë§Œë“¤ì–´ì§„ ì´ë¯¸ì§€ë¥¼ DockerHubì— pushí•œë‹¤.</li>
<li>ì„œë²„ì— ì ‘ì†í•´ì„œ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ pull í•œë‹¤.</li>
</ol>
<p><code node="[object Object]">.github/workflows</code> ë””ë ‰í† ë¦¬ë¥¼ í”„ë¡œì íŠ¸ì— ìƒì„±í•˜ê³ , ê±°ê¸°ì— gradle ë¹Œë“œë¥¼ ìœ„í•œ <code node="[object Object]">build_backend.yml</code> ì„ ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<h3>3.1 build_backend.yml</h3>
<p>ë‹¤ìŒ <code node="[object Object]">jobs</code> ê°€ ì‹¤ì œë¡œ CIë¥¼ ìˆ˜í–‰í•˜ëŠ” ê³¼ì •ì´ë©° <code node="[object Object]">steps</code> ë‹¨ê³„ë¡œ jobsê°€ ì§„í–‰ë˜ê²Œ ë©ë‹ˆë‹¤.</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;color:#383a42;background:#fafafa"><code class="language-yaml" style="white-space:pre"><span style="color:#986801">name:</span><span> </span><span style="color:#50a14f">Build</span><span> </span><span style="color:#50a14f">Backend</span><span> </span><span style="color:#50a14f">Image</span><span>
</span>
<span></span><span style="color:#986801">on:</span><span>
</span><span>  </span><span style="color:#986801">pull_request:</span><span>
</span><span>    </span><span style="color:#986801">branches:</span><span>
</span><span>      </span><span style="color:#4078f2">-</span><span> </span><span style="color:#50a14f">production</span><span>
</span><span>      </span><span style="color:#4078f2">-</span><span> </span><span style="color:#50a14f">master</span><span>
</span><span>    </span><span style="color:#986801">paths:</span><span>
</span><span>      </span><span style="color:#4078f2">-</span><span> </span><span style="color:#50a14f">&quot;backend/**&quot;</span><span>
</span><span>  </span><span style="color:#986801">workflow_dispatch:</span><span>
</span>
<span></span><span style="color:#986801">defaults:</span><span>
</span><span>  </span><span style="color:#986801">run:</span><span>
</span><span>    </span><span style="color:#986801">working-directory:</span><span> </span><span style="color:#50a14f">&quot;backend/text-me&quot;</span><span>
</span>
<span></span><span style="color:#986801">jobs:</span><span>
</span><span>  </span><span style="color:#986801">build:</span><span>
</span><span>    </span><span style="color:#986801">runs-on:</span><span> </span><span style="color:#50a14f">ubuntu-latest</span><span>
</span>
<span>    </span><span style="color:#986801">steps:</span><span>
</span><span>      </span><span style="color:#4078f2">-</span><span> </span><span style="color:#986801">name:</span><span> </span><span style="color:#50a14f">Checkout</span><span>
</span><span>        </span><span style="color:#986801">uses:</span><span> </span><span style="color:#50a14f">actions/checkout@v3</span><span>
</span>
<span>      </span><span style="color:#4078f2">-</span><span> </span><span style="color:#986801">name:</span><span> </span><span style="color:#50a14f">Set</span><span> </span><span style="color:#50a14f">up</span><span> </span><span style="color:#50a14f">JDK</span><span> </span><span style="color:#986801">11</span><span>
</span><span>        </span><span style="color:#986801">uses:</span><span> </span><span style="color:#50a14f">actions/setup-java@v1</span><span>
</span><span>        </span><span style="color:#986801">with:</span><span>
</span><span>          </span><span style="color:#986801">java-version:</span><span> </span><span style="color:#50a14f">&#x27;11&#x27;</span><span>
</span><span>          </span><span style="color:#986801">distribution:</span><span> </span><span style="color:#50a14f">&#x27;temurin&#x27;</span><span>
</span>
<span>      </span><span style="color:#4078f2">-</span><span> </span><span style="color:#986801">name:</span><span> </span><span style="color:#50a14f">Set</span><span> </span><span style="color:#50a14f">environment</span><span> </span><span style="color:#50a14f">variables</span><span>
</span><span>          </span><span style="color:#50a14f">run:|</span><span>
</span><span>            </span><span style="color:#50a14f">echo</span><span> </span><span style="color:#50a14f">&quot;::set-env name=DB_URL::$</span><span style="color:#986801">{{ secrets.DB_URL }}</span><span style="color:#50a14f">&quot;</span><span>
</span><span>            </span><span style="color:#50a14f">echo</span><span> </span><span style="color:#50a14f">&quot;::set-env name=DB_USERNAME::$</span><span style="color:#986801">{{ secrets.DB_USERNAME }}</span><span style="color:#50a14f">&quot;</span><span>
</span><span>            </span><span style="color:#50a14f">echo</span><span> </span><span style="color:#50a14f">&quot;::set-env name=DB_PASSWORD::$</span><span style="color:#986801">{{ secrets.DB_PASSWORD }}</span><span style="color:#50a14f">&quot;</span><span>
</span><span>            </span><span style="color:#50a14f">echo</span><span> </span><span style="color:#50a14f">&quot;::set-env name=JWT_KEY::$</span><span style="color:#986801">{{ secrets.JWT_KEY }}</span><span style="color:#50a14f">&quot;</span><span>
</span><span>            </span><span style="color:#50a14f">echo</span><span> </span><span style="color:#50a14f">&quot;::set-env name=JWT_EXPIRY::$</span><span style="color:#986801">{{ secrets.JWT_EXPIRY }}</span><span style="color:#50a14f">&quot;</span><span>
</span><span>            </span><span style="color:#50a14f">echo</span><span> </span><span style="color:#50a14f">&quot;::set-env name=REFRESH_EXPIRY::$</span><span style="color:#986801">{{ secrets.REFRESH_EXPIRY }}</span><span style="color:#50a14f">&quot;</span><span>
</span><span>            </span><span style="color:#50a14f">echo</span><span> </span><span style="color:#50a14f">&quot;::set-env name=AWS_ACCESS_KEY_ID::$</span><span style="color:#986801">{{ secrets.AWS_ACCESS_KEY_ID }}</span><span style="color:#50a14f">&quot;</span><span>
</span><span>            </span><span style="color:#50a14f">echo</span><span> </span><span style="color:#50a14f">&quot;::set-env name=AWS_SECRET_ACCESS_KEY::$</span><span style="color:#986801">{{ secrets.AWS_SECRET_ACCESS_KEY }}</span><span style="color:#50a14f">&quot;</span><span>
</span>
<span>      </span><span style="color:#4078f2">-</span><span> </span><span style="color:#986801">name:</span><span> </span><span style="color:#50a14f">Login</span><span> </span><span style="color:#50a14f">to</span><span> </span><span style="color:#50a14f">Docker</span><span> </span><span style="color:#50a14f">Hub</span><span>
</span><span>        </span><span style="color:#986801">uses:</span><span> </span><span style="color:#50a14f">docker/login-action@v2.1.0</span><span>
</span><span>        </span><span style="color:#986801">with:</span><span>
</span><span>          </span><span style="color:#986801">username:</span><span> </span><span style="color:#50a14f">${{</span><span> </span><span style="color:#50a14f">secrets.DOCKERHUB_USERNAME</span><span> </span><span style="color:#50a14f">}}</span><span>
</span><span>          </span><span style="color:#986801">password:</span><span> </span><span style="color:#50a14f">${{</span><span> </span><span style="color:#50a14f">secrets.DOCKERHUB_PASSWORD</span><span> </span><span style="color:#50a14f">}}</span><span>
</span>
<span>      </span><span style="color:#4078f2">-</span><span> </span><span style="color:#986801">name:</span><span> </span><span style="color:#50a14f">Grant</span><span> </span><span style="color:#50a14f">execute</span><span> </span><span style="color:#50a14f">permission</span><span> </span><span style="color:#50a14f">for</span><span> </span><span style="color:#50a14f">gradlew</span><span>
</span><span>        </span><span style="color:#986801">run:</span><span> </span><span style="color:#50a14f">chmod</span><span> </span><span style="color:#50a14f">+x</span><span> </span><span style="color:#50a14f">gradlew</span><span>
</span><span>        </span><span style="color:#986801">shell:</span><span> </span><span style="color:#50a14f">bash</span><span>
</span>
<span>      </span><span style="color:#4078f2">-</span><span> </span><span style="color:#986801">name:</span><span> </span><span style="color:#50a14f">Build</span><span> </span><span style="color:#50a14f">with</span><span> </span><span style="color:#50a14f">jib</span><span>
</span><span>        </span><span style="color:#986801">run:</span><span> </span><span style="color:#50a14f">|
</span><span style="color:#50a14f">          ./gradlew jib \
</span><span style="color:#50a14f">          -Djib.to.auth.username=${{ secrets.DOCKERHUB_USERNAME }} \
</span><span style="color:#50a14f">          -Djib.to.auth.password=${{ secrets.DOCKERHUB_PASSWORD }} \
</span><span style="color:#50a14f">          -Djib.to.image=&quot;${{ secrets.DOCKERHUB_USERNAME }}/text-me-docker-repo:${GITHUB_REF##*/}&quot;
</span><span style="color:#50a14f"></span><span>
</span><span>      </span><span style="color:#4078f2">-</span><span> </span><span style="color:#986801">name:</span><span> </span><span style="color:#50a14f">Get</span><span> </span><span style="color:#50a14f">current</span><span> </span><span style="color:#50a14f">time</span><span>
</span><span>        </span><span style="color:#986801">uses:</span><span> </span><span style="color:#986801">1466587594</span><span style="color:#50a14f">/get-current-time@v2</span><span>
</span><span>        </span><span style="color:#986801">id:</span><span> </span><span style="color:#50a14f">current-time</span><span>
</span><span>        </span><span style="color:#986801">with:</span><span>
</span><span>          </span><span style="color:#986801">format:</span><span> </span><span style="color:#50a14f">YYYY-MM-DDTHH-mm-ss</span><span>
</span><span>          </span><span style="color:#986801">utcOffset:</span><span> </span><span style="color:#50a14f">&quot;+09:00&quot;</span><span>
</span>
<span>      </span><span style="color:#4078f2">-</span><span> </span><span style="color:#986801">name:</span><span> </span><span style="color:#50a14f">Show</span><span> </span><span style="color:#50a14f">Current</span><span> </span><span style="color:#50a14f">Time</span><span>
</span><span>        </span><span style="color:#986801">run:</span><span> </span><span style="color:#50a14f">echo</span><span> </span><span style="color:#50a14f">&quot;CurrentTime=$</span><span style="color:#986801">{{steps.current-time.outputs.formattedTime}}</span><span style="color:#50a14f">&quot;</span><span>
</span><span>        </span><span style="color:#986801">shell:</span><span> </span><span style="color:#50a14f">bash</span></code></div></pre>
<p>ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ì— ì‘ì„±ëœ ë‚´ìš©ì„ ì¢€ ë” ìì„¸íˆ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<ul>
<li>
<p><code node="[object Object]">jobs: build: runs-on: ubuntu-latest</code></p>
<ul>
<li>ì‘ì„±í•œ ìŠ¤í¬ë¦½íŠ¸ê°€ ì‘ë™ë  OS í™˜ê²½ì„ ì§€ì •í•©ë‹ˆë‹¤.</li>
<li>text me ì„œë¹„ìŠ¤ëŠ” ìš°ë¶„íˆ¬ 18.04ì—ì„œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— <code node="[object Object]">ubuntu-latest</code> ë¡œ ì§€ì •í•´ ì£¼ì—ˆìŠµë‹ˆë‹¤.
<img src="https://i.imgur.com/mRZU1aq.png" alt="Post image" node="[object Object]" style="max-height:450px;max-width:90%"/></li>
</ul>
</li>
<li>
<p><code node="[object Object]">steps: uses</code></p>
<ul>
<li>ë§ˆì¼“ í”Œë ˆì´ìŠ¤ì— ì‚¬ì „ ì •ì˜ëœ ë‚´ìš©ì„ ì´ìš©í•˜ì—¬ stepì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.</li>
<li>ì‚¬ì „ ì‘ì—…ì„ ìœ„í•œ í™˜ê²½ ì„¤ì •ìš©.
<img src="https://i.imgur.com/xZ8nmau.png" alt="Post image" node="[object Object]" style="max-height:450px;max-width:90%"/></li>
</ul>
</li>
<li>
<p><code node="[object Object]">steps: run</code></p>
<ul>
<li>ê°œë°œìê°€ ì§ì ‘ ì •ì˜í•œ ì»¤ë§¨ë“œë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.</li>
<li>ì‹¤ì œ ìˆ˜í–‰ìš©.</li>
</ul>
</li>
<li>
<p><code node="[object Object]">-Djib.to.image=&quot;${{ secrets.DOCKERHUB_USERNAME }}/text-me-docker-repo:${GITHUB_REF##*/}&quot;</code></p>
<ul>
<li>Jibë¥¼ í†µí•´ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•´ì„œ ë„ì»¤ í—ˆë¸Œì— push í•©ë‹ˆë‹¤.</li>
</ul>
</li>
</ul>
<p><strong>ë„ì»¤ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì™€ JIB</strong></p>
<p>ìŠ¤í”„ë§ í”„ë¡œì íŠ¸ë¥¼ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¡œ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ë‹¤ì–‘í•œ ë°©ë²•ë“¤ì´ ì¡´ì¬í•©ë‹ˆë‹¤.</p>
<ul>
<li><strong>ë¡œì»¬ í™˜ê²½ì—ì„œ jar íŒŒì¼ ë¹Œë“œ , jar íŒŒì¼ì„ ì´ë¯¸ì§€ì— ë³µì‚¬ í›„ ì‹¤í–‰</strong>
<ul>
<li>
<p>í”„ë¡œì íŠ¸ í´ë”ë¡œ ë“¤ì–´ê°€ì„œ gradlew clean buildë¥¼ í†µí•´ grdlewë¡œ jar íŒŒì¼ ë¹Œë“œ</p>
<ul>
<li><code node="[object Object]">./gradlew clean build</code></li>
</ul>
</li>
<li>
<p>í”„ë¡œì íŠ¸ í…ŒìŠ¤íŠ¸ ì½”ë“œë“¤ì´ ì‹¤í–‰ë˜ê³  ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ í†µê³¼í•˜ë©´ <code node="[object Object]">./build/libs</code> ì— ì‹¤í–‰ ê°€ëŠ¥í•œ jar íŒŒì¼ì´ ìƒì„±ëœë‹¤.</p>
</li>
<li>
<p>jar íŒŒì¼ì„ ë°”íƒ•ìœ¼ë¡œ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ Dockerfileì„ ì‘ì„±</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;color:#383a42;background:#fafafa"><code class="language-yaml" style="white-space:pre"><span style="color:#50a14f">FROM</span><span> </span><span style="color:#50a14f">openjdk:11</span><span>
</span><span></span><span style="color:#50a14f">ARG</span><span> </span><span style="color:#50a14f">JAR_FILE=./build/libs/jpashop-0.0.1-SNAPSHOT.jar</span><span>
</span><span></span><span style="color:#50a14f">COPY</span><span> </span><span style="color:#50a14f">${JAR_FILE}</span><span> </span><span style="color:#50a14f">app.jar</span><span>
</span><span></span><span style="color:#50a14f">ENTRYPOINT</span><span> [</span><span style="color:#50a14f">&quot;java&quot;</span><span>,</span><span style="color:#50a14f">&quot;-Djava.security.egd=file:/dev/./urandom&quot;</span><span>,</span><span style="color:#50a14f">&quot;-jar&quot;</span><span>,</span><span style="color:#50a14f">&quot;/app.jar&quot;</span><span>]</span></code></div></pre>
</li>
<li>
<p>í•´ë‹¹ Dockerfileì„ í”„ë¡œì íŠ¸ í´ë”ì— ë„£ì€ í›„ docker build . -t íƒœê·¸ ì´ë¦„ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ ìƒì„±</p>
</li>
<li>
<p>java11ì˜ ì‹¤í–‰í™˜ê²½ì„ ì œê³µí•˜ëŠ” openjdk:11 ì´ë¯¸ì§€ ìœ„ì—ì„œ í´ë”ì— ìˆëŠ” jar íŒŒì¼ì„ ì´ë¯¸ì§€ ë‚´ë¶€ë¡œ ë³µì‚¬ í›„ java ëª…ë ¹ì–´ë¥¼ í†µí•´ ì‹¤í–‰</p>
</li>
</ul>
</li>
</ul>
<p><img src="https://cloud.google.com/java/images/docker_build_flow.png" alt="Post image" node="[object Object]" style="max-height:450px;max-width:90%"/></p>
<p>í•˜ì§€ë§Œ jar íŒŒì¼ì„ ë¹Œë“œí•˜ê³  ì¶”ê°€ë¡œ ì´ë¯¸ì§€ì— ë³µì‚¬í•˜ì—¬ ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì€ ì†ŒìŠ¤ì½”ë“œì— ì¡°ê¸ˆì˜ ë³€í™”ë§Œ ìƒê¸°ë”ë¼ë„ ë³€ê²½ëœ ë¶€ë¶„ê³¼ ì˜ì¡´ì„±ì´ ì—°ê²°ëœ jar íŒŒì¼ ì „ì²´ê°€ ìƒˆë¡œìš´ ì´ë¯¸ì§€ë¡œ ì¸ì‹ë˜ì–´ ì „ì²´ íŒŒì¼ì´ ë‹¤ì‹œ ë¹Œë“œë˜ê¸° ë•Œë¬¸ì— Docker layerì˜ ì¥ì ì„ ì‚´ë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
<p>ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ layerë¥¼ ë‚˜ëˆ„ëŠ” ë°©ë²•ë„ ìˆì§€ë§Œ Google Cloudì—ì„œ ì œê³µí•´ì£¼ëŠ” jibë¥¼ í†µí•´ì„œ ì´ë¯¸ì§€ ë¹Œë“œë¥¼ ìµœì í™”í•˜ëŠ” ë°©ë²•ì„ ì„ íƒí•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<ul>
<li><strong>JIBë¥¼ í†µí•œ ì´ë¯¸ì§€ ë¹Œë“œ</strong>
<ul>
<li>JibëŠ” <strong>Dockerfile, Dockerì— ì˜ì¡´í•˜ì§€ ì•Šê³ </strong> gradle, mavenì—ì„œ Jib í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•´ì„œ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ê³  í—ˆë¸Œì— í‘¸ì‹œí•˜ëŠ” ë°©ë²•.</li>
<li>ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ <strong>(ì¢…ì† í•­ëª©, ë¦¬ì†ŒìŠ¤, í´ë˜ìŠ¤ ë“±)</strong> ë³„ê°œì˜ ë ˆì´ì–´ë¡œ êµ¬ì„±í•˜ê³  Docker ì´ë¯¸ì§€ ë ˆì´ì–´ ìºì‹±ì„ í™œìš©í•´ì„œ <strong>ë³€ê²½ì‚¬í•­ë§Œ ë‹¤ì‹œ ë¹Œë“œ</strong>í•¨ìœ¼ë¡œì¨ ë¹Œë“œë¥¼ ë¹ ë¥´ê²Œ ìœ ì§€</li>
<li>jib ë ˆì´ì–´ êµ¬ì„±ê³¼ ì‘ì€ ê¸°ë³¸ ì´ë¯¸ì§€ëŠ” ì „ì²´ ì´ë¯¸ì§€ í¬ê¸°ë¥¼ ì‘ê²Œ ìœ ì§€ì‹œí‚¤ë©° ë¹Œë“œ ì†ë„ë¥¼ í–¥ìƒ ì‹œí‚´</li>
</ul>
</li>
</ul>
<p><img src="https://cloud.google.com/java/images/jib_build_flow.png" alt="Post image" node="[object Object]" style="max-height:450px;max-width:90%"/></p>
<p><strong>Gradleì— jib í”ŒëŸ¬ê·¸ì¸ ì¶”ê°€ ë° í™˜ê²½ ë³€ìˆ˜ ë“±ë¡</strong></p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;color:#383a42;background:#fafafa"><code class="language-bash" style="white-space:pre"><span>plugins {
</span><span>    id </span><span style="color:#50a14f">&#x27;com.google.cloud.tools.jib&#x27;</span><span> version </span><span style="color:#50a14f">&#x27;3.3.1&#x27;</span><span>
</span>}
<!-- -->
<!-- -->jib {
<!-- -->	to {
<span>		image = </span><span style="color:#50a14f">&quot;sanha1998/text-me-docker-repo&quot;</span><span>
</span>	}
<!-- -->	from {
<span>		image = </span><span style="color:#50a14f">&quot;eclipse-temurin:11-jre&quot;</span><span>
</span>	}
<!-- -->	container {
<span>		jvmFlags = [</span><span style="color:#50a14f">&quot;-Xms128m&quot;</span><span>, </span><span style="color:#50a14f">&quot;-Xmx128m&quot;</span><span>]
</span>		environment = [
<span>				</span><span style="color:#50a14f">&#x27;DB_URL&#x27;</span><span>: System.getenv(</span><span style="color:#50a14f">&#x27;DB_URL&#x27;</span><span>),
</span><span>				</span><span style="color:#50a14f">&#x27;DB_USERNAME&#x27;</span><span>: System.getenv(</span><span style="color:#50a14f">&#x27;DB_USERNAME&#x27;</span><span>),
</span><span>				</span><span style="color:#50a14f">&#x27;DB_PASSWORD&#x27;</span><span>: System.getenv(</span><span style="color:#50a14f">&#x27;DB_PASSWORD&#x27;</span><span>),
</span><span>				</span><span style="color:#50a14f">&#x27;JWT_KEY&#x27;</span><span>: System.getenv(</span><span style="color:#50a14f">&#x27;JWT_KEY&#x27;</span><span>),
</span><span>				</span><span style="color:#50a14f">&#x27;JWT_EXPIRY&#x27;</span><span>: System.getenv(</span><span style="color:#50a14f">&#x27;JWT_EXPIRY&#x27;</span><span>),
</span><span>				</span><span style="color:#50a14f">&#x27;REFRESH_EXPIRY&#x27;</span><span>: System.getenv(</span><span style="color:#50a14f">&#x27;REFRESH_EXPIRY&#x27;</span><span>),
</span><span>				</span><span style="color:#50a14f">&#x27;AWS_ACCESS_KEY_ID&#x27;</span><span>: System.getenv(</span><span style="color:#50a14f">&#x27;AWS_ACCESS_KEY_ID&#x27;</span><span>),
</span><span>				</span><span style="color:#50a14f">&#x27;AWS_SECRET_ACCESS_KEY&#x27;</span><span>: System.getenv(</span><span style="color:#50a14f">&#x27;AWS_SECRET_ACCESS_KEY&#x27;</span><span>)
</span>		]
<!-- -->	}
<!-- -->}</code></div></pre>
<p><strong>í™˜ê²½ ë³€ìˆ˜ ì£¼ì…</strong></p>
<p>ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ì˜ ë¹Œë“œê°€ ì‹œì‘ë˜ë©´<code node="[object Object]">application.yml</code> í˜¹ì€ <code node="[object Object]">application.properties</code>
ë‚´ì— ì„¤ì •ëœ í™˜ê²½ë³€ìˆ˜ ê°’ë“¤ì´ ì£¼ì…ë©ë‹ˆë‹¤. ì´ë•Œ AWS ê³„ì • ì •ë³´ì™€ ê°™ì€ ë¯¼ê° ì •ë³´ë¥¼ application.ymlì— ë…¸ì¶œì‹œí‚¤ì§€ ì•Šê¸° ìœ„í•´ì„œ Secrete í™˜ê²½ ë³€ìˆ˜ë¥¼ ê¹ƒí—ˆë¸Œì— ë“±ë¡í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.</p>
<p><img src="https://i.imgur.com/VPtkmpm.png" alt="Post image" node="[object Object]" style="max-height:450px;max-width:90%"/></p>
<p>ê¹ƒí—ˆë¸Œì— ë“±ë¡í•œ secrets í™˜ê²½ ë³€ìˆ˜ë“¤ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;color:#383a42;background:#fafafa"><code class="language-yaml" style="white-space:pre"><span style="color:#4078f2">-</span><span> </span><span style="color:#986801">name:</span><span> </span><span style="color:#50a14f">Set</span><span> </span><span style="color:#50a14f">environment</span><span> </span><span style="color:#50a14f">variables</span><span>
</span><span>  </span><span style="color:#50a14f">run:|</span><span>
</span><span>    </span><span style="color:#50a14f">echo</span><span> </span><span style="color:#50a14f">&quot;::set-env name=DB_URL::$</span><span style="color:#986801">{{ secrets.DB_URL }}</span><span style="color:#50a14f">&quot;</span><span>
</span><span>    </span><span style="color:#50a14f">echo</span><span> </span><span style="color:#50a14f">&quot;::set-env name=DB_USERNAME::$</span><span style="color:#986801">{{ secrets.DB_USERNAME }}</span><span style="color:#50a14f">&quot;</span><span>
</span><span>    </span><span style="color:#50a14f">echo</span><span> </span><span style="color:#50a14f">&quot;::set-env name=DB_PASSWORD::$</span><span style="color:#986801">{{ secrets.DB_PASSWORD }}</span><span style="color:#50a14f">&quot;</span><span>
</span><span>    </span><span style="color:#50a14f">echo</span><span> </span><span style="color:#50a14f">&quot;::set-env name=JWT_KEY::$</span><span style="color:#986801">{{ secrets.JWT_KEY }}</span><span style="color:#50a14f">&quot;</span><span>
</span><span>    </span><span style="color:#50a14f">echo</span><span> </span><span style="color:#50a14f">&quot;::set-env name=JWT_EXPIRY::$</span><span style="color:#986801">{{ secrets.JWT_EXPIRY }}</span><span style="color:#50a14f">&quot;</span><span>
</span><span>    </span><span style="color:#50a14f">echo</span><span> </span><span style="color:#50a14f">&quot;::set-env name=REFRESH_EXPIRY::$</span><span style="color:#986801">{{ secrets.REFRESH_EXPIRY }}</span><span style="color:#50a14f">&quot;</span><span>
</span><span>    </span><span style="color:#50a14f">echo</span><span> </span><span style="color:#50a14f">&quot;::set-env name=AWS_ACCESS_KEY_ID::$</span><span style="color:#986801">{{ secrets.AWS_ACCESS_KEY_ID }}</span><span style="color:#50a14f">&quot;</span><span>
</span><span>    </span><span style="color:#50a14f">echo</span><span> </span><span style="color:#50a14f">&quot;::set-env name=AWS_SECRET_ACCESS_KEY::$</span><span style="color:#986801">{{ secrets.AWS_SECRET_ACCESS_KEY }}</span><span style="color:#50a14f">&quot;</span></code></div></pre>
<h3>3.2 deploy-backend</h3>
<p>ì´ì œ ìš´ì˜ ì„œë²„ì—ì„œ ë„ì»¤ í—ˆë¸Œì— ì˜¬ë¦° ì´ë¯¸ì§€ë¥¼ pullí•œ ë‹¤ìŒ, ì‹¤í–‰ì‹œì¼œ ì£¼ë©´ ë©ë‹ˆë‹¤.</p>
<p>docker ê´€ë ¨ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ <a href="https://headf1rst.github.io/TIL/infra-1">ìš´ì˜ ì„œë²„ì— dockerë¥¼ ì„¤ì¹˜</a>í•´ ì£¼ì—ˆìŠµë‹ˆë‹¤.</p>
<p>dockerê°€ ìš´ì˜ ì„œë²„ì— ì •ìƒì ìœ¼ë¡œ ì„¤ì¹˜ë˜ì—ˆë‹¤ë©´, ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì™€ì„œ ì‹¤í–‰ì‹œí‚¤ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ì—¬ ë°°í¬ë¥¼ ìë™í™” ì‹œì¼œ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;color:#383a42;background:#fafafa"><code class="language-yaml" style="white-space:pre"><span style="color:#986801">name:</span><span> </span><span style="color:#50a14f">Deploy</span><span> </span><span style="color:#50a14f">Backend</span><span>
</span>
<span></span><span style="color:#986801">on:</span><span>
</span><span>  </span><span style="color:#986801">push:</span><span>
</span><span>    </span><span style="color:#986801">branches:</span><span>
</span><span>      </span><span style="color:#4078f2">-</span><span> </span><span style="color:#50a14f">production</span><span>
</span><span>  </span><span style="color:#986801">workflow_dispatch:</span><span>
</span>
<span></span><span style="color:#986801">defaults:</span><span>
</span><span>  </span><span style="color:#986801">run:</span><span>
</span><span>    </span><span style="color:#986801">working-directory:</span><span> </span><span style="color:#50a14f">&quot;backend/text-me&quot;</span><span>
</span>
<span></span><span style="color:#986801">jobs:</span><span>
</span><span>  </span><span style="color:#986801">build:</span><span>
</span><span>    </span><span style="color:#986801">runs-on:</span><span> </span><span style="color:#50a14f">ubuntu-latest</span><span>
</span>
<span>    </span><span style="color:#986801">steps:</span><span>
</span><span>      </span><span style="color:#4078f2">-</span><span> </span><span style="color:#986801">name:</span><span> </span><span style="color:#50a14f">Checkout</span><span>
</span><span>        </span><span style="color:#986801">uses:</span><span> </span><span style="color:#50a14f">actions/checkout@v2</span><span>
</span>
<span>      </span><span style="color:#4078f2">-</span><span> </span><span style="color:#986801">name:</span><span> </span><span style="color:#50a14f">Set</span><span> </span><span style="color:#50a14f">up</span><span> </span><span style="color:#50a14f">JDK</span><span> </span><span style="color:#986801">11</span><span>
</span><span>        </span><span style="color:#986801">uses:</span><span> </span><span style="color:#50a14f">actions/setup-java@v1</span><span>
</span><span>        </span><span style="color:#986801">with:</span><span>
</span><span>          </span><span style="color:#986801">java-version:</span><span> </span><span style="color:#50a14f">&#x27;11&#x27;</span><span>
</span><span>          </span><span style="color:#986801">distribution:</span><span> </span><span style="color:#50a14f">&#x27;temurin&#x27;</span><span>
</span>
<span>      </span><span style="color:#4078f2">-</span><span> </span><span style="color:#986801">name:</span><span> </span><span style="color:#50a14f">SSH</span><span> </span><span style="color:#50a14f">setting</span><span>
</span><span>        </span><span style="color:#986801">uses:</span><span> </span><span style="color:#50a14f">appleboy/ssh-action@master</span><span>
</span><span>        </span><span style="color:#986801">with:</span><span>
</span><span>          </span><span style="color:#986801">host:</span><span> </span><span style="color:#50a14f">${{</span><span> </span><span style="color:#50a14f">secrets.HOST</span><span> </span><span style="color:#50a14f">}}</span><span>
</span><span>          </span><span style="color:#986801">username:</span><span> </span><span style="color:#50a14f">${{</span><span> </span><span style="color:#50a14f">secrets.USER_NAME</span><span> </span><span style="color:#50a14f">}}</span><span>
</span><span>          </span><span style="color:#986801">key:</span><span> </span><span style="color:#50a14f">${{</span><span> </span><span style="color:#50a14f">secrets.PRIVATE_KEY</span><span> </span><span style="color:#50a14f">}}</span><span>
</span><span>          </span><span style="color:#986801">envs:</span><span> </span><span style="color:#50a14f">GITHUB_SHA</span><span>
</span><span>          </span><span style="color:#986801">script:</span><span> </span><span style="color:#50a14f">|
</span><span style="color:#50a14f">            whoami
</span><span style="color:#50a14f">            docker pull ${{ secrets.DOCKERHUB_USERNAME }}/text-me-docker-repo:${GITHUB_REF##*/}
</span><span style="color:#50a14f">            docker tag ${{ secrets.DOCKERHUB_USERNAME }}/text-me-docker-repo:${GITHUB_REF##*/} ${{ secrets.DOCKERHUB_USERNAME }}/text-me-docker-repo:${GITHUB_REF##*/}
</span><span style="color:#50a14f">            docker stop text-me-api
</span><span style="color:#50a14f">            docker run -d --rm --name text-me-api -p 8080:8080 ${{ secrets.DOCKERHUB_USERNAME }}/text-me-docker-repo:${GITHUB_REF##*/}</span></code></div></pre>
<p>ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ëˆˆì—¬ê²¨ ë³¼ ë¶€ë¶„ì€ ì›ê²© ì„œë²„ì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ SSH setting ë¶€ë¶„ì…ë‹ˆë‹¤. (<a href="https://github.com/appleboy/ssh-action">ssh-action</a>)</p>
<p>ë¡œì»¬ ì„œë²„ë¥¼ ì—´ê³  í„°ë¯¸ë„ì— ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì—¬ ssh í‚¤ë¥¼ ìƒì„±í•´ ì£¼ì—ˆìŠµë‹ˆë‹¤.</p>
<ul>
<li><code node="[object Object]">ssh-keygen -t rsa -b 4096 -C &quot;ë‚´ì´ë©”ì¼@gmail.com&quot;</code></li>
</ul>
<p><img src="https://i.imgur.com/s7q725G.png" alt="Post image" node="[object Object]" style="max-height:450px;max-width:90%"/></p>
<p>ssh í‚¤ë¥¼ <code node="[object Object]">./authorized_keys2</code> ê²½ë¡œì— ì €ì¥í•˜ê³  ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ í†µí•´ì„œ ssh í‚¤ê°’ì„ í™•ì¸í•´ ì¤ë‹ˆë‹¤.</p>
<ul>
<li><code node="[object Object]">vim ./ssh/authorized_keys2.pub</code></li>
</ul>
<p>ssh í‚¤ë¥¼ GITHUB SECRETì˜ PRIVATE_KEYë¡œ ë“±ë¡í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.</p>
<p><img src="https://i.imgur.com/wJ7mdpG.png" alt="Post image" node="[object Object]" style="max-height:450px;max-width:90%"/></p>
<p>ëª¨ë“  ê³¼ì •ì´ ë§ˆë¬´ë¦¬ë˜ì—ˆë‹¤ë©´ ì§ì ‘ docker hubì— ì ‘ì†í•´ì„œ ì´ë¯¸ì§€ë¥¼ pull ë°›ì•„ì˜¬ í•„ìš” ì—†ì´ ìë™ìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì™€ì„œ ìš´ì˜ ì„œë²„ì— ë„ì›Œì£¼ê²Œë©ë‹ˆë‹¤.</p>
<h2>ë§ˆì¹˜ë©°</h2>
<p>ì§€ê¸ˆê¹Œì§€ ê¸°í”„í„°ì¦ˆíŒ€ì´ GitHub Actionsë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ì™€ ë™ì‘ì›ë¦¬ì— ëŒ€í•´ ì„¤ëª…ë“œë ¸ìŠµë‹ˆë‹¤.</p>
<p>ì‹œê°„ì´ ëœë‹¤ë©´ í”„ë¡ íŠ¸ ë¹Œë“œ ë° ë°°í¬ ê³¼ì •ë„ í¬ìŠ¤íŒ… í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤.</p>
<hr/>
<p><strong>ì°¸ê³  ìë£Œ</strong> ğŸ“š</p>
<ul>
<li>
<p><a href="https://velog.io/@sgwon1996/GitHub-Action%EC%9C%BC%EB%A1%9C-CICD-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0">GitHub Actionìœ¼ë¡œ CI/CD êµ¬ì¶•í•˜ê¸°</a></p>
</li>
<li>
<p><a href="https://tech.kakao.com/2022/05/06/github-actions/">ì¹´ì¹´ì˜¤ì—”í„°í”„ë¼ì´ì¦ˆê°€ GitHub Actionsë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ </a></p>
</li>
<li>
<p><a href="https://itcoin.tistory.com/685">Github actionsë¥¼ ì´ìš©í•œ CICD - 2</a></p>
</li>
<li>
<p><a href="https://jinmay.github.io/2020/05/13/git/github-action-syntax/">[Github]ê¹ƒí—ˆë¸Œì˜ CIíˆ´ì¸ Actionsì˜ ë¬¸ë²• ê°„ë‹¨ ì •ë¦¬</a></p>
</li>
<li>
<p><a href="https://velog.io/@sgwon1996/%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%ED%99%98%EA%B2%BD%EC%97%90-%EC%8A%A4%ED%94%84%EB%A7%81-%EC%96%B4%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0">ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì— ìŠ¤í”„ë§ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬í•˜ê¸°</a></p>
</li>
</ul></div><section></section></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"post17","lang":"ko","title":"GitHub Actionsë¥¼ í†µí•´ CI/CD êµ¬ì¶•í•˜ê¸° (feat. Docker, Jib)","thumbnail":"https://miro.medium.com/max/1400/1*DmFbJvnRIiQIyi5xBuIXlQ.png","section":"tech","tags":"tech, í”„ë¡œì íŠ¸, CI/CD, Docker","date":"2022-12-06 10:00","preview":"\nì €í¬ `Text Me` ì„œë¹„ìŠ¤ì˜ ë² íƒ€ ë²„ì „ì´ ë°°í¬ë˜ê³  ë‚œ ë’¤ì—, ì‚¬ìš©ìë“¤ë¡œ ë¶€í„° ìˆ˜ë§ì€ í”¼ë“œë°±ì„ ë°›ì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. \nì‚¬ìš©ì í”¼ë“œë°±ì„ ë¹ ë¥´ê²Œ ë°˜ì˜í•˜ë‹¤ ë³´ë‹ˆ í”„ë¡œì íŠ¸ì˜ ë¹Œë“œ ë° ë°°í¬ ì£¼ê¸°ê°€ ì§§ì•„ì¡Œê³  ì´ëŸ¬í•œ ê³¼ì •ì´ ì„œì„œíˆ ë²ˆê±°ë¡­ê²Œ ëŠê»´ì§€ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤"},"detail":"\nì €í¬ `Text Me` ì„œë¹„ìŠ¤ì˜ ë² íƒ€ ë²„ì „ì´ ë°°í¬ë˜ê³  ë‚œ ë’¤ì—, ì‚¬ìš©ìë“¤ë¡œ ë¶€í„° ìˆ˜ë§ì€ í”¼ë“œë°±ì„ ë°›ì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. \nì‚¬ìš©ì í”¼ë“œë°±ì„ ë¹ ë¥´ê²Œ ë°˜ì˜í•˜ë‹¤ ë³´ë‹ˆ í”„ë¡œì íŠ¸ì˜ ë¹Œë“œ ë° ë°°í¬ ì£¼ê¸°ê°€ ì§§ì•„ì¡Œê³  ì´ëŸ¬í•œ ê³¼ì •ì´ ì„œì„œíˆ ë²ˆê±°ë¡­ê²Œ ëŠê»´ì§€ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤.\n\nì‚¬ìš©ìì˜ í”¼ë“œë°±ì„ ë¹ ë¥´ê²Œ ë°˜ì˜í•˜ê¸° ìœ„í•´ì„œëŠ” í•˜ë£¨ì— ë§ê²ŒëŠ” 20ë²ˆì˜ ë°°í¬ê°€ ì´ë£¨ì–´ì ¸ì•¼í–ˆê¸° ë•Œë¬¸ì— í”„ë¡œì íŠ¸ì˜ ë¹Œë“œ ë° ë°°í¬ê³¼ì •ì„ ìë™í™” í•˜ê¸°ë¡œ í•˜ì˜€ìŠµë‹ˆë‹¤. \n(í•˜ë£¨ì— 1,000ë²ˆ ì´ìƒì˜ í¬ê³  ì‘ì€ ë°°í¬ê°€ ì´ë¤„ì§€ëŠ” í…Œí¬ ê¸°ì—…ì— ë¹„í•˜ë©´ ê·€ì—¬ìš´ ìˆ˜ì¤€ì´ì§€ë§Œ ë§ì´ì£ â€¦ )\n\nì´ë²ˆ ê¸€ì—ì„œëŠ” ì €í¬ê°€ CI/CD ë„êµ¬ ì¤‘ GitHub Actionsë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ì™€ ë™ì‘ì›ë¦¬ì— ëŒ€í•´ì„œ ê³µìœ í•˜ê² ìŠµë‹ˆë‹¤.\n\n## 1. GitHub Actionsì˜ ì¥ì \n\nGitHub Actoinsë¥¼ CI ì†”ë£¨ì…˜ìœ¼ë¡œ ì±„íƒí•˜ê²Œ ëœ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n- GitHubì™€ í†µì¼ëœ í™˜ê²½ì—ì„œ CI ìˆ˜í–‰ì´ ê°€ëŠ¥í•˜ë‹¤.\n- ì¤‘ì•™ì—ì„œ ê´€ë¦¬í•˜ëŠ” `GitHub Actions Runner` ì— ì§€ì†ì ìœ¼ë¡œ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…í•˜ì—¬ ì›í™œí•œ CI í™˜ê²½ êµ¬ì„±ì´ ê°€ëŠ¥í•˜ë‹¤.\n- í”„ë¡œì íŠ¸ë§ˆë‹¤ ê°œë³„ Runnerë¥¼ í†µí•œ ë¹Œë“œ í…ŒìŠ¤íŠ¸ê°€ ê°€ëŠ¥í•˜ë‹¤.\n- ì¹œìˆ™í•œ ë¬¸ë²•ì˜ YAML íŒŒì¼ë¡œ íŒŒì´í”„ë¼ì¸ êµ¬ì„±ì´ ê°„ë‹¨í•˜ë‹¤.\n\n- GitHub Actions Runnerë€?\n    - GitHub Actionsë¥¼ ê¸°ë™í•˜ëŠ” Runner\n    - GitHubëŠ” í¼ë¸”ë¦­ ìª½ì˜ GitHub Actions Runnerë¥¼ í´ë¼ìš°ë“œì—ì„œ ì œê³µí•´ ì£¼ê³  ìˆë‹¤.\n        - ë•ë¶„ì— ì§ì ‘ í”„ë¡œë¹„ì €ë‹í•  í•„ìš” ì—†ì´ Runnerë¥¼ ë°”ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\n## 2. Github Actionì˜ êµ¬ì„± ìš”ì†Œ\n\n- workflow\n    - í•œê°œ ì´ìƒì˜ `job` ì„ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ìë™í™”ëœ ì‘ì—…\n    - `YAML` íŒŒì¼ë¡œ ì‘ì„±ëœë‹¤.\n    - `event` ì— ì˜í•´ì„œ ì‹¤í–‰ëœë‹¤.\n- event\n    - `workflow` ë¥¼ ì‹¤í–‰ì‹œí‚¤ëŠ” íŠ¹ì • í™œë™\n    - ê¹ƒí—ˆë¸Œì—ì„œ ë°œìƒí•˜ëŠ” ëŒ€ë¶€ë¶„ì˜ ì‘ì—…ì„ eventë¡œ ì •ì˜ ê°€ëŠ¥.\n        - ex) `push event` , `pull request event` , `issue event`\n- jobs\n    - í•œê°€ì§€ `runner` ì•ˆì—ì„œ ì‹¤í–‰ë˜ëŠ” ì—¬ëŸ¬ `step` ë“¤ì˜ ëª¨ìŒ\n    - ê° `step` ë“¤ì€ ì¼ì¢…ì˜ `shell script` ì²˜ëŸ¼ ì‹¤í–‰ëœë‹¤.\n    - stepë“¤ì€ ìˆœì„œì— ë”°ë¼ ì‹¤í–‰ë˜ë©° stepë¼ë¦¬ ë°ì´í„° ê³µìœ ê°€ ê°€ëŠ¥í•˜ë‹¤\n    - jobì€ ë‹¤ë¥¸ jobì— ì˜ì¡´ê´€ê³„ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìœ¼ë©° `ë³‘ë ¬ ì‹¤í–‰` ì´ ê°€ëŠ¥í•˜ë‹¤.\n- actions\n    - ë°˜ë³µ ì‘ì—…ì„ ì •ì˜í•œ ì»¤ìŠ¤í…€ ì–´í”Œë¦¬ì¼€ì´ì…˜\n    - workflow íŒŒì¼ì—ì„œ ìì£¼ ë°˜ë³µë˜ëŠ” ì½”ë“œë¥¼ ë¯¸ë¦¬ ì •ì˜í•  ìˆ˜ ìˆë‹¤.\n        - ì½”ë“œ ì–‘ì„ ì¤„ì´ëŠ” ì´ì \n    - ê¹ƒí—ˆë¸Œ ë§ˆì¼“í”Œë ˆì´ìŠ¤ë¥¼ í†µí•´ ë‹¤ë¥¸ ì‚¬ëŒì´ ë§Œë“  action ì‚¬ìš© ê°€ëŠ¥\n\në” ìì„¸í•œ GitHub Actions workflow syntaxëŠ” [í•´ë‹¹ í¬ìŠ¤íŠ¸](https://jinmay.github.io/2020/05/13/git/github-action-syntax/)ë¥¼ ì°¸ê³ í•˜ë©´ ë„ì›€ì´ ë˜ì‹¤ ê²ƒ ê°™ìŠµë‹ˆë‹¤.\n\n![ë¨€](https://i.imgur.com/9tu0sgH.png)\n\n## 3. Github Actionìœ¼ë¡œ CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•í•˜ê¸°\n\në‹¤ìŒê³¼ ê°™ì€ ìˆœì„œë¡œ íŒŒì´í”„ë¼ì¸ì´ êµ¬ë™ë˜ë„ë¡ workflowë¥¼ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.\n\n1. Github Actionì´ íŠ¸ë¦¬ê±°ë˜ë©´ jibë¡œ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•œë‹¤.\n2. ë§Œë“¤ì–´ì§„ ì´ë¯¸ì§€ë¥¼ DockerHubì— pushí•œë‹¤.\n3. ì„œë²„ì— ì ‘ì†í•´ì„œ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ pull í•œë‹¤.\n\n`.github/workflows` ë””ë ‰í† ë¦¬ë¥¼ í”„ë¡œì íŠ¸ì— ìƒì„±í•˜ê³ , ê±°ê¸°ì— gradle ë¹Œë“œë¥¼ ìœ„í•œ `build_backend.yml` ì„ ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤.\n\n### 3.1 build_backend.yml\n\në‹¤ìŒ `jobs` ê°€ ì‹¤ì œë¡œ CIë¥¼ ìˆ˜í–‰í•˜ëŠ” ê³¼ì •ì´ë©° `steps` ë‹¨ê³„ë¡œ jobsê°€ ì§„í–‰ë˜ê²Œ ë©ë‹ˆë‹¤.\n\n```yaml\nname: Build Backend Image\n\non:\n  pull_request:\n    branches:\n      - production\n      - master\n    paths:\n      - \"backend/**\"\n  workflow_dispatch:\n\ndefaults:\n  run:\n    working-directory: \"backend/text-me\"\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v3\n\n      - name: Set up JDK 11\n        uses: actions/setup-java@v1\n        with:\n          java-version: '11'\n          distribution: 'temurin'\n\n      - name: Set environment variables\n          run:|\n            echo \"::set-env name=DB_URL::${{ secrets.DB_URL }}\"\n            echo \"::set-env name=DB_USERNAME::${{ secrets.DB_USERNAME }}\"\n            echo \"::set-env name=DB_PASSWORD::${{ secrets.DB_PASSWORD }}\"\n            echo \"::set-env name=JWT_KEY::${{ secrets.JWT_KEY }}\"\n            echo \"::set-env name=JWT_EXPIRY::${{ secrets.JWT_EXPIRY }}\"\n            echo \"::set-env name=REFRESH_EXPIRY::${{ secrets.REFRESH_EXPIRY }}\"\n            echo \"::set-env name=AWS_ACCESS_KEY_ID::${{ secrets.AWS_ACCESS_KEY_ID }}\"\n            echo \"::set-env name=AWS_SECRET_ACCESS_KEY::${{ secrets.AWS_SECRET_ACCESS_KEY }}\"\n\n      - name: Login to Docker Hub\n        uses: docker/login-action@v2.1.0\n        with:\n          username: ${{ secrets.DOCKERHUB_USERNAME }}\n          password: ${{ secrets.DOCKERHUB_PASSWORD }}\n\n      - name: Grant execute permission for gradlew\n        run: chmod +x gradlew\n        shell: bash\n\n      - name: Build with jib\n        run: |\n          ./gradlew jib \\\n          -Djib.to.auth.username=${{ secrets.DOCKERHUB_USERNAME }} \\\n          -Djib.to.auth.password=${{ secrets.DOCKERHUB_PASSWORD }} \\\n          -Djib.to.image=\"${{ secrets.DOCKERHUB_USERNAME }}/text-me-docker-repo:${GITHUB_REF##*/}\"\n\n      - name: Get current time\n        uses: 1466587594/get-current-time@v2\n        id: current-time\n        with:\n          format: YYYY-MM-DDTHH-mm-ss\n          utcOffset: \"+09:00\"\n\n      - name: Show Current Time\n        run: echo \"CurrentTime=${{steps.current-time.outputs.formattedTime}}\"\n        shell: bash\n```\n\në¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ì— ì‘ì„±ëœ ë‚´ìš©ì„ ì¢€ ë” ìì„¸íˆ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.\n\n- `jobs: build: runs-on: ubuntu-latest`\n  - ì‘ì„±í•œ ìŠ¤í¬ë¦½íŠ¸ê°€ ì‘ë™ë  OS í™˜ê²½ì„ ì§€ì •í•©ë‹ˆë‹¤.\n  - text me ì„œë¹„ìŠ¤ëŠ” ìš°ë¶„íˆ¬ 18.04ì—ì„œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— `ubuntu-latest` ë¡œ ì§€ì •í•´ ì£¼ì—ˆìŠµë‹ˆë‹¤.\n    ![d](https://i.imgur.com/mRZU1aq.png)\n    \n- `steps: uses`\n    - ë§ˆì¼“ í”Œë ˆì´ìŠ¤ì— ì‚¬ì „ ì •ì˜ëœ ë‚´ìš©ì„ ì´ìš©í•˜ì—¬ stepì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.\n    - ì‚¬ì „ ì‘ì—…ì„ ìœ„í•œ í™˜ê²½ ì„¤ì •ìš©.\n      ![d](https://i.imgur.com/xZ8nmau.png)\n\n- `steps: run`\n    - ê°œë°œìê°€ ì§ì ‘ ì •ì˜í•œ ì»¤ë§¨ë“œë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\n    - ì‹¤ì œ ìˆ˜í–‰ìš©.\n\n- `-Djib.to.image=\"${{ secrets.DOCKERHUB_USERNAME }}/text-me-docker-repo:${GITHUB_REF##*/}\"`\n  - Jibë¥¼ í†µí•´ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•´ì„œ ë„ì»¤ í—ˆë¸Œì— push í•©ë‹ˆë‹¤.\n\n**ë„ì»¤ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì™€ JIB**\n\nìŠ¤í”„ë§ í”„ë¡œì íŠ¸ë¥¼ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¡œ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ë‹¤ì–‘í•œ ë°©ë²•ë“¤ì´ ì¡´ì¬í•©ë‹ˆë‹¤.\n\n- **ë¡œì»¬ í™˜ê²½ì—ì„œ jar íŒŒì¼ ë¹Œë“œ , jar íŒŒì¼ì„ ì´ë¯¸ì§€ì— ë³µì‚¬ í›„ ì‹¤í–‰**\n  - í”„ë¡œì íŠ¸ í´ë”ë¡œ ë“¤ì–´ê°€ì„œ gradlew clean buildë¥¼ í†µí•´ grdlewë¡œ jar íŒŒì¼ ë¹Œë“œ\n    - `./gradlew clean build`\n  - í”„ë¡œì íŠ¸ í…ŒìŠ¤íŠ¸ ì½”ë“œë“¤ì´ ì‹¤í–‰ë˜ê³  ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ í†µê³¼í•˜ë©´ `./build/libs` ì— ì‹¤í–‰ ê°€ëŠ¥í•œ jar íŒŒì¼ì´ ìƒì„±ëœë‹¤.\n  - jar íŒŒì¼ì„ ë°”íƒ•ìœ¼ë¡œ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ Dockerfileì„ ì‘ì„±\n\n      ```yaml\n      FROM openjdk:11\n      ARG JAR_FILE=./build/libs/jpashop-0.0.1-SNAPSHOT.jar\n      COPY ${JAR_FILE} app.jar\n      ENTRYPOINT [\"java\",\"-Djava.security.egd=file:/dev/./urandom\",\"-jar\",\"/app.jar\"]\n      ```\n\n  - í•´ë‹¹ Dockerfileì„ í”„ë¡œì íŠ¸ í´ë”ì— ë„£ì€ í›„ docker build . -t íƒœê·¸ ì´ë¦„ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ ìƒì„±\n  - java11ì˜ ì‹¤í–‰í™˜ê²½ì„ ì œê³µí•˜ëŠ” openjdk:11 ì´ë¯¸ì§€ ìœ„ì—ì„œ í´ë”ì— ìˆëŠ” jar íŒŒì¼ì„ ì´ë¯¸ì§€ ë‚´ë¶€ë¡œ ë³µì‚¬ í›„ java ëª…ë ¹ì–´ë¥¼ í†µí•´ ì‹¤í–‰\n\n![d](https://cloud.google.com/java/images/docker_build_flow.png)\n\ní•˜ì§€ë§Œ jar íŒŒì¼ì„ ë¹Œë“œí•˜ê³  ì¶”ê°€ë¡œ ì´ë¯¸ì§€ì— ë³µì‚¬í•˜ì—¬ ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì€ ì†ŒìŠ¤ì½”ë“œì— ì¡°ê¸ˆì˜ ë³€í™”ë§Œ ìƒê¸°ë”ë¼ë„ ë³€ê²½ëœ ë¶€ë¶„ê³¼ ì˜ì¡´ì„±ì´ ì—°ê²°ëœ jar íŒŒì¼ ì „ì²´ê°€ ìƒˆë¡œìš´ ì´ë¯¸ì§€ë¡œ ì¸ì‹ë˜ì–´ ì „ì²´ íŒŒì¼ì´ ë‹¤ì‹œ ë¹Œë“œë˜ê¸° ë•Œë¬¸ì— Docker layerì˜ ì¥ì ì„ ì‚´ë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n\nì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ layerë¥¼ ë‚˜ëˆ„ëŠ” ë°©ë²•ë„ ìˆì§€ë§Œ Google Cloudì—ì„œ ì œê³µí•´ì£¼ëŠ” jibë¥¼ í†µí•´ì„œ ì´ë¯¸ì§€ ë¹Œë“œë¥¼ ìµœì í™”í•˜ëŠ” ë°©ë²•ì„ ì„ íƒí•˜ì˜€ìŠµë‹ˆë‹¤.\n\n- **JIBë¥¼ í†µí•œ ì´ë¯¸ì§€ ë¹Œë“œ**\n  - JibëŠ” **Dockerfile, Dockerì— ì˜ì¡´í•˜ì§€ ì•Šê³ ** gradle, mavenì—ì„œ Jib í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•´ì„œ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ê³  í—ˆë¸Œì— í‘¸ì‹œí•˜ëŠ” ë°©ë²•.\n  - ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ **(ì¢…ì† í•­ëª©, ë¦¬ì†ŒìŠ¤, í´ë˜ìŠ¤ ë“±)** ë³„ê°œì˜ ë ˆì´ì–´ë¡œ êµ¬ì„±í•˜ê³  Docker ì´ë¯¸ì§€ ë ˆì´ì–´ ìºì‹±ì„ í™œìš©í•´ì„œ **ë³€ê²½ì‚¬í•­ë§Œ ë‹¤ì‹œ ë¹Œë“œ**í•¨ìœ¼ë¡œì¨ ë¹Œë“œë¥¼ ë¹ ë¥´ê²Œ ìœ ì§€\n  - jib ë ˆì´ì–´ êµ¬ì„±ê³¼ ì‘ì€ ê¸°ë³¸ ì´ë¯¸ì§€ëŠ” ì „ì²´ ì´ë¯¸ì§€ í¬ê¸°ë¥¼ ì‘ê²Œ ìœ ì§€ì‹œí‚¤ë©° ë¹Œë“œ ì†ë„ë¥¼ í–¥ìƒ ì‹œí‚´\n\n![d](https://cloud.google.com/java/images/jib_build_flow.png)\n\n**Gradleì— jib í”ŒëŸ¬ê·¸ì¸ ì¶”ê°€ ë° í™˜ê²½ ë³€ìˆ˜ ë“±ë¡**\n\n```bash\nplugins {\n    id 'com.google.cloud.tools.jib' version '3.3.1'\n}\n\njib {\n\tto {\n\t\timage = \"sanha1998/text-me-docker-repo\"\n\t}\n\tfrom {\n\t\timage = \"eclipse-temurin:11-jre\"\n\t}\n\tcontainer {\n\t\tjvmFlags = [\"-Xms128m\", \"-Xmx128m\"]\n\t\tenvironment = [\n\t\t\t\t'DB_URL': System.getenv('DB_URL'),\n\t\t\t\t'DB_USERNAME': System.getenv('DB_USERNAME'),\n\t\t\t\t'DB_PASSWORD': System.getenv('DB_PASSWORD'),\n\t\t\t\t'JWT_KEY': System.getenv('JWT_KEY'),\n\t\t\t\t'JWT_EXPIRY': System.getenv('JWT_EXPIRY'),\n\t\t\t\t'REFRESH_EXPIRY': System.getenv('REFRESH_EXPIRY'),\n\t\t\t\t'AWS_ACCESS_KEY_ID': System.getenv('AWS_ACCESS_KEY_ID'),\n\t\t\t\t'AWS_SECRET_ACCESS_KEY': System.getenv('AWS_SECRET_ACCESS_KEY')\n\t\t]\n\t}\n}\n```\n\n**í™˜ê²½ ë³€ìˆ˜ ì£¼ì…**\n\nìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ì˜ ë¹Œë“œê°€ ì‹œì‘ë˜ë©´`application.yml` í˜¹ì€ `application.properties` \në‚´ì— ì„¤ì •ëœ í™˜ê²½ë³€ìˆ˜ ê°’ë“¤ì´ ì£¼ì…ë©ë‹ˆë‹¤. ì´ë•Œ AWS ê³„ì • ì •ë³´ì™€ ê°™ì€ ë¯¼ê° ì •ë³´ë¥¼ application.ymlì— ë…¸ì¶œì‹œí‚¤ì§€ ì•Šê¸° ìœ„í•´ì„œ Secrete í™˜ê²½ ë³€ìˆ˜ë¥¼ ê¹ƒí—ˆë¸Œì— ë“±ë¡í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.\n\n![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-12-17 á„‹á…©á„’á…® 9.19.33.png](https://i.imgur.com/VPtkmpm.png)\n\nê¹ƒí—ˆë¸Œì— ë“±ë¡í•œ secrets í™˜ê²½ ë³€ìˆ˜ë“¤ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.\n\n```yaml\n- name: Set environment variables\n  run:|\n    echo \"::set-env name=DB_URL::${{ secrets.DB_URL }}\"\n    echo \"::set-env name=DB_USERNAME::${{ secrets.DB_USERNAME }}\"\n    echo \"::set-env name=DB_PASSWORD::${{ secrets.DB_PASSWORD }}\"\n    echo \"::set-env name=JWT_KEY::${{ secrets.JWT_KEY }}\"\n    echo \"::set-env name=JWT_EXPIRY::${{ secrets.JWT_EXPIRY }}\"\n    echo \"::set-env name=REFRESH_EXPIRY::${{ secrets.REFRESH_EXPIRY }}\"\n    echo \"::set-env name=AWS_ACCESS_KEY_ID::${{ secrets.AWS_ACCESS_KEY_ID }}\"\n    echo \"::set-env name=AWS_SECRET_ACCESS_KEY::${{ secrets.AWS_SECRET_ACCESS_KEY }}\"\n```\n\n### 3.2 deploy-backend\n\nì´ì œ ìš´ì˜ ì„œë²„ì—ì„œ ë„ì»¤ í—ˆë¸Œì— ì˜¬ë¦° ì´ë¯¸ì§€ë¥¼ pullí•œ ë‹¤ìŒ, ì‹¤í–‰ì‹œì¼œ ì£¼ë©´ ë©ë‹ˆë‹¤.\n\n docker ê´€ë ¨ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ [ìš´ì˜ ì„œë²„ì— dockerë¥¼ ì„¤ì¹˜](https://headf1rst.github.io/TIL/infra-1)í•´ ì£¼ì—ˆìŠµë‹ˆë‹¤.\n\ndockerê°€ ìš´ì˜ ì„œë²„ì— ì •ìƒì ìœ¼ë¡œ ì„¤ì¹˜ë˜ì—ˆë‹¤ë©´, ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì™€ì„œ ì‹¤í–‰ì‹œí‚¤ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ì—¬ ë°°í¬ë¥¼ ìë™í™” ì‹œì¼œ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.\n\n```yaml\nname: Deploy Backend\n\non:\n  push:\n    branches:\n      - production\n  workflow_dispatch:\n\ndefaults:\n  run:\n    working-directory: \"backend/text-me\"\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2\n\n      - name: Set up JDK 11\n        uses: actions/setup-java@v1\n        with:\n          java-version: '11'\n          distribution: 'temurin'\n\n      - name: SSH setting\n        uses: appleboy/ssh-action@master\n        with:\n          host: ${{ secrets.HOST }}\n          username: ${{ secrets.USER_NAME }}\n          key: ${{ secrets.PRIVATE_KEY }}\n          envs: GITHUB_SHA\n          script: |\n            whoami\n            docker pull ${{ secrets.DOCKERHUB_USERNAME }}/text-me-docker-repo:${GITHUB_REF##*/}\n            docker tag ${{ secrets.DOCKERHUB_USERNAME }}/text-me-docker-repo:${GITHUB_REF##*/} ${{ secrets.DOCKERHUB_USERNAME }}/text-me-docker-repo:${GITHUB_REF##*/}\n            docker stop text-me-api\n            docker run -d --rm --name text-me-api -p 8080:8080 ${{ secrets.DOCKERHUB_USERNAME }}/text-me-docker-repo:${GITHUB_REF##*/}\n```\n\në°°í¬ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ëˆˆì—¬ê²¨ ë³¼ ë¶€ë¶„ì€ ì›ê²© ì„œë²„ì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ SSH setting ë¶€ë¶„ì…ë‹ˆë‹¤. ([ssh-action](https://github.com/appleboy/ssh-action)) \n\në¡œì»¬ ì„œë²„ë¥¼ ì—´ê³  í„°ë¯¸ë„ì— ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì—¬ ssh í‚¤ë¥¼ ìƒì„±í•´ ì£¼ì—ˆìŠµë‹ˆë‹¤.\n\n- `ssh-keygen -t rsa -b 4096 -C \"ë‚´ì´ë©”ì¼@gmail.com\"`\n\n![d](https://i.imgur.com/s7q725G.png)\n\nssh í‚¤ë¥¼ `./authorized_keys2` ê²½ë¡œì— ì €ì¥í•˜ê³  ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ í†µí•´ì„œ ssh í‚¤ê°’ì„ í™•ì¸í•´ ì¤ë‹ˆë‹¤.\n\n- `vim ./ssh/authorized_keys2.pub`\n\nssh í‚¤ë¥¼ GITHUB SECRETì˜ PRIVATE_KEYë¡œ ë“±ë¡í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.\n\n![d](https://i.imgur.com/wJ7mdpG.png)\n\nëª¨ë“  ê³¼ì •ì´ ë§ˆë¬´ë¦¬ë˜ì—ˆë‹¤ë©´ ì§ì ‘ docker hubì— ì ‘ì†í•´ì„œ ì´ë¯¸ì§€ë¥¼ pull ë°›ì•„ì˜¬ í•„ìš” ì—†ì´ ìë™ìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì™€ì„œ ìš´ì˜ ì„œë²„ì— ë„ì›Œì£¼ê²Œë©ë‹ˆë‹¤.\n\n## ë§ˆì¹˜ë©°\n\nì§€ê¸ˆê¹Œì§€ ê¸°í”„í„°ì¦ˆíŒ€ì´ GitHub Actionsë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ì™€ ë™ì‘ì›ë¦¬ì— ëŒ€í•´ ì„¤ëª…ë“œë ¸ìŠµë‹ˆë‹¤.\n\nì‹œê°„ì´ ëœë‹¤ë©´ í”„ë¡ íŠ¸ ë¹Œë“œ ë° ë°°í¬ ê³¼ì •ë„ í¬ìŠ¤íŒ… í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤.\n\n---\n\n**ì°¸ê³  ìë£Œ** ğŸ“š\n\n- [GitHub Actionìœ¼ë¡œ CI/CD êµ¬ì¶•í•˜ê¸°](https://velog.io/@sgwon1996/GitHub-Action%EC%9C%BC%EB%A1%9C-CICD-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0)\n\n- [ì¹´ì¹´ì˜¤ì—”í„°í”„ë¼ì´ì¦ˆê°€ GitHub Actionsë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ](https://tech.kakao.com/2022/05/06/github-actions/)\n\n- [Github actionsë¥¼ ì´ìš©í•œ CICD - 2](https://itcoin.tistory.com/685)\n\n- [[Github]ê¹ƒí—ˆë¸Œì˜ CIíˆ´ì¸ Actionsì˜ ë¬¸ë²• ê°„ë‹¨ ì •ë¦¬](https://jinmay.github.io/2020/05/13/git/github-action-syntax/)\n\n- [ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì— ìŠ¤í”„ë§ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬í•˜ê¸°](https://velog.io/@sgwon1996/%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%ED%99%98%EA%B2%BD%EC%97%90-%EC%8A%A4%ED%94%84%EB%A7%81-%EC%96%B4%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0)\n","lang":"ko","allPostsInOtherLang":[{"id":"post9","lang":"en","title":"Solving the Billion-Dollar Mistake: Modern Java Null Safety with JSpecify and NullAway","date":"2025-09-24","section":"tech","tags":"Null Safety","thumbnail":"https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Ftotx4mdagz9nsegld5mr.png","description":"Learn how to eliminate NullPointerExceptions using JSpecify annotations and NullAway static analysis in modern Java applications","searchKeywords":"JSpecify, NullAway, Java null safety, NullPointerException prevention, static analysis","translationSlug":"post10","preview":"\nWhether you're a developer just starting with Java or a senior engineer with two decades of experience, the most frequently encountered err"},{"id":"post8","lang":"en","title":"PostgreSQL MVCC Internals: From xmin/xmax to Isolation Levels","date":"2025-07-06","section":"tech","tags":"PostgreSQL","thumbnail":"https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F7rk467sodudw3ww7iisi.png","description":"Deep dive into PostgreSQL's MVCC implementation, understanding xmin/xmax and how different isolation levels work internally","searchKeywords":"PostgreSQL, MVCC, xmin, xmax, transaction, isolation level, concurrency control","preview":"\nWhen multiple users access a database concurrently, how can we guarantee Isolation, one of the core `ACID` properties? While we could apply"},{"id":"post7","lang":"en","title":"Prompt Engineering Tips from Anthropic Engineers","date":"2025-06-24","section":"tech","tags":"Prompt Engineering, AI, Anthropic, LLM","thumbnail":"https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fdzzrfth8zqdnrhbj9538.png","description":"Valuable prompt engineering tips and insights from Anthropic engineers","searchKeywords":"prompt engineering, AI tips, Anthropic, LLM best practices","translationSlug":"post22","preview":"\nHere are a few impressive points from [youtube (AI prompt engineering: A deep dive)](https://www.youtube.com/watch?v=T9aRN5JkmL8\u0026t=2463s) w"},{"id":"post6","lang":"en","title":"From Theory to Practice: A JMH Showdown Between Sequential and Parallel Streams","date":"2025-06-15","section":"tech","tags":"Java, JMH","thumbnail":"https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F7ytq239pcfe279t9avzg.png","description":"Practical performance comparison between sequential and parallel streams using JMH benchmarking","searchKeywords":"JMH benchmark, Java performance, sequential vs parallel, stream optimization","preview":"\nIn our [previous post](https://dev.to/headf1rst/discover-how-forkjoinpool-powers-javas-high-performance-parallel-processing-3pn7), we delve"},{"id":"post5","lang":"en","title":"Discover how ForkJoinPool powers Java's high-performance parallel processing","date":"2025-06-03","section":"tech","tags":"ForkJoinPool","thumbnail":"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qgawc6pj2vbyzuem20wn.png","description":"Understanding ForkJoinPool and how it powers Java's parallel stream processing","searchKeywords":"ForkJoinPool, Java parallel processing, work-stealing, parallelStream","preview":"\nRecently, I optimized our transport operation plan Excel upload feature, boosting performance for logistics system administrators. This too"},{"id":"post4","lang":"en","title":"Why @Transactional Sometimes Fails: A Deep Dive into Spring AOP Proxies","section":"tech","date":"2025-06-01","tags":"AOP, Transactional","thumbnail":"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/a1wxef2amdixh3lr4any.png","description":"Understanding Spring AOP proxies and why @Transactional sometimes fails with internal method calls","searchKeywords":"Spring AOP, @Transactional, proxy pattern, self-invocation","preview":"\n## How @Transactional Works\n\n### Transaction Management via AOP and the Proxy Pattern\n\nAOP (Aspect-Oriented Programming) is a programming p"},{"id":"post3","lang":"en","title":"Java ClassLoaders: How the JVM Dynamically Loads \u0026 Executes Your Code","section":"tech","date":"2025-05-27","tags":"Java","thumbnail":"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/iu4pe4d29jz23wt26kwz.png","description":"Deep dive into Java ClassLoaders and JVM's dynamic class loading mechanisms","searchKeywords":"Java ClassLoader, JVM, dynamic loading, class loading process","preview":"\nJava's \"Write Once, Run Anywhere\" principle is foundational to its sustained popularity. This portability is powered by the Java Virtual Ma"},{"id":"post2","lang":"en","title":"Understanding and Resolving the N+1 Query Problem in JPA","section":"tech","date":"2025-05-05","tags":"JPA, Hibernate, N+1 Problem","thumbnail":"https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fsrf6chohgt3athvqj7u1.png","description":"Learn what causes the N+1 query problem in JPA, how to identify it, and practical solutions using fetch joins, EntityGraph, and QueryDSL","searchKeywords":"JPA, N+1, Hibernate, performance, optimization, fetch join, EntityGraph, QueryDSL","preview":"\nThe **N+1 query problem** arises when one initial query (1) is followed by N additional queriesâ€”one for each result row from the first quer"},{"id":"post1","lang":"en","title":"Kafka Producer Stability Check: Ensuring Message Safety in Apache Kafka","section":"tech","date":"2025-05-04","tags":"Kafka, Producer, Reliability, Apache Kafka","thumbnail":"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ojt2w7s7rr9kws35r2yg.png","description":"Learn how to build fault-tolerant Kafka producers that survive rolling patches and broker failures","searchKeywords":"Kafka, producer, reliability, message safety, rolling patch, broker failure","preview":"\nDuring a recent incident, our team observed message loss from a Kafka producer during an Amazon MSK rolling patch. What began as a routine "}]},"__N_SSG":true},"page":"/[lang]/[id]","query":{"lang":"ko","id":"post17"},"buildId":"GPgoZ2Q8StcGcqyhcZOyg","assetPrefix":"/log","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>