<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="apple-touch-icon" sizes="180x180" href="https://i.imgur.com/2nHGFTv.png"/><link rel="icon" type="image/png" sizes="32x32" href="https://i.imgur.com/2nHGFTv.png"/><link rel="icon" type="image/png" sizes="16x16" href="https://i.imgur.com/2nHGFTv.png"/><link rel="manifest" href="/site.webmanifest"/><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#da532c"/><meta name="theme-color" content="#ffffff"/><title>Fixture Monkey With Kotlin</title><meta name="title" content="Fixture Monkey With Kotlin"/><meta name="description" content="fixtureMonkey"/><meta name="keywords" content="fixture monkey, test, fixture"/><meta name="robots" content="index, follow"/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="language" content="Korean"/><meta name="author" content="Sanha Ko"/><meta property="og:title" content="Fixture Monkey With Kotlin"/><meta property="og:url" content="https://headf1rst.github.io/log/ko/post-1-3"/><meta property="og:type" content="blog"/><meta property="og:image" content="https://i.imgur.com/J5SIYtU.png"/><meta property="og:description" content="fixtureMonkey"/><link rel="alternate" hrefLang="ko" href="https://headf1rst.github.io/log/ko/post-1-3"/><link rel="alternate" hrefLang="x-default" href="https://headf1rst.github.io/log/ko/post-1-3"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"Fixture Monkey With Kotlin","datePublished":"2024-03-03 10:00","dateModified":"2024-03-03 10:00","author":{"@type":"Person","name":"Sanha Ko"},"description":"fixtureMonkey","image":"https://i.imgur.com/J5SIYtU.png","url":"https://headf1rst.github.io/TIL/ko/post-1-3","keywords":"test","inLanguage":"ko-KR","publisher":{"@type":"Organization","name":"headF1rst","logo":{"@type":"ImageObject","url":"https://headf1rst.github.io/TIL/favicon.ico"}},"mainEntityOfPage":{"@type":"WebPage","@id":"https://headf1rst.github.io/TIL/ko/post-1-3"}}</script><meta name="next-head-count" content="25"/><link rel="preload" href="/log/_next/static/css/39f7a3d9bab3920f.css" as="style"/><link rel="stylesheet" href="/log/_next/static/css/39f7a3d9bab3920f.css" data-n-g=""/><link rel="preload" href="/log/_next/static/css/38994dd0aed51f22.css" as="style"/><link rel="stylesheet" href="/log/_next/static/css/38994dd0aed51f22.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/log/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/log/_next/static/chunks/webpack-1b0decc0375da57b.js" defer=""></script><script src="/log/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/log/_next/static/chunks/main-6e6d6dc6617c8481.js" defer=""></script><script src="/log/_next/static/chunks/pages/_app-a194fea961ad530a.js" defer=""></script><script src="/log/_next/static/chunks/pages/%5Blang%5D/%5Bid%5D-0687c01bb97784d8.js" defer=""></script><script src="/log/_next/static/OfAFIk6lGw8DlHB2wpHkI/_buildManifest.js" defer=""></script><script src="/log/_next/static/OfAFIk6lGw8DlHB2wpHkI/_ssgManifest.js" defer=""></script></head><body><div id="__next"><nav class="flex bg-white sticky top-0 left-0 z-50 justify-between items-center border-b-2 border-gray-100 py-3 md:justify-start md:space-x-10 px-10 sm:px-5 dark:bg-[#0d1117] dark:text-[#c9d1d9] dark:border-gray-600"><div class="flex justify-start"><a href="/log/ko/"><div class="flex items-center gap-2 cursor-pointer"><h1 class="text-lg ">JustAnotherBlog</h1></div></a></div><div class="flex justify-between gap-10 sm:hidden items-center"><a href="/log/ko/"><button class="font-light hover:text-indigo-300 text-base">Home</button></a><a href="/log/ko/category/"><button class="font-light hover:text-indigo-300 text-base">Category</button></a><a href="https://plain-composer-c65.notion.site/29c7640fdf054059b6ea28ed61189bfb" target="_blank" rel="noreferrer" class="hover:text-indigo-300 text-base font-light flex gap-1">About<span class="flex justify-center" style="align-items:center"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z"></path><path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"></path></svg></span></a><div class="relative"><button class="flex items-center gap-1 hover:text-indigo-300 text-base font-light">ğŸ‡°ğŸ‡·<!-- --> <!-- -->í•œêµ­ì–´</button></div></div><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="lg:hidden" height="25" width="25" xmlns="http://www.w3.org/2000/svg"><path d="M32 96v64h448V96H32zm0 128v64h448v-64H32zm0 128v64h448v-64H32z"></path></svg></nav><main class="dark:bg-[#0d1117] h-screen pb-10"><div class="flex flex-col w-3/5 sm:w-5/6 m-auto pt-20 pb-20 gap-10 dark:bg-[#0d1117] dark:text-[#c9d1d9]"><ul id="scroll-spy" class="sm:hidden p-10 fixed top-50 right-0 h-full w-1/5 text-gray-500 dark:text-[#c9d1d9]"></ul><div class="text-5xl font-bold">Fixture Monkey With Kotlin</div><div class="flex flex-col gap-2"><div class="text-base text-gray-600 dark:text-gray-300">2024-03-03 10:00</div><div class="flex flex-wrap gap-2 dark:text-black sm:m-0"><span class="p-1 pl-3 pr-3 rounded-md bg-indigo-100 hover:bg-indigo-200 cursor-pointer transition ease-in-out duration-200 text-sm">test</span></div></div><div class="flex items-center gap-2"><span class="text-sm text-gray-400">ğŸ‡ºğŸ‡¸ ì˜ì–´ë¡œ ì½ê¸°</span></div><div class="markdown-body" style="font-size:17px"><p>í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ë‹¤ë³´ë©´ í”„ë¡œë•ì…˜ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ì‹œê°„ë³´ë‹¤ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ í”½ìŠ¤ì²˜ë¥¼ ë§Œë“œëŠ”ë° ë” ë§ì€ ì‹œê°„ì´ ì†Œìš”ë  ë•Œê°€ ìˆë‹¤.</p>
<p>í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ëŠ”ë° ì‹œê°„ì´ ë§ì´ ë“¤ê³  ë²ˆê±°ë¡œìš¸ ìˆ˜ë¡ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ìƒëµí•˜ê²Œ ë˜ê³  ê²°êµ­ ê²°í•¨ì— ì·¨ì•½í•œ ì‹œìŠ¤í…œì„ êµ¬í˜„í•  ìœ„í—˜ì´ ìˆë‹¤.</p>
<p>ì£¼ë¬¸ ê´€ë ¨ ë¡œì§ì„ í…ŒìŠ¤íŠ¸ í•˜ê¸°ìœ„í•´ì„œ <code node="[object Object]">Order</code> í”½ìŠ¤ì²˜ë¥¼ ë§Œë“¤ì–´ì•¼í–ˆì—ˆëŠ”ë° <code node="[object Object]">Order</code> ê°ì²´ ë‚´ë¶€ì— í•„ë“œê°€ 24ê°œ ì˜€ì„ë¿ë”ëŸ¬ ë‚´ë¶€ ê°ì²´ì˜ í•„ë“œê¹Œì§€ í•©í•˜ë©´ ì •ì˜í•´ì¤˜ì•¼ í•˜ëŠ” í•„ë“œê°€ ìˆ˜ ì—†ì´ ë§ì•˜ë‹¤.</p>
<p>ì‹¬ì§€ì–´ ì¼€ì´ìŠ¤ë§ˆë‹¤ ë‹¤ë¥¸ ìƒíƒœê°’ì„ ê°–ê³ ìˆëŠ” <code node="[object Object]">Order</code> í”½ìŠ¤ì²˜ë¥¼ ì¶”ê°€ë¡œ ë§Œë“¤ì–´ì¤˜ì•¼ í–ˆê¸° ë•Œë¬¸ì— í…ŒìŠ¤íŠ¸ ì¤€ë¹„ì— ë§ì€ ì‹œê°„ì´ ì†Œìš”ëë˜ ê²½í—˜ì´ ìˆë‹¤.</p>
<p>ê·¸ëŸ¬ë˜ì¤‘ <code node="[object Object]">Fixture Monkey</code>ë¼ëŠ” PBT(Property Based Testing) ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì•Œê²Œë˜ì—ˆê³ , <code node="[object Object]">Fixture Monkey</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸ë¥¼ í¸ë¦¬í•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆì—ˆë˜ ê²½í—˜ì´ ìˆì—ˆëŠ”ë°, ê°œì¸ì ìœ¼ë¡œ ìœ ìš©í•˜ê²Œ ì‚¬ìš©í–ˆë˜ í•µì‹¬ ë‚´ìš©ë§Œ ê°„ëµí•˜ê²Œ ì†Œê°œí•˜ê³ ì í•œë‹¤.</p>
<h2>FixtureMonkeyì˜ ì£¼ìš” ê¸°ëŠ¥</h2>
<ul>
<li>ë Œë¤í•˜ê³  ë³µì¡í•œ ì œì•½ì¡°ê±´ì„ ê°–ëŠ” ê°ì²´ë¥¼ ìƒì„±í•´ì¤€ë‹¤.</li>
<li>ì„¤ì •í•œ ì œì•½ì¡°ê±´ì„ ê²€ì¦í•  ìˆ˜ ìˆë‹¤.</li>
<li>í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ë§ˆë‹¤ ë‹¤ë¥´ê²Œ ê°ì²´ ì œì–´ê°€ ê°€ëŠ¥í•˜ë‹¤.</li>
</ul>
<p><code node="[object Object]">FixtureMonkey</code>ëŠ” ì—”í‹°í‹° í•„ë“œì— ì§€ì •ëœ Bean validation ì–´ë…¸í…Œì´ì…˜ì— ë”°ë¼ ìœ íš¨í•œ ì†ì„±ê°’ì„ ê°–ëŠ” ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.</p>
<p>ì‹¤íŒ¨ í…ŒìŠ¤íŠ¸ ì‘ì„±ê³¼ ê°™ì´ íŠ¹ì • í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ì—ì„œ ì¡°ê±´ì„ ì¶”ê°€í•˜ê±°ë‚˜ ì¡°ê±´ì— ë²—ì–´ë‚œ í•„ë“œë¥¼ ì„¤ì •í•´ì•¼í•  ê²½ìš°ì—ëŠ” <code node="[object Object]">ArbitraryBuilder</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ fixtureë¥¼ ì œì–´í•  ìˆ˜ ìˆë‹¤.</p>
<p><code node="[object Object]">ArbitraryBuilder</code>ëŠ” ë¹Œë” íŒ¨í„´ì„ ì‚¬ìš©í•˜ì—¬ ê°ì²´ì˜ í•„ë“œê°’ì„ ì›í•˜ëŠ” ê°’ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ”ê²Œ ê°€ëŠ¥í•˜ë‹¤.</p>
<h2>ì˜ˆì œ</h2>
<h3>Without FixtureMonkey Test</h3>
<p><code node="[object Object]">FixtureMonkey</code>ì˜ í¸ë¦¬í•œ ê¸°ëŠ¥ì„ ì‚´í´ë³´ê¸°ì— ì•ì„œì„œ ì´ì „ ë°©ì‹ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•´ë³´ì•˜ë‹¤.</p>
<p>ë‹¤ìŒì€ ì£¼ë¬¸ ê³¼ì •ì—ì„œ ì…ë ¥ëœ ë°°ì†¡ì§€ ì£¼ì†Œê°€ ìœ íš¨í•œì§€ ê²€ì¦í•˜ëŠ” í…ŒìŠ¤íŠ¸ì´ë‹¤.</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;color:#383a42;background:#fafafa"><code class="language-kotlin" style="white-space:pre"><span style="color:#a626a4">data</span><span> </span><span class="hljs-class" style="color:#a626a4">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#4078f2">Order</span><span>(  
</span><span>    </span><span style="color:#a626a4">val</span><span> product: List&lt;Product&gt;,  
</span><span>    </span><span style="color:#a626a4">val</span><span> purchaserName: String,  
</span><span>    </span><span style="color:#a626a4">val</span><span> receiver: Receiver,  
</span><span>    </span><span style="color:#a626a4">val</span><span> totalPrice: </span><span style="color:#c18401">Long</span><span>,  
</span><span>    </span><span style="color:#a626a4">val</span><span> coupon: List&lt;Coupon&gt;,  
</span><span>    </span><span style="color:#a626a4">val</span><span> delivery: Delivery,  
</span>)</code></div></pre>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;color:#383a42;background:#fafafa"><code class="language-kotlin" style="white-space:pre"><span class="hljs-class" style="color:#a626a4">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#4078f2">OrderFixture</span><span class="hljs-class"> </span><span>{  
</span><span>    </span><span style="color:#a626a4">companion</span><span> </span><span style="color:#a626a4">object</span><span> {  
</span><span>        </span><span class="hljs-function" style="color:#a626a4">fun</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#4078f2">create</span><span class="hljs-function hljs-params">(  
</span><span class="hljs-function hljs-params">            id: </span><span class="hljs-function hljs-params" style="color:#986801">Long</span><span class="hljs-function hljs-params"> = </span><span class="hljs-function hljs-params" style="color:#986801">1</span><span class="hljs-function hljs-params">L,  
</span><span class="hljs-function hljs-params">            product: </span><span class="hljs-function hljs-params" style="color:#986801">List</span><span class="hljs-function hljs-params">&lt;</span><span class="hljs-function hljs-params" style="color:#986801">Product</span><span class="hljs-function hljs-params">&gt; = listOf(  
</span><span class="hljs-function hljs-params">                Product(name = </span><span class="hljs-function hljs-params" style="color:#50a14f">&quot;ì´ˆì½œë¦¿&quot;</span><span class="hljs-function hljs-params">, price = </span><span class="hljs-function hljs-params" style="color:#986801">300</span><span class="hljs-function hljs-params">L)</span><span>,  
</span><span>                Product(name = </span><span style="color:#50a14f">&quot;í‚¤ë³´ë“œ&quot;</span><span>, price = </span><span style="color:#986801">20000L</span><span>),  
</span>            ),  
<span>            purchaserName: String = </span><span style="color:#50a14f">&quot;í™ê¸¸ë™&quot;</span><span>,  
</span><span>            receiver: Receiver = Receiver(name = </span><span style="color:#50a14f">&quot;í™ê¸¸ë™&quot;</span><span>, </span><span style="color:#50a14f">&quot;01012341234&quot;</span><span>),  
</span><span>            totalPrice: </span><span style="color:#c18401">Long</span><span> = </span><span style="color:#986801">20300L</span><span>,  
</span>            coupon: List&lt;Coupon&gt; = listOf(Coupon()),  
<span>            delivery: Delivery = Delivery(</span><span style="color:#50a14f">&quot;ê²½ê¸°ë„&quot;</span><span>, </span><span style="color:#50a14f">&quot;203ë™ 1023í˜¸&quot;</span><span>, </span><span style="color:#0184bb">true</span><span>),  
</span>        ): Order {  
<span>            </span><span style="color:#a626a4">return</span><span> Order(  
</span>                id = id,  
<!-- -->                product = product,  
<!-- -->                purchaserName = purchaserName,  
<!-- -->                receiver = receiver,  
<!-- -->                totalPrice = totalPrice,  
<!-- -->                coupon = coupon,  
<!-- -->                delivery = delivery,  
<!-- -->            )  
<!-- -->        }  
<!-- -->    }  
<!-- -->}</code></div></pre>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;color:#383a42;background:#fafafa"><code class="language-kotlin" style="white-space:pre"><span class="hljs-class" style="color:#a626a4">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#4078f2">OrderServiceTestWithOutFixtureMonkey</span><span class="hljs-class"> : </span><span class="hljs-class" style="color:#986801">DescribeSpec</span><span>({  
</span><span>    </span><span style="color:#a626a4">val</span><span> sut = OrderService()  
</span><span>    </span><span style="color:#a626a4">val</span><span> log = LoggerFactory.getLogger(</span><span style="color:#a626a4">this</span><span>.javaClass)  
</span>  
<span>    describe(</span><span style="color:#50a14f">&quot;ë°°ì†¡ ì£¼ì†Œ ìœ íš¨ì„± ê²€ì‚¬&quot;</span><span>) {  
</span><span>        it(</span><span style="color:#50a14f">&quot;ìœ íš¨ì„± ê²€ì¦ì„ í†µê³¼í•œë‹¤.&quot;</span><span>) {  
</span><span>            </span><span style="color:#a626a4">val</span><span> order = OrderFixture.create()  
</span>  
<!-- -->            shouldNotThrowAny {  
<!-- -->                sut.validateDeliveryAddress(order)  
<!-- -->            }  
<!-- -->        }  
<span>        it(</span><span style="color:#50a14f">&quot;ì§€ë²ˆ ì£¼ì†Œë¥¼ ì…ë ¥ë°›ì•˜ì„ ê²½ìš°, ìƒì„¸ ì£¼ì†Œê°€ ì—†ìœ¼ë©´ ì•ˆ ëœë‹¤&quot;</span><span>) {  
</span><span>            </span><span style="color:#a626a4">val</span><span> order = OrderFixture.create(delivery = Delivery(baseAddress = </span><span style="color:#50a14f">&quot;ê²½ê¸°ë„&quot;</span><span>, road = </span><span style="color:#0184bb">false</span><span>, detailAddress = </span><span style="color:#0184bb">null</span><span>))  
</span>  
<span>            </span><span style="color:#a626a4">val</span><span> exception = shouldThrow&lt;IllegalArgumentException&gt; {  
</span>                sut.validateDeliveryAddress(order)  
<!-- -->            }  
<!-- -->  
<span>            exception.message shouldBe </span><span style="color:#50a14f">&quot;ì§€ë²ˆ ì£¼ì†Œì—ëŠ” ìƒì„¸ ì£¼ì†Œê°€ ë°˜ë“œì‹œ í•„ìš”í•©ë‹ˆë‹¤.&quot;</span><span>  
</span>        }  
<!-- -->    }})</code></div></pre>
<p>í…ŒìŠ¤íŠ¸ ì„±ê³µê³¼ ì‹¤íŒ¨ ì¼€ì´ìŠ¤ë¥¼ ìœ„í•œ <code node="[object Object]">OrderFixture</code> ê°ì²´ë¥¼ ì •ì˜í•˜ì—¬ ì‚¬ìš©í•˜ì˜€ë‹¤.
<code node="[object Object]">Order</code> ê°ì²´ì— ì •ì˜ëœ í•„ë“œ ë¿ë§Œ ì•„ë‹ˆë¼ ì—°ê´€ëœ ê°ì²´ì˜ í•„ë“œê°’ë“¤ë„ í•¨ê»˜ ì •ì˜í•´ì¤˜ì•¼í•˜ê¸° ë•Œë¬¸ì— ê½¤ë‚˜ ë²ˆê±°ë¡œìš´ ì‘ì—…ì¼ ìˆ˜ ìˆë‹¤.</p>
<p>ë§Œì•½ ì—°ê´€ëœ ì—”í‹°í‹°ê°€ ë” ë§ê³  ì •ì˜í•´ì¤˜ì•¼í•˜ëŠ” í•„ë“œ ìˆ˜ê°€ í›¨ì”¬ ë§ì•„ì§„ë‹¤ë©´ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ fixtureë¥¼ ì •ì˜í•˜ëŠ”ë° í° ë¹„ìš©ì´ ì†Œëª¨ë˜ê²Œ ëœë‹¤.</p>
<h3>FixtureMonkey Test</h3>
<p>ì´ë²ˆì—” <code node="[object Object]">FixtureMonkey</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°„ë‹¨í•˜ê²Œ fixtureë¥¼ ìƒì„±í•˜ì—¬ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•´ë³´ë„ë¡ í•˜ê² ë‹¤.</p>
<p>ë¨¼ì € <code node="[object Object]">build.gradle.kts</code>ì— ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì£¼ì—ˆë‹¤.</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;color:#383a42;background:#fafafa"><code class="language-gradle" style="white-space:pre"><span style="color:#a0a1a7;font-style:italic">// fixture monkey  </span><span>
</span><span>testImplementation(</span><span style="color:#50a14f">&quot;com.navercorp.fixturemonkey:fixture-monkey-starter-kotlin:1.0.14&quot;</span><span>)  
</span><span>testImplementation(</span><span style="color:#50a14f">&quot;com.navercorp.fixturemonkey:fixture-monkey-jakarta-validation:0.6.3&quot;</span><span>)  
</span><span>testImplementation(</span><span style="color:#50a14f">&quot;com.navercorp.fixturemonkey:fixture-monkey-jackson:0.6.3&quot;</span><span>)</span></code></div></pre>
<p><strong>DefaultMonkeyCreator</strong></p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;color:#383a42;background:#fafafa"><code class="language-kotlin" style="white-space:pre"><span class="hljs-function" style="color:#a626a4">fun</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#4078f2">monkey</span><span class="hljs-function hljs-params">()</span><span> : FixtureMonkey {  
</span><span>    </span><span style="color:#a626a4">return</span><span> FixtureMonkey.builder()  
</span>        .plugin(KotlinPlugin())  
<!-- -->        .build()  
<!-- -->}</code></div></pre>
<p><strong>FixtureBuilders</strong></p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;color:#383a42;background:#fafafa"><code class="language-kotlin" style="white-space:pre"><span class="hljs-function" style="color:#a626a4">fun</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#986801">&lt;T&gt;</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#4078f2">defaultFixtureBuilder</span><span class="hljs-function hljs-params">(clazz: </span><span class="hljs-function hljs-params" style="color:#986801">Class</span><span class="hljs-function hljs-params">&lt;</span><span class="hljs-function hljs-params" style="color:#986801">T</span><span class="hljs-function hljs-params">&gt;)</span><span>: ArbitraryBuilder&lt;T&gt; {  
</span><span>    </span><span style="color:#a626a4">return</span><span> monkey().giveMeBuilder(clazz)  
</span>}</code></div></pre>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;color:#383a42;background:#fafafa"><code class="language-kotlin" style="white-space:pre"><span class="hljs-class" style="color:#a626a4">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#4078f2">OrderServiceTestWithFixtureMonkey</span><span class="hljs-class">: </span><span class="hljs-class" style="color:#986801">DescribeSpec</span><span>({  
</span><span>    </span><span style="color:#a626a4">val</span><span> sut = OrderService()  
</span><span>    </span><span style="color:#a626a4">val</span><span> log = LoggerFactory.getLogger(</span><span style="color:#a626a4">this</span><span>.javaClass)  
</span>  
<span>    describe(</span><span style="color:#50a14f">&quot;ë°°ì†¡ ì£¼ì†Œ ìœ íš¨ì„± ê²€ì‚¬&quot;</span><span>) {  
</span><span>        it(</span><span style="color:#50a14f">&quot;ìœ íš¨ì„± ê²€ì¦ì„ í†µê³¼í•œë‹¤.&quot;</span><span>) {  
</span><span>            </span><span style="color:#a626a4">val</span><span> order = defaultFixtureBuilder(Order::</span><span style="color:#a626a4">class</span><span>.java)  
</span>                .setExp(  
<!-- -->                    Order::delivery,  
<span>                    Delivery(baseAddress = </span><span style="color:#50a14f">&quot;ê²½ê¸°ë„&quot;</span><span>, detailAddress = </span><span style="color:#0184bb">null</span><span>, road = </span><span style="color:#0184bb">true</span><span>))  
</span>                .sample()  
<!-- -->  
<!-- -->            shouldNotThrowAny {  
<!-- -->                sut.validateDeliveryAddress(order)  
<!-- -->            }  
<!-- -->        }  
<span>        it(</span><span style="color:#50a14f">&quot;ì§€ë²ˆ ì£¼ì†Œë¥¼ ì…ë ¥ë°›ì•˜ì„ ê²½ìš°, ìƒì„¸ ì£¼ì†Œê°€ ì—†ìœ¼ë©´ ì•ˆ ëœë‹¤&quot;</span><span>) {  
</span><span>            </span><span style="color:#a626a4">val</span><span> order = defaultFixtureBuilder(Order::</span><span style="color:#a626a4">class</span><span>.java)  
</span>                .setExp(  
<!-- -->                    Order::delivery,  
<span>                    Delivery(baseAddress = </span><span style="color:#50a14f">&quot;ê²½ê¸°ë„&quot;</span><span>, detailAddress = </span><span style="color:#0184bb">null</span><span>, road = </span><span style="color:#0184bb">false</span><span>))  
</span>                .sample()  
<!-- -->  
<span>            </span><span style="color:#a626a4">val</span><span> exception = shouldThrow&lt;IllegalArgumentException&gt; {  
</span>                sut.validateDeliveryAddress(order)  
<!-- -->            }  
<!-- -->  
<span>            exception.message shouldBe </span><span style="color:#50a14f">&quot;ì§€ë²ˆ ì£¼ì†Œì—ëŠ” ìƒì„¸ ì£¼ì†Œê°€ ë°˜ë“œì‹œ í•„ìš”í•©ë‹ˆë‹¤.&quot;</span><span>  
</span>        }  
<!-- -->    }})</code></div></pre>
<p>ì´ì²˜ëŸ¼ <code node="[object Object]">FixtureMonkey</code>ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë¤í•œ í•„ë“œê°’ì„ ê°–ëŠ” fixture ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>
<p><code node="[object Object]">setter</code>ë¥¼ í†µí•´ì„œ ê°ì²´ë¥¼ ì œì–´í•  ìˆ˜ ìˆëŠ”ë°, í…ŒìŠ¤íŠ¸í•˜ê³ ì í•˜ëŠ” í•„ë“œë¥¼ ëª…í™•íˆ í‘œí˜„í•˜ê¸° ë•Œë¬¸ì— í…ŒìŠ¤íŠ¸ ê´€ì‹¬ì‚¬ë¥¼ ë°”ë¡œ íŒŒì•…í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ë„ ìˆë‹¤.</p></div><section></section></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"post-1-3","lang":"ko","title":"Fixture Monkey With Kotlin","category":"test","thumbnail":"https://i.imgur.com/J5SIYtU.png","tags":"test","date":"2024-03-03 10:00","searchKeywords":"fixture monkey, test, fixture","description":"fixtureMonkey","preview":"\ní…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ë‹¤ë³´ë©´ í”„ë¡œë•ì…˜ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ì‹œê°„ë³´ë‹¤ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ í”½ìŠ¤ì²˜ë¥¼ ë§Œë“œëŠ”ë° ë” ë§ì€ ì‹œê°„ì´ ì†Œìš”ë  ë•Œê°€ ìˆë‹¤.\n\ní…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ëŠ”ë° ì‹œê°„ì´ ë§ì´ ë“¤ê³  ë²ˆê±°ë¡œìš¸ ìˆ˜ë¡ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ìƒëµí•˜ê²Œ ë˜ê³  ê²°êµ­ ê²°í•¨ì— ì·¨ì•½í•œ ì‹œìŠ¤í…œì„ êµ¬í˜„í•  ìœ„í—˜ì´ "},"detail":"\ní…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ë‹¤ë³´ë©´ í”„ë¡œë•ì…˜ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ì‹œê°„ë³´ë‹¤ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ í”½ìŠ¤ì²˜ë¥¼ ë§Œë“œëŠ”ë° ë” ë§ì€ ì‹œê°„ì´ ì†Œìš”ë  ë•Œê°€ ìˆë‹¤.\n\ní…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ëŠ”ë° ì‹œê°„ì´ ë§ì´ ë“¤ê³  ë²ˆê±°ë¡œìš¸ ìˆ˜ë¡ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ìƒëµí•˜ê²Œ ë˜ê³  ê²°êµ­ ê²°í•¨ì— ì·¨ì•½í•œ ì‹œìŠ¤í…œì„ êµ¬í˜„í•  ìœ„í—˜ì´ ìˆë‹¤.\n\nì£¼ë¬¸ ê´€ë ¨ ë¡œì§ì„ í…ŒìŠ¤íŠ¸ í•˜ê¸°ìœ„í•´ì„œ `Order` í”½ìŠ¤ì²˜ë¥¼ ë§Œë“¤ì–´ì•¼í–ˆì—ˆëŠ”ë° `Order` ê°ì²´ ë‚´ë¶€ì— í•„ë“œê°€ 24ê°œ ì˜€ì„ë¿ë”ëŸ¬ ë‚´ë¶€ ê°ì²´ì˜ í•„ë“œê¹Œì§€ í•©í•˜ë©´ ì •ì˜í•´ì¤˜ì•¼ í•˜ëŠ” í•„ë“œê°€ ìˆ˜ ì—†ì´ ë§ì•˜ë‹¤.\n\nì‹¬ì§€ì–´ ì¼€ì´ìŠ¤ë§ˆë‹¤ ë‹¤ë¥¸ ìƒíƒœê°’ì„ ê°–ê³ ìˆëŠ” `Order` í”½ìŠ¤ì²˜ë¥¼ ì¶”ê°€ë¡œ ë§Œë“¤ì–´ì¤˜ì•¼ í–ˆê¸° ë•Œë¬¸ì— í…ŒìŠ¤íŠ¸ ì¤€ë¹„ì— ë§ì€ ì‹œê°„ì´ ì†Œìš”ëë˜ ê²½í—˜ì´ ìˆë‹¤.\n\nê·¸ëŸ¬ë˜ì¤‘ `Fixture Monkey`ë¼ëŠ” PBT(Property Based Testing) ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì•Œê²Œë˜ì—ˆê³ , `Fixture Monkey`ë¥¼ ì‚¬ìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸ë¥¼ í¸ë¦¬í•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆì—ˆë˜ ê²½í—˜ì´ ìˆì—ˆëŠ”ë°, ê°œì¸ì ìœ¼ë¡œ ìœ ìš©í•˜ê²Œ ì‚¬ìš©í–ˆë˜ í•µì‹¬ ë‚´ìš©ë§Œ ê°„ëµí•˜ê²Œ ì†Œê°œí•˜ê³ ì í•œë‹¤.\n\n## FixtureMonkeyì˜ ì£¼ìš” ê¸°ëŠ¥\n\n- ë Œë¤í•˜ê³  ë³µì¡í•œ ì œì•½ì¡°ê±´ì„ ê°–ëŠ” ê°ì²´ë¥¼ ìƒì„±í•´ì¤€ë‹¤.\n- ì„¤ì •í•œ ì œì•½ì¡°ê±´ì„ ê²€ì¦í•  ìˆ˜ ìˆë‹¤.\n- í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ë§ˆë‹¤ ë‹¤ë¥´ê²Œ ê°ì²´ ì œì–´ê°€ ê°€ëŠ¥í•˜ë‹¤.\n\n`FixtureMonkey`ëŠ” ì—”í‹°í‹° í•„ë“œì— ì§€ì •ëœ Bean validation ì–´ë…¸í…Œì´ì…˜ì— ë”°ë¼ ìœ íš¨í•œ ì†ì„±ê°’ì„ ê°–ëŠ” ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.\n\nì‹¤íŒ¨ í…ŒìŠ¤íŠ¸ ì‘ì„±ê³¼ ê°™ì´ íŠ¹ì • í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ì—ì„œ ì¡°ê±´ì„ ì¶”ê°€í•˜ê±°ë‚˜ ì¡°ê±´ì— ë²—ì–´ë‚œ í•„ë“œë¥¼ ì„¤ì •í•´ì•¼í•  ê²½ìš°ì—ëŠ” `ArbitraryBuilder`ë¥¼ ì‚¬ìš©í•˜ì—¬ fixtureë¥¼ ì œì–´í•  ìˆ˜ ìˆë‹¤.\n\n`ArbitraryBuilder`ëŠ” ë¹Œë” íŒ¨í„´ì„ ì‚¬ìš©í•˜ì—¬ ê°ì²´ì˜ í•„ë“œê°’ì„ ì›í•˜ëŠ” ê°’ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ”ê²Œ ê°€ëŠ¥í•˜ë‹¤.\n\n## ì˜ˆì œ\n\n### Without FixtureMonkey Test\n\n`FixtureMonkey`ì˜ í¸ë¦¬í•œ ê¸°ëŠ¥ì„ ì‚´í´ë³´ê¸°ì— ì•ì„œì„œ ì´ì „ ë°©ì‹ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•´ë³´ì•˜ë‹¤.\n\në‹¤ìŒì€ ì£¼ë¬¸ ê³¼ì •ì—ì„œ ì…ë ¥ëœ ë°°ì†¡ì§€ ì£¼ì†Œê°€ ìœ íš¨í•œì§€ ê²€ì¦í•˜ëŠ” í…ŒìŠ¤íŠ¸ì´ë‹¤.\n\n```kotlin\ndata class Order(  \n    val product: List\u003cProduct\u003e,  \n    val purchaserName: String,  \n    val receiver: Receiver,  \n    val totalPrice: Long,  \n    val coupon: List\u003cCoupon\u003e,  \n    val delivery: Delivery,  \n)\n```\n\n```kotlin\nclass OrderFixture {  \n    companion object {  \n        fun create(  \n            id: Long = 1L,  \n            product: List\u003cProduct\u003e = listOf(  \n                Product(name = \"ì´ˆì½œë¦¿\", price = 300L),  \n                Product(name = \"í‚¤ë³´ë“œ\", price = 20000L),  \n            ),  \n            purchaserName: String = \"í™ê¸¸ë™\",  \n            receiver: Receiver = Receiver(name = \"í™ê¸¸ë™\", \"01012341234\"),  \n            totalPrice: Long = 20300L,  \n            coupon: List\u003cCoupon\u003e = listOf(Coupon()),  \n            delivery: Delivery = Delivery(\"ê²½ê¸°ë„\", \"203ë™ 1023í˜¸\", true),  \n        ): Order {  \n            return Order(  \n                id = id,  \n                product = product,  \n                purchaserName = purchaserName,  \n                receiver = receiver,  \n                totalPrice = totalPrice,  \n                coupon = coupon,  \n                delivery = delivery,  \n            )  \n        }  \n    }  \n}\n```\n\n```kotlin\nclass OrderServiceTestWithOutFixtureMonkey : DescribeSpec({  \n    val sut = OrderService()  \n    val log = LoggerFactory.getLogger(this.javaClass)  \n  \n    describe(\"ë°°ì†¡ ì£¼ì†Œ ìœ íš¨ì„± ê²€ì‚¬\") {  \n        it(\"ìœ íš¨ì„± ê²€ì¦ì„ í†µê³¼í•œë‹¤.\") {  \n            val order = OrderFixture.create()  \n  \n            shouldNotThrowAny {  \n                sut.validateDeliveryAddress(order)  \n            }  \n        }  \n        it(\"ì§€ë²ˆ ì£¼ì†Œë¥¼ ì…ë ¥ë°›ì•˜ì„ ê²½ìš°, ìƒì„¸ ì£¼ì†Œê°€ ì—†ìœ¼ë©´ ì•ˆ ëœë‹¤\") {  \n            val order = OrderFixture.create(delivery = Delivery(baseAddress = \"ê²½ê¸°ë„\", road = false, detailAddress = null))  \n  \n            val exception = shouldThrow\u003cIllegalArgumentException\u003e {  \n                sut.validateDeliveryAddress(order)  \n            }  \n  \n            exception.message shouldBe \"ì§€ë²ˆ ì£¼ì†Œì—ëŠ” ìƒì„¸ ì£¼ì†Œê°€ ë°˜ë“œì‹œ í•„ìš”í•©ë‹ˆë‹¤.\"  \n        }  \n    }})\n```\n\ní…ŒìŠ¤íŠ¸ ì„±ê³µê³¼ ì‹¤íŒ¨ ì¼€ì´ìŠ¤ë¥¼ ìœ„í•œ `OrderFixture` ê°ì²´ë¥¼ ì •ì˜í•˜ì—¬ ì‚¬ìš©í•˜ì˜€ë‹¤.\n`Order` ê°ì²´ì— ì •ì˜ëœ í•„ë“œ ë¿ë§Œ ì•„ë‹ˆë¼ ì—°ê´€ëœ ê°ì²´ì˜ í•„ë“œê°’ë“¤ë„ í•¨ê»˜ ì •ì˜í•´ì¤˜ì•¼í•˜ê¸° ë•Œë¬¸ì— ê½¤ë‚˜ ë²ˆê±°ë¡œìš´ ì‘ì—…ì¼ ìˆ˜ ìˆë‹¤.\n\në§Œì•½ ì—°ê´€ëœ ì—”í‹°í‹°ê°€ ë” ë§ê³  ì •ì˜í•´ì¤˜ì•¼í•˜ëŠ” í•„ë“œ ìˆ˜ê°€ í›¨ì”¬ ë§ì•„ì§„ë‹¤ë©´ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ fixtureë¥¼ ì •ì˜í•˜ëŠ”ë° í° ë¹„ìš©ì´ ì†Œëª¨ë˜ê²Œ ëœë‹¤.\n\n### FixtureMonkey Test\n\nì´ë²ˆì—” `FixtureMonkey`ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°„ë‹¨í•˜ê²Œ fixtureë¥¼ ìƒì„±í•˜ì—¬ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•´ë³´ë„ë¡ í•˜ê² ë‹¤.\n\në¨¼ì € `build.gradle.kts`ì— ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì£¼ì—ˆë‹¤.\n```gradle\n// fixture monkey  \ntestImplementation(\"com.navercorp.fixturemonkey:fixture-monkey-starter-kotlin:1.0.14\")  \ntestImplementation(\"com.navercorp.fixturemonkey:fixture-monkey-jakarta-validation:0.6.3\")  \ntestImplementation(\"com.navercorp.fixturemonkey:fixture-monkey-jackson:0.6.3\")\n```\n\n**DefaultMonkeyCreator**\n```kotlin\nfun monkey() : FixtureMonkey {  \n    return FixtureMonkey.builder()  \n        .plugin(KotlinPlugin())  \n        .build()  \n}\n```\n\n**FixtureBuilders**\n```kotlin\nfun \u003cT\u003e defaultFixtureBuilder(clazz: Class\u003cT\u003e): ArbitraryBuilder\u003cT\u003e {  \n    return monkey().giveMeBuilder(clazz)  \n}\n```\n\n```kotlin\nclass OrderServiceTestWithFixtureMonkey: DescribeSpec({  \n    val sut = OrderService()  \n    val log = LoggerFactory.getLogger(this.javaClass)  \n  \n    describe(\"ë°°ì†¡ ì£¼ì†Œ ìœ íš¨ì„± ê²€ì‚¬\") {  \n        it(\"ìœ íš¨ì„± ê²€ì¦ì„ í†µê³¼í•œë‹¤.\") {  \n            val order = defaultFixtureBuilder(Order::class.java)  \n                .setExp(  \n                    Order::delivery,  \n                    Delivery(baseAddress = \"ê²½ê¸°ë„\", detailAddress = null, road = true))  \n                .sample()  \n  \n            shouldNotThrowAny {  \n                sut.validateDeliveryAddress(order)  \n            }  \n        }  \n        it(\"ì§€ë²ˆ ì£¼ì†Œë¥¼ ì…ë ¥ë°›ì•˜ì„ ê²½ìš°, ìƒì„¸ ì£¼ì†Œê°€ ì—†ìœ¼ë©´ ì•ˆ ëœë‹¤\") {  \n            val order = defaultFixtureBuilder(Order::class.java)  \n                .setExp(  \n                    Order::delivery,  \n                    Delivery(baseAddress = \"ê²½ê¸°ë„\", detailAddress = null, road = false))  \n                .sample()  \n  \n            val exception = shouldThrow\u003cIllegalArgumentException\u003e {  \n                sut.validateDeliveryAddress(order)  \n            }  \n  \n            exception.message shouldBe \"ì§€ë²ˆ ì£¼ì†Œì—ëŠ” ìƒì„¸ ì£¼ì†Œê°€ ë°˜ë“œì‹œ í•„ìš”í•©ë‹ˆë‹¤.\"  \n        }  \n    }})\n```\n\nì´ì²˜ëŸ¼ `FixtureMonkey`ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë¤í•œ í•„ë“œê°’ì„ ê°–ëŠ” fixture ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n\n`setter`ë¥¼ í†µí•´ì„œ ê°ì²´ë¥¼ ì œì–´í•  ìˆ˜ ìˆëŠ”ë°, í…ŒìŠ¤íŠ¸í•˜ê³ ì í•˜ëŠ” í•„ë“œë¥¼ ëª…í™•íˆ í‘œí˜„í•˜ê¸° ë•Œë¬¸ì— í…ŒìŠ¤íŠ¸ ê´€ì‹¬ì‚¬ë¥¼ ë°”ë¡œ íŒŒì•…í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ë„ ìˆë‹¤.\n","lang":"ko","allPostsInOtherLang":[]},"__N_SSG":true},"page":"/[lang]/[id]","query":{"lang":"ko","id":"post-1-3"},"buildId":"OfAFIk6lGw8DlHB2wpHkI","assetPrefix":"/log","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>