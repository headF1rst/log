<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="apple-touch-icon" sizes="180x180" href="https://i.imgur.com/2nHGFTv.png"/><link rel="icon" type="image/png" sizes="32x32" href="https://i.imgur.com/2nHGFTv.png"/><link rel="icon" type="image/png" sizes="16x16" href="https://i.imgur.com/2nHGFTv.png"/><link rel="manifest" href="/site.webmanifest"/><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#da532c"/><meta name="theme-color" content="#ffffff"/><title>ì¡°ì¸ í…Œì´ë¸”ì´ ì™œ ìƒê¸°ì§€? @JoinColumnìœ¼ë¡œ í•´ê²°í•˜ëŠ” ì—°ê´€ê´€ê³„ ë§¤í•‘ì˜ ë¹„ë°€</title><meta name="title" content="ì¡°ì¸ í…Œì´ë¸”ì´ ì™œ ìƒê¸°ì§€? @JoinColumnìœ¼ë¡œ í•´ê²°í•˜ëŠ” ì—°ê´€ê´€ê³„ ë§¤í•‘ì˜ ë¹„ë°€"/><meta name="description" content="JoinColumn"/><meta name="keywords" content="jpa, JoinColumn, ì™¸ë˜ í‚¤, ì™¸ë˜ í‚¤ ì œì•½ ì¡°ê±´"/><meta name="robots" content="index, follow"/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="language" content="Korean"/><meta name="author" content="Sanha Ko"/><meta property="og:title" content="ì¡°ì¸ í…Œì´ë¸”ì´ ì™œ ìƒê¸°ì§€? @JoinColumnìœ¼ë¡œ í•´ê²°í•˜ëŠ” ì—°ê´€ê´€ê³„ ë§¤í•‘ì˜ ë¹„ë°€"/><meta property="og:url" content="https://headf1rst.github.io/log/ko/post23"/><meta property="og:type" content="blog"/><meta property="og:image" content="https://velog.velcdn.com/images/wooyong99/post/6fdebd14-5fe8-4959-b085-74edb6bc4d46/image.png"/><meta property="og:description" content="JoinColumn"/><link rel="alternate" hrefLang="ko" href="https://headf1rst.github.io/log/ko/post23"/><link rel="alternate" hrefLang="x-default" href="https://headf1rst.github.io/log/ko/post23"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"ì¡°ì¸ í…Œì´ë¸”ì´ ì™œ ìƒê¸°ì§€? @JoinColumnìœ¼ë¡œ í•´ê²°í•˜ëŠ” ì—°ê´€ê´€ê³„ ë§¤í•‘ì˜ ë¹„ë°€","datePublished":"2024-10-10 10:00","dateModified":"2024-10-10 10:00","author":{"@type":"Person","name":"Sanha Ko"},"description":"JoinColumn","image":"https://velog.velcdn.com/images/wooyong99/post/6fdebd14-5fe8-4959-b085-74edb6bc4d46/image.png","url":"https://headf1rst.github.io/TIL/ko/post23","keywords":"JPA","inLanguage":"ko-KR","publisher":{"@type":"Organization","name":"headF1rst","logo":{"@type":"ImageObject","url":"https://headf1rst.github.io/TIL/favicon.ico"}},"mainEntityOfPage":{"@type":"WebPage","@id":"https://headf1rst.github.io/TIL/ko/post23"}}</script><meta name="next-head-count" content="25"/><link rel="preload" href="/log/_next/static/css/de99c5ef2826bc4f.css" as="style"/><link rel="stylesheet" href="/log/_next/static/css/de99c5ef2826bc4f.css" data-n-g=""/><link rel="preload" href="/log/_next/static/css/38994dd0aed51f22.css" as="style"/><link rel="stylesheet" href="/log/_next/static/css/38994dd0aed51f22.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/log/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/log/_next/static/chunks/webpack-1b0decc0375da57b.js" defer=""></script><script src="/log/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/log/_next/static/chunks/main-6e6d6dc6617c8481.js" defer=""></script><script src="/log/_next/static/chunks/pages/_app-7797c1cc757d9cb4.js" defer=""></script><script src="/log/_next/static/chunks/pages/%5Blang%5D/%5Bid%5D-0687c01bb97784d8.js" defer=""></script><script src="/log/_next/static/hS3v93nMUHjigGXIKdLju/_buildManifest.js" defer=""></script><script src="/log/_next/static/hS3v93nMUHjigGXIKdLju/_ssgManifest.js" defer=""></script></head><body><div id="__next"><nav class="flex bg-white sticky top-0 left-0 z-50 justify-between items-center border-b-2 border-gray-100 py-3 md:justify-start md:space-x-10 px-10 sm:px-5 dark:bg-[#0d1117] dark:text-[#c9d1d9] dark:border-gray-600"><div class="flex justify-start"><a href="/log/ko/"><div class="flex items-center gap-2 cursor-pointer"><h1 class="text-lg ">JustAnotherBlog</h1></div></a></div><div class="flex justify-between gap-10 sm:hidden items-center"><a href="/log/ko/"><button class="font-light hover:text-indigo-300 text-base">Home</button></a><a href="/log/ko/?section=tech"><button class="font-light hover:text-indigo-300 text-base">Tech</button></a><a href="/log/ko/?section=domain"><button class="font-light hover:text-indigo-300 text-base">Domain</button></a><a href="https://plain-composer-c65.notion.site/29c7640fdf054059b6ea28ed61189bfb" target="_blank" rel="noreferrer" class="hover:text-indigo-300 text-base font-light flex gap-1">About<span class="flex justify-center" style="align-items:center"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z"></path><path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"></path></svg></span></a><div class="relative"><button class="flex items-center gap-1 hover:text-indigo-300 text-base font-light">ğŸ‡°ğŸ‡·<!-- --> <!-- -->í•œêµ­ì–´</button></div></div><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="lg:hidden" height="25" width="25" xmlns="http://www.w3.org/2000/svg"><path d="M32 96v64h448V96H32zm0 128v64h448v-64H32zm0 128v64h448v-64H32z"></path></svg></nav><main class="dark:bg-[#0d1117] h-screen pb-10"><div class="flex flex-col w-3/5 sm:w-5/6 m-auto pt-20 pb-20 gap-10 dark:bg-[#0d1117] dark:text-[#c9d1d9]"><ul id="scroll-spy" class="sm:hidden p-10 fixed top-50 right-0 h-full w-1/5 text-gray-500 dark:text-[#c9d1d9]"></ul><div class="text-5xl font-bold">ì¡°ì¸ í…Œì´ë¸”ì´ ì™œ ìƒê¸°ì§€? @JoinColumnìœ¼ë¡œ í•´ê²°í•˜ëŠ” ì—°ê´€ê´€ê³„ ë§¤í•‘ì˜ ë¹„ë°€</div><div class="flex flex-col gap-2"><div class="text-base text-gray-600 dark:text-gray-300">2024-10-10 10:00</div><div class="flex flex-wrap gap-2 dark:text-black sm:m-0"><span class="p-1 pl-3 pr-3 rounded-md bg-indigo-100 hover:bg-indigo-200 cursor-pointer transition ease-in-out duration-200 text-sm">JPA</span></div></div><div class="flex items-center gap-2"><span class="text-sm text-gray-400">ğŸ‡ºğŸ‡¸ ì˜ì–´ë¡œ ì½ê¸°</span></div><div class="markdown-body" style="font-size:17px"><p><code node="[object Object]">@JoinColumn</code>ì€ ì™¸ë˜í‚¤ë¥¼ ë§¤í•‘í•  ë•Œ ì‚¬ìš©í•œë‹¤. ì¦‰, í•œ ì—”í‹°í‹°ì—ì„œ ë‹¤ë¥¸ ì—”í‹°í‹°ë¥¼ ì°¸ì¡°(ì¡°ì¸)í•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ” í•„ë“œë¥¼ ì§€ì •í•˜ëŠ” ì—­í• ì„ í•œë‹¤.</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;color:#383a42;background:#fafafa"><code class="language-java" style="white-space:pre"><span style="color:#4078f2">@Entity</span><span>  
</span><span></span><span style="color:#4078f2">@Table(name = &quot;orders&quot;)</span><span>  
</span><span></span><span style="color:#4078f2">@Getter</span><span>
</span><span></span><span style="color:#4078f2">@NoArgsConstructor</span><span>  
</span><span></span><span style="color:#a626a4">public</span><span> </span><span class="hljs-class" style="color:#a626a4">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#4078f2">Order</span><span class="hljs-class"> </span><span>{  
</span>  
<span>    </span><span style="color:#4078f2">@Id</span><span>  
</span><span>    </span><span style="color:#4078f2">@GeneratedValue(strategy = GenerationType.IDENTITY)</span><span>  
</span><span>    </span><span style="color:#a626a4">private</span><span> Long id;  
</span>  
<span>    </span><span style="color:#4078f2">@ManyToOne</span><span>  
</span><span>    </span><span style="color:#4078f2">@JoinColumn(name = &quot;customer_id&quot;)</span><span> </span><span style="color:#a0a1a7;font-style:italic">// ì™¸ë˜ í‚¤ë¡œ ì§€ì •</span><span>
</span><span>    </span><span style="color:#a626a4">private</span><span> Customer customer;
</span>  
<span>    </span><span class="hljs-function" style="color:#a626a4">public</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#4078f2">Order</span><span class="hljs-function hljs-params">(Customer customer)</span><span class="hljs-function"> </span><span>{  
</span><span>        </span><span style="color:#a626a4">this</span><span>.customer = customer;  
</span>    }  
<!-- -->}</code></div></pre>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;color:#383a42;background:#fafafa"><code class="language-java" style="white-space:pre"><span style="color:#4078f2">@Entity</span><span>  
</span><span></span><span style="color:#4078f2">@Getter</span><span>  
</span><span></span><span style="color:#4078f2">@NoArgsConstructor</span><span>  
</span><span></span><span style="color:#a626a4">public</span><span> </span><span class="hljs-class" style="color:#a626a4">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#4078f2">Customer</span><span class="hljs-class"> </span><span>{  
</span>  
<span>    </span><span style="color:#4078f2">@Id</span><span>  
</span><span>    </span><span style="color:#4078f2">@GeneratedValue(strategy = GenerationType.IDENTITY)</span><span>  
</span><span>    </span><span style="color:#a626a4">private</span><span> Long id;  
</span>  
<span>    </span><span style="color:#a626a4">private</span><span> String name;  
</span>  
<span>    </span><span class="hljs-function" style="color:#a626a4">public</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#4078f2">Customer</span><span class="hljs-function hljs-params">(String name)</span><span class="hljs-function"> </span><span>{  
</span><span>        </span><span style="color:#a626a4">this</span><span>.name = name;  
</span>    }  
<!-- -->}</code></div></pre>
<p><code node="[object Object]">@JoinColumn(name = &quot;customer_id&quot;)</code>ëŠ” Order í…Œì´ë¸”ì—ì„œ <code node="[object Object]">customer_id</code>ë¼ëŠ” ì»¬ëŸ¼ì„ í†µí•´ <code node="[object Object]">Customer</code> ì—”í‹°í‹°ë¥¼ ì°¸ì¡°í•˜ëŠ” ì™¸ë˜ í‚¤ë¥¼ ì •ì˜í•œë‹¤.</p>
<p><code node="[object Object]">@ManyToOne</code>ì˜ ê¸°ë³¸ FetchTypeì´ EAGERì´ê¸° ë•Œë¬¸ì—, Order ì¡°íšŒì‹œ ì—°ê´€ëœ Customer ì—”í‹°í‹°ë„ í•¨ê»˜ <code node="[object Object]">@JoinColumn</code>ì— ëª…ì‹œëœ í•„ë“œë¥¼ í†µí•´ ì°¸ì¡°(ì¡°ì¸)í•˜ì—¬ ê°€ì ¸ì˜¤ëŠ”ê±¸ ë³¼ ìˆ˜ ìˆë‹¤.</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;color:#383a42;background:#fafafa"><code class="language-java" style="white-space:pre"><span style="color:#4078f2">@SpringBootTest</span><span>  
</span><span></span><span class="hljs-class" style="color:#a626a4">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#4078f2">OrderTest</span><span class="hljs-class"> </span><span>{  
</span>  
<span>    </span><span style="color:#4078f2">@Autowired</span><span>  
</span><span>    </span><span style="color:#a626a4">private</span><span> OrderRepository orderRepository;  
</span><span>    </span><span style="color:#4078f2">@Autowired</span><span>  
</span><span>    </span><span style="color:#a626a4">private</span><span> CustomerRepository customerRepository;  
</span>  
<span>    </span><span style="color:#4078f2">@Test</span><span>  
</span><span>    </span><span class="hljs-function" style="color:#a626a4">void</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#4078f2">joinColumnTest</span><span class="hljs-function hljs-params">()</span><span class="hljs-function"> </span><span>{  
</span><span>        </span><span style="color:#a626a4">var</span><span> customer = customerRepository.save( </span><span style="color:#a626a4">new</span><span> Customer(</span><span style="color:#50a14f">&quot;John Doe&quot;</span><span>));  
</span><span>        </span><span style="color:#a626a4">var</span><span> order = orderRepository.save(</span><span style="color:#a626a4">new</span><span> Order(customer));  
</span>  
<!-- -->        Order result = orderRepository.findById(order.getId()).get();  
<!-- -->    }
<!-- -->}</code></div></pre>
<pre><code node="[object Object]">Hibernate: 
    select
        o1_0.id,
        c1_0.id,
        c1_0.name 
    from
        orders o1_0 
    left join
        customer c1_0 
            on c1_0.id=o1_0.customer_id 
    where
        o1_0.id=?
</code></pre>
<p><code node="[object Object]">@JoinColumn</code>ì€ ConstraintMode ì˜µì…˜ ê°’ì„ í†µí•´ì„œ ì™¸ë˜ í‚¤ ì œì•½ ì¡°ê±´ì„ ê±¸ ìˆ˜ ìˆë‹¤.</p>
<ul>
<li><strong>ConstraintMode.PROVIDER_DEFAULT</strong> (ê¸°ë³¸ê°’): JPA Providerì˜ ì™¸ë˜ í‚¤ ì œì•½ ì¡°ê±´ ìƒì„± ì „ëµì„ ë”°ë¥¸ë‹¤. HibernateëŠ” ì´ ì˜µì…˜ ê°’ì—ì„œ ì™¸ë˜ í‚¤ ì œì•½ ì¡°ê±´ì„ ì„¤ì •í•œë‹¤.</li>
<li><strong>ConstraintMode.CONSTRAINT</strong>: í•´ë‹¹ ì™¸ë˜ í‚¤ ì»¬ëŸ¼ì— ë°ì´í„°ë² ì´ìŠ¤ ë ˆë²¨ì—ì„œ ì™¸ë˜ í‚¤ ì œì•½ ì¡°ê±´ì„ ì„¤ì •í•œë‹¤.</li>
<li><strong>ConstraintMode.NO_CONSTRAIN</strong>: DBì— ì™¸ë˜í‚¤ ì œì•½ì¡°ê±´ì„ ê±¸ì§€ ì•ŠëŠ”ë‹¤.<!-- -->
<ul>
<li>ì™¸ë˜ í‚¤ ì»¬ëŸ¼ì€ ìƒì„±ë˜ì§€ë§Œ DBê°€ ê·¸ ì»¬ëŸ¼ì˜ ê°’ì„ ê²€ì¦í•˜ê±°ë‚˜ ë¬´ê²°ì„±ì„ ìœ ì§€í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.</li>
</ul>
</li>
</ul>
<h1>@JoinColumnì€ ìƒëµí•´ë„ ë ê¹Œ</h1>
<p>ë‹¨ë°©í–¥ <code node="[object Object]">@ManyToOne</code> ì—ì„  <code node="[object Object]">@JoinColumn</code>ì„ ìƒëµ í•  ìˆ˜ ìˆë‹¤. <code node="[object Object]">@JoinColumn</code>ì„ ìƒëµí•˜ë©´ ì™¸ë˜ í‚¤ë¥¼ ì°¾ì„ ë•Œ ê¸°ë³¸ ì „ëµì„ ì‚¬ìš©í•œë‹¤. ì‹¤ì œë¡œ ì•ì˜ ì˜ˆì œ ì½”ë“œì—ì„œ <code node="[object Object]">@JoinColumn</code>ì„ ìƒëµí•˜ê³  í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í–ˆì„ë•Œ ë™ì¼í•œ ë¡œê·¸ê°€ ì¶œë ¥ë˜ëŠ”ê±¸ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.</p>
<blockquote>
<p>ê¸°ë³¸ ì „ëµ: í•„ë“œëª… + _ + ì°¸ì¡°í•˜ëŠ” í…Œì´ë¸”ì˜ ì»¬ëŸ¼ëª…</p>
<p>ex) customer + _ + id -&gt; customer_id</p>
</blockquote>
<p>ê·¸ëŸ¬ë‚˜ ë‹¨ë°©í–¥ <code node="[object Object]">@OneToMany</code> ì—°ê´€ê´€ê³„ì—ì„œ <code node="[object Object]">@JoinColumn</code>ì„ ìƒëµí•  ê²½ìš°, JPAëŠ” ì¡°ì¸ í…Œì´ë¸”ì„ ìƒì„±í•˜ì—¬ ì—”í‹°í‹°ê°„ì˜ ê´€ê³„ë¥¼ ê´€ë¦¬í•œë‹¤.</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;color:#383a42;background:#fafafa"><code class="language-java" style="white-space:pre"><span style="color:#4078f2">@Entity</span><span>  
</span><span></span><span style="color:#4078f2">@Table(name = &quot;orders&quot;)</span><span>  
</span><span></span><span style="color:#4078f2">@Getter</span><span>  
</span><span></span><span style="color:#4078f2">@NoArgsConstructor</span><span>  
</span><span></span><span style="color:#a626a4">public</span><span> </span><span class="hljs-class" style="color:#a626a4">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#4078f2">Order</span><span class="hljs-class"> </span><span>{  
</span>  
<span>    </span><span style="color:#4078f2">@Id</span><span>  
</span><span>    </span><span style="color:#4078f2">@GeneratedValue(strategy = GenerationType.IDENTITY)</span><span>  
</span><span>    </span><span style="color:#a626a4">private</span><span> Long id;  
</span>
<span>	</span><span style="color:#4078f2">@Column(name = &quot;customer_id&quot;)</span><span>
</span><span>    </span><span style="color:#a626a4">private</span><span> Long customerId;  
</span>  
<span>    </span><span class="hljs-function" style="color:#a626a4">public</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#4078f2">Order</span><span class="hljs-function hljs-params">(Long customerId)</span><span class="hljs-function"> </span><span>{  
</span><span>        </span><span style="color:#a626a4">this</span><span>.customerId = customerId;  
</span>    }  
<!-- -->}</code></div></pre>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;color:#383a42;background:#fafafa"><code class="language-java" style="white-space:pre"><span style="color:#4078f2">@Entity</span><span>  
</span><span></span><span style="color:#4078f2">@Getter</span><span>  
</span><span></span><span style="color:#4078f2">@NoArgsConstructor</span><span>  
</span><span></span><span style="color:#a626a4">public</span><span> </span><span class="hljs-class" style="color:#a626a4">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#4078f2">Customer</span><span class="hljs-class"> </span><span>{  
</span>  
<span>    </span><span style="color:#4078f2">@Id</span><span>  
</span><span>    </span><span style="color:#4078f2">@GeneratedValue(strategy = GenerationType.IDENTITY)</span><span>  
</span><span>    </span><span style="color:#a626a4">private</span><span> Long id;  
</span>  
<span>    </span><span style="color:#4078f2">@OneToMany(cascade = CascadeType.ALL)</span><span>  
</span><span>    </span><span style="color:#a626a4">private</span><span> List&lt;Order&gt; orders = </span><span style="color:#a626a4">new</span><span> ArrayList&lt;&gt;();
</span>  
<span>    </span><span style="color:#a626a4">private</span><span> String name;  
</span>  
<span>    </span><span class="hljs-function" style="color:#a626a4">public</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#4078f2">Customer</span><span class="hljs-function hljs-params">(String name)</span><span class="hljs-function"> </span><span>{  
</span><span>        </span><span style="color:#a626a4">this</span><span>.name = name;  
</span>    }  
<!-- -->}</code></div></pre>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;color:#383a42;background:#fafafa"><code class="language-java" style="white-space:pre"><span style="color:#4078f2">@SpringBootTest</span><span>  
</span><span></span><span class="hljs-class" style="color:#a626a4">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#4078f2">OrderTest</span><span class="hljs-class"> </span><span>{  
</span>  
<span>    </span><span style="color:#4078f2">@Autowired</span><span>  
</span><span>    </span><span style="color:#a626a4">private</span><span> OrderRepository orderRepository;  
</span><span>    </span><span style="color:#4078f2">@Autowired</span><span>  
</span><span>    </span><span style="color:#a626a4">private</span><span> CustomerRepository customerRepository;  
</span>  
<span>    </span><span style="color:#4078f2">@Test</span><span>  
</span><span>	</span><span style="color:#4078f2">@Transactional</span><span>  
</span><span>	</span><span class="hljs-function" style="color:#a626a4">public</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a626a4">void</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#4078f2">joinColumnTest</span><span class="hljs-function hljs-params">()</span><span class="hljs-function"> </span><span>{  
</span><span>	    Customer customer = </span><span style="color:#a626a4">new</span><span> Customer(</span><span style="color:#50a14f">&quot;John Doe&quot;</span><span>);  
</span>	    List&lt;Order&gt; orders = List.of(
<span>		    </span><span style="color:#a626a4">new</span><span> Order(customer.getId()), 
</span><span>		    </span><span style="color:#a626a4">new</span><span> Order(customer.getId())
</span>		);
<!-- -->	    customer.getOrders().addAll(orders);  
<!-- -->  
<!-- -->	    customerRepository.save(customer);  
<!-- -->	    orderRepository.saveAll(orders);  
<!-- -->	}
<!-- -->}</code></div></pre>
<p>í…ŒìŠ¤íŠ¸ ì‹¤í–‰ í›„ ë¡œê·¸ë¥¼ í™•ì¸í•´ë³´ë©´ <code node="[object Object]">customer_orders</code> ì¡°ì¸ í…Œì´ë¸”ì´ ìƒì„±ëœê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>
<p><img src="https://i.imgur.com/v332oJ2.png" alt="Post image" node="[object Object]" style="max-height:450px;max-width:90%"/></p>
<h1>ì™œ ì¡°ì¸ í…Œì´ë¸”ì´ ìƒì„±ë ê¹Œ?</h1>
<p>ë‹¨ë°©í–¥ <code node="[object Object]">@OneToMany</code> ê´€ê³„ì—ì„œëŠ” JPAê°€ ì–´ëŠ í…Œì´ë¸”ì— ì™¸ë˜ í‚¤ë¥¼ ë‘ì–´ì•¼ í• ì§€ ëª…í™•í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—, ì¤‘ê°„ ì¡°ì¸ í…Œì´ë¸”ì„ ìƒì„±í•˜ì—¬ ê´€ê³„ë¥¼ ê´€ë¦¬í•œë‹¤.</p>
<p>ì¡°ì¸ í…Œì´ë¸”ì´ ìƒì„±ë˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê³  ì‹¶ë‹¤ë©´, <code node="[object Object]">@JoinColumn</code>ì„ ëª…ì‹œì ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ì™¸ë˜ í‚¤ë¥¼ ì§ì ‘ ê´€ë¦¬í•˜ë„ë¡ í•´ì•¼ í•œë‹¤.
ì•„ë˜ì™€ ê°™ì´ <code node="[object Object]">@JoinColumn(name = &quot;customer_id&quot;...)</code>ë¥¼ ì„¤ì •í•˜ì—¬ ì™¸ë˜í‚¤ë¥¼ Order í…Œì´ë¸”ì— ì„¤ì •í•  ìˆ˜ ìˆë‹¤.</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;color:#383a42;background:#fafafa"><code class="language-java" style="white-space:pre"><span style="color:#4078f2">@Entity</span><span>  
</span><span></span><span style="color:#4078f2">@Getter</span><span>  
</span><span></span><span style="color:#4078f2">@NoArgsConstructor</span><span>  
</span><span></span><span style="color:#a626a4">public</span><span> </span><span class="hljs-class" style="color:#a626a4">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#4078f2">Customer</span><span class="hljs-class"> </span><span>{  
</span><span>	</span><span style="color:#a0a1a7;font-style:italic">//...</span><span>
</span>	
<span>    </span><span style="color:#4078f2">@OneToMany(cascade = CascadeType.ALL)</span><span>  
</span><span>    </span><span style="color:#4078f2">@JoinColumn(name = &quot;customer_id&quot;, foreignKey = @ForeignKey(ConstraintMode.NO_CONSTRAINT))</span><span>  
</span><span>    </span><span style="color:#a626a4">private</span><span> List&lt;Order&gt; orders = </span><span style="color:#a626a4">new</span><span> ArrayList&lt;&gt;();  
</span>  
<span>    </span><span style="color:#a0a1a7;font-style:italic">//...</span><span>
</span>}</code></div></pre>
<p>ë‹¤ì‹œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ê³  ë¡œê·¸ë¥¼ í™•ì¸í•´ ë³´ë©´ ì¡°ì¸ í…Œì´ë¸”ì´ ìƒì„±ë˜ì§€ ì•Šì€ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>
<p><img src="https://i.imgur.com/1RLHtIp.png" alt="Post image" node="[object Object]" style="max-height:450px;max-width:90%"/></p>
<hr/>
<p><strong>ì°¸ê³  ìë£Œ</strong></p>
<ul>
<li><a href="https://hyeon9mak.github.io/omit-join-column-when-using-many-to-one/">@ManyToOneì„ ì‚¬ìš©í•  ë•Œ @JoinColumn ìƒëµ</a></li>
</ul></div><section></section></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"post23","lang":"ko","title":"ì¡°ì¸ í…Œì´ë¸”ì´ ì™œ ìƒê¸°ì§€? @JoinColumnìœ¼ë¡œ í•´ê²°í•˜ëŠ” ì—°ê´€ê´€ê³„ ë§¤í•‘ì˜ ë¹„ë°€","section":"tech","thumbnail":"https://velog.velcdn.com/images/wooyong99/post/6fdebd14-5fe8-4959-b085-74edb6bc4d46/image.png","tags":"JPA","date":"2024-10-10 10:00","searchKeywords":"jpa, JoinColumn, ì™¸ë˜ í‚¤, ì™¸ë˜ í‚¤ ì œì•½ ì¡°ê±´","description":"JoinColumn","preview":"\n`@JoinColumn`ì€ ì™¸ë˜í‚¤ë¥¼ ë§¤í•‘í•  ë•Œ ì‚¬ìš©í•œë‹¤. ì¦‰, í•œ ì—”í‹°í‹°ì—ì„œ ë‹¤ë¥¸ ì—”í‹°í‹°ë¥¼ ì°¸ì¡°(ì¡°ì¸)í•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ” í•„ë“œë¥¼ ì§€ì •í•˜ëŠ” ì—­í• ì„ í•œë‹¤.\n\n```java\n@Entity  \n@Table(name = \"orders\")  \n@Getter\n@No"},"detail":"\n`@JoinColumn`ì€ ì™¸ë˜í‚¤ë¥¼ ë§¤í•‘í•  ë•Œ ì‚¬ìš©í•œë‹¤. ì¦‰, í•œ ì—”í‹°í‹°ì—ì„œ ë‹¤ë¥¸ ì—”í‹°í‹°ë¥¼ ì°¸ì¡°(ì¡°ì¸)í•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ” í•„ë“œë¥¼ ì§€ì •í•˜ëŠ” ì—­í• ì„ í•œë‹¤.\n\n```java\n@Entity  \n@Table(name = \"orders\")  \n@Getter\n@NoArgsConstructor  \npublic class Order {  \n  \n    @Id  \n    @GeneratedValue(strategy = GenerationType.IDENTITY)  \n    private Long id;  \n  \n    @ManyToOne  \n    @JoinColumn(name = \"customer_id\") // ì™¸ë˜ í‚¤ë¡œ ì§€ì •\n    private Customer customer;\n  \n    public Order(Customer customer) {  \n        this.customer = customer;  \n    }  \n}\n```\n\n```java\n@Entity  \n@Getter  \n@NoArgsConstructor  \npublic class Customer {  \n  \n    @Id  \n    @GeneratedValue(strategy = GenerationType.IDENTITY)  \n    private Long id;  \n  \n    private String name;  \n  \n    public Customer(String name) {  \n        this.name = name;  \n    }  \n}\n```\n\n`@JoinColumn(name = \"customer_id\")`ëŠ” Order í…Œì´ë¸”ì—ì„œ `customer_id`ë¼ëŠ” ì»¬ëŸ¼ì„ í†µí•´ `Customer` ì—”í‹°í‹°ë¥¼ ì°¸ì¡°í•˜ëŠ” ì™¸ë˜ í‚¤ë¥¼ ì •ì˜í•œë‹¤.\n\n`@ManyToOne`ì˜ ê¸°ë³¸ FetchTypeì´ EAGERì´ê¸° ë•Œë¬¸ì—, Order ì¡°íšŒì‹œ ì—°ê´€ëœ Customer ì—”í‹°í‹°ë„ í•¨ê»˜ `@JoinColumn`ì— ëª…ì‹œëœ í•„ë“œë¥¼ í†µí•´ ì°¸ì¡°(ì¡°ì¸)í•˜ì—¬ ê°€ì ¸ì˜¤ëŠ”ê±¸ ë³¼ ìˆ˜ ìˆë‹¤.\n\n```java\n@SpringBootTest  \nclass OrderTest {  \n  \n    @Autowired  \n    private OrderRepository orderRepository;  \n    @Autowired  \n    private CustomerRepository customerRepository;  \n  \n    @Test  \n    void joinColumnTest() {  \n        var customer = customerRepository.save( new Customer(\"John Doe\"));  \n        var order = orderRepository.save(new Order(customer));  \n  \n        Order result = orderRepository.findById(order.getId()).get();  \n    }\n}\n```\n\n```\nHibernate: \n    select\n        o1_0.id,\n        c1_0.id,\n        c1_0.name \n    from\n        orders o1_0 \n    left join\n        customer c1_0 \n            on c1_0.id=o1_0.customer_id \n    where\n        o1_0.id=?\n```\n\n`@JoinColumn`ì€ ConstraintMode ì˜µì…˜ ê°’ì„ í†µí•´ì„œ ì™¸ë˜ í‚¤ ì œì•½ ì¡°ê±´ì„ ê±¸ ìˆ˜ ìˆë‹¤.\n\n- **ConstraintMode.PROVIDER_DEFAULT** (ê¸°ë³¸ê°’): JPA Providerì˜ ì™¸ë˜ í‚¤ ì œì•½ ì¡°ê±´ ìƒì„± ì „ëµì„ ë”°ë¥¸ë‹¤. HibernateëŠ” ì´ ì˜µì…˜ ê°’ì—ì„œ ì™¸ë˜ í‚¤ ì œì•½ ì¡°ê±´ì„ ì„¤ì •í•œë‹¤.\n- **ConstraintMode.CONSTRAINT**: í•´ë‹¹ ì™¸ë˜ í‚¤ ì»¬ëŸ¼ì— ë°ì´í„°ë² ì´ìŠ¤ ë ˆë²¨ì—ì„œ ì™¸ë˜ í‚¤ ì œì•½ ì¡°ê±´ì„ ì„¤ì •í•œë‹¤.\n- **ConstraintMode.NO_CONSTRAIN**: DBì— ì™¸ë˜í‚¤ ì œì•½ì¡°ê±´ì„ ê±¸ì§€ ì•ŠëŠ”ë‹¤.\n    - ì™¸ë˜ í‚¤ ì»¬ëŸ¼ì€ ìƒì„±ë˜ì§€ë§Œ DBê°€ ê·¸ ì»¬ëŸ¼ì˜ ê°’ì„ ê²€ì¦í•˜ê±°ë‚˜ ë¬´ê²°ì„±ì„ ìœ ì§€í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.\n\n# @JoinColumnì€ ìƒëµí•´ë„ ë ê¹Œ\n\në‹¨ë°©í–¥ `@ManyToOne` ì—ì„  `@JoinColumn`ì„ ìƒëµ í•  ìˆ˜ ìˆë‹¤. `@JoinColumn`ì„ ìƒëµí•˜ë©´ ì™¸ë˜ í‚¤ë¥¼ ì°¾ì„ ë•Œ ê¸°ë³¸ ì „ëµì„ ì‚¬ìš©í•œë‹¤. ì‹¤ì œë¡œ ì•ì˜ ì˜ˆì œ ì½”ë“œì—ì„œ `@JoinColumn`ì„ ìƒëµí•˜ê³  í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í–ˆì„ë•Œ ë™ì¼í•œ ë¡œê·¸ê°€ ì¶œë ¥ë˜ëŠ”ê±¸ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.\n\n\u003e ê¸°ë³¸ ì „ëµ: í•„ë“œëª… + _ + ì°¸ì¡°í•˜ëŠ” í…Œì´ë¸”ì˜ ì»¬ëŸ¼ëª…\n\u003e \n\u003e ex) customer + _ + id -\u003e customer_id\n\nê·¸ëŸ¬ë‚˜ ë‹¨ë°©í–¥ `@OneToMany` ì—°ê´€ê´€ê³„ì—ì„œ `@JoinColumn`ì„ ìƒëµí•  ê²½ìš°, JPAëŠ” ì¡°ì¸ í…Œì´ë¸”ì„ ìƒì„±í•˜ì—¬ ì—”í‹°í‹°ê°„ì˜ ê´€ê³„ë¥¼ ê´€ë¦¬í•œë‹¤.\n\n```java\n@Entity  \n@Table(name = \"orders\")  \n@Getter  \n@NoArgsConstructor  \npublic class Order {  \n  \n    @Id  \n    @GeneratedValue(strategy = GenerationType.IDENTITY)  \n    private Long id;  \n\n\t@Column(name = \"customer_id\")\n    private Long customerId;  \n  \n    public Order(Long customerId) {  \n        this.customerId = customerId;  \n    }  \n}\n```\n\n```java\n@Entity  \n@Getter  \n@NoArgsConstructor  \npublic class Customer {  \n  \n    @Id  \n    @GeneratedValue(strategy = GenerationType.IDENTITY)  \n    private Long id;  \n  \n    @OneToMany(cascade = CascadeType.ALL)  \n    private List\u003cOrder\u003e orders = new ArrayList\u003c\u003e();\n  \n    private String name;  \n  \n    public Customer(String name) {  \n        this.name = name;  \n    }  \n}\n```\n\n```java\n@SpringBootTest  \nclass OrderTest {  \n  \n    @Autowired  \n    private OrderRepository orderRepository;  \n    @Autowired  \n    private CustomerRepository customerRepository;  \n  \n    @Test  \n\t@Transactional  \n\tpublic void joinColumnTest() {  \n\t    Customer customer = new Customer(\"John Doe\");  \n\t    List\u003cOrder\u003e orders = List.of(\n\t\t    new Order(customer.getId()), \n\t\t    new Order(customer.getId())\n\t\t);\n\t    customer.getOrders().addAll(orders);  \n  \n\t    customerRepository.save(customer);  \n\t    orderRepository.saveAll(orders);  \n\t}\n}\n```\n\ní…ŒìŠ¤íŠ¸ ì‹¤í–‰ í›„ ë¡œê·¸ë¥¼ í™•ì¸í•´ë³´ë©´ `customer_orders` ì¡°ì¸ í…Œì´ë¸”ì´ ìƒì„±ëœê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n\n![log](https://i.imgur.com/v332oJ2.png)\n\n# ì™œ ì¡°ì¸ í…Œì´ë¸”ì´ ìƒì„±ë ê¹Œ?\n\në‹¨ë°©í–¥ `@OneToMany` ê´€ê³„ì—ì„œëŠ” JPAê°€ ì–´ëŠ í…Œì´ë¸”ì— ì™¸ë˜ í‚¤ë¥¼ ë‘ì–´ì•¼ í• ì§€ ëª…í™•í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—, ì¤‘ê°„ ì¡°ì¸ í…Œì´ë¸”ì„ ìƒì„±í•˜ì—¬ ê´€ê³„ë¥¼ ê´€ë¦¬í•œë‹¤.\n\nì¡°ì¸ í…Œì´ë¸”ì´ ìƒì„±ë˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê³  ì‹¶ë‹¤ë©´, `@JoinColumn`ì„ ëª…ì‹œì ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ì™¸ë˜ í‚¤ë¥¼ ì§ì ‘ ê´€ë¦¬í•˜ë„ë¡ í•´ì•¼ í•œë‹¤.\nì•„ë˜ì™€ ê°™ì´ `@JoinColumn(name = \"customer_id\"...)`ë¥¼ ì„¤ì •í•˜ì—¬ ì™¸ë˜í‚¤ë¥¼ Order í…Œì´ë¸”ì— ì„¤ì •í•  ìˆ˜ ìˆë‹¤.\n\n```java\n@Entity  \n@Getter  \n@NoArgsConstructor  \npublic class Customer {  \n\t//...\n\t\n    @OneToMany(cascade = CascadeType.ALL)  \n    @JoinColumn(name = \"customer_id\", foreignKey = @ForeignKey(ConstraintMode.NO_CONSTRAINT))  \n    private List\u003cOrder\u003e orders = new ArrayList\u003c\u003e();  \n  \n    //...\n}\n```\n\në‹¤ì‹œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ê³  ë¡œê·¸ë¥¼ í™•ì¸í•´ ë³´ë©´ ì¡°ì¸ í…Œì´ë¸”ì´ ìƒì„±ë˜ì§€ ì•Šì€ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n\n![log](https://i.imgur.com/1RLHtIp.png)\n\n---\n\n**ì°¸ê³  ìë£Œ**\n- [@ManyToOneì„ ì‚¬ìš©í•  ë•Œ @JoinColumn ìƒëµ](https://hyeon9mak.github.io/omit-join-column-when-using-many-to-one/)\n\n","lang":"ko","allPostsInOtherLang":[{"id":"post9","lang":"en","title":"Solving the Billion-Dollar Mistake: Modern Java Null Safety with JSpecify and NullAway","date":"2025-09-24","section":"tech","tags":"Null Safety","thumbnail":"https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Ftotx4mdagz9nsegld5mr.png","description":"Learn how to eliminate NullPointerExceptions using JSpecify annotations and NullAway static analysis in modern Java applications","searchKeywords":"JSpecify, NullAway, Java null safety, NullPointerException prevention, static analysis","preview":"\nWhether you're a developer just starting with Java or a senior engineer with two decades of experience, the most frequently encountered err"},{"id":"post8","lang":"en","title":"PostgreSQL MVCC Internals: From xmin/xmax to Isolation Levels","date":"2025-07-06","section":"tech","tags":"PostgreSQL","thumbnail":"https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F7rk467sodudw3ww7iisi.png","description":"Deep dive into PostgreSQL's MVCC implementation, understanding xmin/xmax and how different isolation levels work internally","searchKeywords":"PostgreSQL, MVCC, xmin, xmax, transaction, isolation level, concurrency control","preview":"\nWhen multiple users access a database concurrently, how can we guarantee Isolation, one of the core `ACID` properties? While we could apply"},{"id":"post7","lang":"en","title":"Prompt Engineering Tips from Anthropic Engineers","date":"2025-06-24","section":"tech","tags":"Prompt Engineering, AI, Anthropic, LLM","thumbnail":"https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fdzzrfth8zqdnrhbj9538.png","description":"Valuable prompt engineering tips and insights from Anthropic engineers","searchKeywords":"prompt engineering, AI tips, Anthropic, LLM best practices","preview":"\nHere are a few impressive points from [youtube (AI prompt engineering: A deep dive)](https://www.youtube.com/watch?v=T9aRN5JkmL8\u0026t=2463s) w"},{"id":"post6","lang":"en","title":"From Theory to Practice: A JMH Showdown Between Sequential and Parallel Streams","date":"2025-06-15","section":"tech","tags":"Java, JMH","thumbnail":"https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F7ytq239pcfe279t9avzg.png","description":"Practical performance comparison between sequential and parallel streams using JMH benchmarking","searchKeywords":"JMH benchmark, Java performance, sequential vs parallel, stream optimization","preview":"\nIn our [previous post](https://dev.to/headf1rst/discover-how-forkjoinpool-powers-javas-high-performance-parallel-processing-3pn7), we delve"},{"id":"post5","lang":"en","title":"Discover how ForkJoinPool powers Java's high-performance parallel processing","date":"2025-06-03","section":"tech","tags":"ForkJoinPool","thumbnail":"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qgawc6pj2vbyzuem20wn.png","description":"Understanding ForkJoinPool and how it powers Java's parallel stream processing","searchKeywords":"ForkJoinPool, Java parallel processing, work-stealing, parallelStream","preview":"\nRecently, I optimized our transport operation plan Excel upload feature, boosting performance for logistics system administrators. This too"},{"id":"post4","lang":"en","title":"Why @Transactional Sometimes Fails: A Deep Dive into Spring AOP Proxies","section":"tech","date":"2025-06-01","tags":"AOP, Transactional","thumbnail":"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/a1wxef2amdixh3lr4any.png","description":"Understanding Spring AOP proxies and why @Transactional sometimes fails with internal method calls","searchKeywords":"Spring AOP, @Transactional, proxy pattern, self-invocation","preview":"\n## How @Transactional Works\n\n### Transaction Management via AOP and the Proxy Pattern\n\nAOP (Aspect-Oriented Programming) is a programming p"},{"id":"post3","lang":"en","title":"Java ClassLoaders: How the JVM Dynamically Loads \u0026 Executes Your Code","section":"tech","date":"2025-05-27","tags":"Java","thumbnail":"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/iu4pe4d29jz23wt26kwz.png","description":"Deep dive into Java ClassLoaders and JVM's dynamic class loading mechanisms","searchKeywords":"Java ClassLoader, JVM, dynamic loading, class loading process","preview":"\nJava's \"Write Once, Run Anywhere\" principle is foundational to its sustained popularity. This portability is powered by the Java Virtual Ma"},{"id":"post2","lang":"en","title":"Understanding and Resolving the N+1 Query Problem in JPA","section":"tech","date":"2025-05-05","tags":"JPA, Hibernate, N+1 Problem","thumbnail":"https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fsrf6chohgt3athvqj7u1.png","description":"Learn what causes the N+1 query problem in JPA, how to identify it, and practical solutions using fetch joins, EntityGraph, and QueryDSL","searchKeywords":"JPA, N+1, Hibernate, performance, optimization, fetch join, EntityGraph, QueryDSL","preview":"\nThe **N+1 query problem** arises when one initial query (1) is followed by N additional queriesâ€”one for each result row from the first quer"},{"id":"post1","lang":"en","title":"Kafka Producer Stability Check: Ensuring Message Safety in Apache Kafka","section":"tech","date":"2025-05-04","tags":"Kafka, Producer, Reliability, Apache Kafka","thumbnail":"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ojt2w7s7rr9kws35r2yg.png","description":"Learn how to build fault-tolerant Kafka producers that survive rolling patches and broker failures","searchKeywords":"Kafka, producer, reliability, message safety, rolling patch, broker failure","preview":"\nDuring a recent incident, our team observed message loss from a Kafka producer during an Amazon MSK rolling patch. What began as a routine "}]},"__N_SSG":true},"page":"/[lang]/[id]","query":{"lang":"ko","id":"post23"},"buildId":"hS3v93nMUHjigGXIKdLju","assetPrefix":"/log","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>